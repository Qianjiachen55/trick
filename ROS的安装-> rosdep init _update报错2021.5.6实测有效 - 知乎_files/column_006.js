(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{1200:function(e,t,n){"use strict";var r=n(9),o=n(10),i=n(11),a=n(12),c=n(5),u=n(0),s=n(1),l=n(2),f=n.n(l),m=n(84),d=n.n(m),p=n(571);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}t.a=function(e){var t=function(t){Object(i.a)(a,t);var n=h(a);function a(){return Object(r.a)(this,a),n.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var t=this.props.currentUser,n=this.context.authRequired,r=void 0===n?function(){}:n;return Object(u.b)(e,Object.assign({isLogin:t&&"guest"!==t.userType,authRequired:r},this.props))}}]),a}(s.Component);return t.contextTypes={authRequired:f.a.func},d()(Object(p.b)(t),e)}},1203:function(e,t,n){"use strict";var r=n(0),o=n(2),i=n.n(o),a=n(6),c=n.n(a),u=Array.from(Array(12),(function(e,t){return Object(r.b)("span",{className:"Spinner-blade-12"},t)}));function s(e){var t=e.className,n=e.white,o=e.large;return Object(r.b)("div",{className:c()("Spinner-blade",t,{"Spinner-blade--large":o,"Spinner-blade--white":n}),children:u})}s.propTypes={className:i.a.string,large:i.a.bool,white:i.a.bool};var l=s;t.a=l},1206:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r,o=n(20),i=n(4),a=n(0),c=n(36),u=n(1),s=n(54),l=n(578),f=n(1200),m=n(156),d={comment_img:"comment_img",dynamic_top:"dynamic_top",comment_sticker:"comment_sticker",block_keyword:"block_keyword"},p=(r={},Object(i.a)(r,d.comment_img,"https://pic1.zhimg.com/v2-1b6677f81c2df41f55332474e15bc5a8.png"),Object(i.a)(r,d.dynamic_top,"https://pic1.zhimg.com/v2-e16a265a43592abd5b98fceef02a1614.png"),Object(i.a)(r,d.comment_sticker,"https://pic1.zhimg.com/v2-183a98cd480d24cd3e3246ba7a26303b.png"),Object(i.a)(r,d.block_keyword,"https://pic3.zhimg.com/v2-0ad4e8aa43c3279cc7536f2fb7ac8348.png"),r);t.b=Object(f.a)((function(e){var t=e.show,n=e.setShow,r=e.type,i=e.isLogin,f=Object(u.useState)(""),d=Object(o.a)(f,2),h=d[0],v=d[1],b=Object(u.useState)(!1),g=Object(o.a)(b,2),C=g[0],y=g[1],O=Object(m.b)(),j=Object(c.b)((function(){t&&n(!1)}));return Object(u.useEffect)((function(){!h&&i&&(y(!0),O("/api/v4/unlimited/vip_rights/popup?token="+r).then((function(e){v(e.payload.button.text)})).catch((function(){})).then((function(){y(!1)})))}),[t]),Object(a.b)(s.b,{css:{".Modal-content":{padding:0,marginTop:0}},onClose:j,children:t&&!C&&Object(a.c)(a.a,{children:[Object(a.b)("img",{alt:"",src:p[r],css:{height:"230px",width:"400px",display:"block"}}),Object(a.b)("div",{css:{padding:20},children:Object(a.b)("div",{css:function(e){return{padding:8,background:"linear-gradient(135deg, ".concat(e.colors.GYL06A," 0.2%, ").concat(e.colors.GYL08A," 100%)"),borderRadius:3,textAlign:"center",fontsize:14,color:e.colors.GYL12A,userSelect:"none","&:hover":{cursor:"pointer"}}},onClick:l.a.show,children:h||"开通会员立即解锁"})})]})})}))},1208:function(e,t,n){(function(e,r){var o;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var i="Expected a function",a="__lodash_placeholder__",c=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],u="[object Arguments]",s="[object Array]",l="[object Boolean]",f="[object Date]",m="[object Error]",d="[object Function]",p="[object GeneratorFunction]",h="[object Map]",v="[object Number]",b="[object Object]",g="[object RegExp]",C="[object Set]",y="[object String]",O="[object Symbol]",j="[object WeakMap]",_="[object ArrayBuffer]",w="[object DataView]",R="[object Float32Array]",k="[object Float64Array]",I="[object Int8Array]",N="[object Int16Array]",S="[object Int32Array]",P="[object Uint8Array]",x="[object Uint16Array]",E="[object Uint32Array]",A=/\b__p \+= '';/g,L=/\b(__p \+=) '' \+/g,T=/(__e\(.*?\)|\b__t\)) \+\n'';/g,B=/&(?:amp|lt|gt|quot|#39);/g,z=/[&<>"']/g,D=RegExp(B.source),M=RegExp(z.source),V=/<%-([\s\S]+?)%>/g,F=/<%([\s\S]+?)%>/g,q=/<%=([\s\S]+?)%>/g,U=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,W=/^\w*$/,H=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,G=/[\\^$.*+?()[\]{}|]/g,$=RegExp(G.source),Z=/^\s+/,K=/\s/,Y=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,J=/\{\n\/\* \[wrapped with (.+)\] \*/,X=/,? & /,Q=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ee=/[()=,{}\[\]\/\s]/,te=/\\(\\)?/g,ne=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,re=/\w*$/,oe=/^[-+]0x[0-9a-f]+$/i,ie=/^0b[01]+$/i,ae=/^\[object .+?Constructor\]$/,ce=/^0o[0-7]+$/i,ue=/^(?:0|[1-9]\d*)$/,se=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,le=/($^)/,fe=/['\n\r\u2028\u2029\\]/g,me="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",de="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pe="[\\ud800-\\udfff]",he="["+de+"]",ve="["+me+"]",be="\\d+",ge="[\\u2700-\\u27bf]",Ce="[a-z\\xdf-\\xf6\\xf8-\\xff]",ye="[^\\ud800-\\udfff"+de+be+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",Oe="\\ud83c[\\udffb-\\udfff]",je="[^\\ud800-\\udfff]",_e="(?:\\ud83c[\\udde6-\\uddff]){2}",we="[\\ud800-\\udbff][\\udc00-\\udfff]",Re="[A-Z\\xc0-\\xd6\\xd8-\\xde]",ke="(?:"+Ce+"|"+ye+")",Ie="(?:"+Re+"|"+ye+")",Ne="(?:"+ve+"|"+Oe+")"+"?",Se="[\\ufe0e\\ufe0f]?"+Ne+("(?:\\u200d(?:"+[je,_e,we].join("|")+")[\\ufe0e\\ufe0f]?"+Ne+")*"),Pe="(?:"+[ge,_e,we].join("|")+")"+Se,xe="(?:"+[je+ve+"?",ve,_e,we,pe].join("|")+")",Ee=RegExp("['’]","g"),Ae=RegExp(ve,"g"),Le=RegExp(Oe+"(?="+Oe+")|"+xe+Se,"g"),Te=RegExp([Re+"?"+Ce+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[he,Re,"$"].join("|")+")",Ie+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[he,Re+ke,"$"].join("|")+")",Re+"?"+ke+"+(?:['’](?:d|ll|m|re|s|t|ve))?",Re+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",be,Pe].join("|"),"g"),Be=RegExp("[\\u200d\\ud800-\\udfff"+me+"\\ufe0e\\ufe0f]"),ze=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,De=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Me=-1,Ve={};Ve[R]=Ve[k]=Ve[I]=Ve[N]=Ve[S]=Ve[P]=Ve["[object Uint8ClampedArray]"]=Ve[x]=Ve[E]=!0,Ve[u]=Ve[s]=Ve[_]=Ve[l]=Ve[w]=Ve[f]=Ve[m]=Ve[d]=Ve[h]=Ve[v]=Ve[b]=Ve[g]=Ve[C]=Ve[y]=Ve[j]=!1;var Fe={};Fe[u]=Fe[s]=Fe[_]=Fe[w]=Fe[l]=Fe[f]=Fe[R]=Fe[k]=Fe[I]=Fe[N]=Fe[S]=Fe[h]=Fe[v]=Fe[b]=Fe[g]=Fe[C]=Fe[y]=Fe[O]=Fe[P]=Fe["[object Uint8ClampedArray]"]=Fe[x]=Fe[E]=!0,Fe[m]=Fe[d]=Fe[j]=!1;var qe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ue=parseFloat,We=parseInt,He="object"==typeof e&&e&&e.Object===Object&&e,Ge="object"==typeof self&&self&&self.Object===Object&&self,$e=He||Ge||Function("return this")(),Ze=t&&!t.nodeType&&t,Ke=Ze&&"object"==typeof r&&r&&!r.nodeType&&r,Ye=Ke&&Ke.exports===Ze,Je=Ye&&He.process,Xe=function(){try{var e=Ke&&Ke.require&&Ke.require("util").types;return e||Je&&Je.binding&&Je.binding("util")}catch(e){}}(),Qe=Xe&&Xe.isArrayBuffer,et=Xe&&Xe.isDate,tt=Xe&&Xe.isMap,nt=Xe&&Xe.isRegExp,rt=Xe&&Xe.isSet,ot=Xe&&Xe.isTypedArray;function it(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function at(e,t,n,r){for(var o=-1,i=null==e?0:e.length;++o<i;){var a=e[o];t(r,a,n(a),e)}return r}function ct(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function ut(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function st(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function lt(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i}function ft(e,t){return!!(null==e?0:e.length)&&Ot(e,t,0)>-1}function mt(e,t,n){for(var r=-1,o=null==e?0:e.length;++r<o;)if(n(t,e[r]))return!0;return!1}function dt(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}function pt(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}function ht(e,t,n,r){var o=-1,i=null==e?0:e.length;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n}function vt(e,t,n,r){var o=null==e?0:e.length;for(r&&o&&(n=e[--o]);o--;)n=t(n,e[o],o,e);return n}function bt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var gt=Rt("length");function Ct(e,t,n){var r;return n(e,(function(e,n,o){if(t(e,n,o))return r=n,!1})),r}function yt(e,t,n,r){for(var o=e.length,i=n+(r?1:-1);r?i--:++i<o;)if(t(e[i],i,e))return i;return-1}function Ot(e,t,n){return t==t?function(e,t,n){var r=n-1,o=e.length;for(;++r<o;)if(e[r]===t)return r;return-1}(e,t,n):yt(e,_t,n)}function jt(e,t,n,r){for(var o=n-1,i=e.length;++o<i;)if(r(e[o],t))return o;return-1}function _t(e){return e!=e}function wt(e,t){var n=null==e?0:e.length;return n?Nt(e,t)/n:NaN}function Rt(e){return function(t){return null==t?void 0:t[e]}}function kt(e){return function(t){return null==e?void 0:e[t]}}function It(e,t,n,r,o){return o(e,(function(e,o,i){n=r?(r=!1,e):t(n,e,o,i)})),n}function Nt(e,t){for(var n,r=-1,o=e.length;++r<o;){var i=t(e[r]);void 0!==i&&(n=void 0===n?i:n+i)}return n}function St(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Pt(e){return e?e.slice(0,Zt(e)+1).replace(Z,""):e}function xt(e){return function(t){return e(t)}}function Et(e,t){return dt(t,(function(t){return e[t]}))}function At(e,t){return e.has(t)}function Lt(e,t){for(var n=-1,r=e.length;++n<r&&Ot(t,e[n],0)>-1;);return n}function Tt(e,t){for(var n=e.length;n--&&Ot(t,e[n],0)>-1;);return n}function Bt(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var zt=kt({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Dt=kt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Mt(e){return"\\"+qe[e]}function Vt(e){return Be.test(e)}function Ft(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function qt(e,t){return function(n){return e(t(n))}}function Ut(e,t){for(var n=-1,r=e.length,o=0,i=[];++n<r;){var c=e[n];c!==t&&c!==a||(e[n]=a,i[o++]=n)}return i}function Wt(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function Ht(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function Gt(e){return Vt(e)?function(e){var t=Le.lastIndex=0;for(;Le.test(e);)++t;return t}(e):gt(e)}function $t(e){return Vt(e)?function(e){return e.match(Le)||[]}(e):function(e){return e.split("")}(e)}function Zt(e){for(var t=e.length;t--&&K.test(e.charAt(t)););return t}var Kt=kt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Yt=function e(t){var n,r=(t=null==t?$e:Yt.defaults($e.Object(),t,Yt.pick($e,De))).Array,o=t.Date,K=t.Error,me=t.Function,de=t.Math,pe=t.Object,he=t.RegExp,ve=t.String,be=t.TypeError,ge=r.prototype,Ce=me.prototype,ye=pe.prototype,Oe=t["__core-js_shared__"],je=Ce.toString,_e=ye.hasOwnProperty,we=0,Re=(n=/[^.]+$/.exec(Oe&&Oe.keys&&Oe.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",ke=ye.toString,Ie=je.call(pe),Ne=$e._,Se=he("^"+je.call(_e).replace(G,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Pe=Ye?t.Buffer:void 0,xe=t.Symbol,Le=t.Uint8Array,Be=Pe?Pe.allocUnsafe:void 0,qe=qt(pe.getPrototypeOf,pe),He=pe.create,Ge=ye.propertyIsEnumerable,Ze=ge.splice,Ke=xe?xe.isConcatSpreadable:void 0,Je=xe?xe.iterator:void 0,Xe=xe?xe.toStringTag:void 0,gt=function(){try{var e=ti(pe,"defineProperty");return e({},"",{}),e}catch(e){}}(),kt=t.clearTimeout!==$e.clearTimeout&&t.clearTimeout,Jt=o&&o.now!==$e.Date.now&&o.now,Xt=t.setTimeout!==$e.setTimeout&&t.setTimeout,Qt=de.ceil,en=de.floor,tn=pe.getOwnPropertySymbols,nn=Pe?Pe.isBuffer:void 0,rn=t.isFinite,on=ge.join,an=qt(pe.keys,pe),cn=de.max,un=de.min,sn=o.now,ln=t.parseInt,fn=de.random,mn=ge.reverse,dn=ti(t,"DataView"),pn=ti(t,"Map"),hn=ti(t,"Promise"),vn=ti(t,"Set"),bn=ti(t,"WeakMap"),gn=ti(pe,"create"),Cn=bn&&new bn,yn={},On=Ni(dn),jn=Ni(pn),_n=Ni(hn),wn=Ni(vn),Rn=Ni(bn),kn=xe?xe.prototype:void 0,In=kn?kn.valueOf:void 0,Nn=kn?kn.toString:void 0;function Sn(e){if(Ha(e)&&!La(e)&&!(e instanceof An)){if(e instanceof En)return e;if(_e.call(e,"__wrapped__"))return Si(e)}return new En(e)}var Pn=function(){function e(){}return function(t){if(!Wa(t))return{};if(He)return He(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function xn(){}function En(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function An(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Ln(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Tn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Bn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function zn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Bn;++t<n;)this.add(e[t])}function Dn(e){var t=this.__data__=new Tn(e);this.size=t.size}function Mn(e,t){var n=La(e),r=!n&&Aa(e),o=!n&&!r&&Da(e),i=!n&&!r&&!o&&Qa(e),a=n||r||o||i,c=a?St(e.length,ve):[],u=c.length;for(var s in e)!t&&!_e.call(e,s)||a&&("length"==s||o&&("offset"==s||"parent"==s)||i&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||ui(s,u))||c.push(s);return c}function Vn(e){var t=e.length;return t?e[zr(0,t-1)]:void 0}function Fn(e,t){return Ri(Co(e),Yn(t,0,e.length))}function qn(e){return Ri(Co(e))}function Un(e,t,n){(void 0!==n&&!Pa(e[t],n)||void 0===n&&!(t in e))&&Zn(e,t,n)}function Wn(e,t,n){var r=e[t];_e.call(e,t)&&Pa(r,n)&&(void 0!==n||t in e)||Zn(e,t,n)}function Hn(e,t){for(var n=e.length;n--;)if(Pa(e[n][0],t))return n;return-1}function Gn(e,t,n,r){return tr(e,(function(e,o,i){t(r,e,n(e),i)})),r}function $n(e,t){return e&&yo(t,Oc(t),e)}function Zn(e,t,n){"__proto__"==t&&gt?gt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Kn(e,t){for(var n=-1,o=t.length,i=r(o),a=null==e;++n<o;)i[n]=a?void 0:vc(e,t[n]);return i}function Yn(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}function Jn(e,t,n,r,o,i){var a,c=1&t,s=2&t,m=4&t;if(n&&(a=o?n(e,r,o,i):n(e)),void 0!==a)return a;if(!Wa(e))return e;var j=La(e);if(j){if(a=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&_e.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!c)return Co(e,a)}else{var A=oi(e),L=A==d||A==p;if(Da(e))return mo(e,c);if(A==b||A==u||L&&!o){if(a=s||L?{}:ai(e),!c)return s?function(e,t){return yo(e,ri(e),t)}(e,function(e,t){return e&&yo(t,jc(t),e)}(a,e)):function(e,t){return yo(e,ni(e),t)}(e,$n(a,e))}else{if(!Fe[A])return o?e:{};a=function(e,t,n){var r=e.constructor;switch(t){case _:return po(e);case l:case f:return new r(+e);case w:return function(e,t){var n=t?po(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case R:case k:case I:case N:case S:case P:case"[object Uint8ClampedArray]":case x:case E:return ho(e,n);case h:return new r;case v:case y:return new r(e);case g:return function(e){var t=new e.constructor(e.source,re.exec(e));return t.lastIndex=e.lastIndex,t}(e);case C:return new r;case O:return o=e,In?pe(In.call(o)):{}}var o}(e,A,c)}}i||(i=new Dn);var T=i.get(e);if(T)return T;i.set(e,a),Ya(e)?e.forEach((function(r){a.add(Jn(r,t,n,r,e,i))})):Ga(e)&&e.forEach((function(r,o){a.set(o,Jn(r,t,n,o,e,i))}));var B=j?void 0:(m?s?Zo:$o:s?jc:Oc)(e);return ct(B||e,(function(r,o){B&&(r=e[o=r]),Wn(a,o,Jn(r,t,n,o,e,i))})),a}function Xn(e,t,n){var r=n.length;if(null==e)return!r;for(e=pe(e);r--;){var o=n[r],i=t[o],a=e[o];if(void 0===a&&!(o in e)||!i(a))return!1}return!0}function Qn(e,t,n){if("function"!=typeof e)throw new be(i);return Oi((function(){e.apply(void 0,n)}),t)}function er(e,t,n,r){var o=-1,i=ft,a=!0,c=e.length,u=[],s=t.length;if(!c)return u;n&&(t=dt(t,xt(n))),r?(i=mt,a=!1):t.length>=200&&(i=At,a=!1,t=new zn(t));e:for(;++o<c;){var l=e[o],f=null==n?l:n(l);if(l=r||0!==l?l:0,a&&f==f){for(var m=s;m--;)if(t[m]===f)continue e;u.push(l)}else i(t,f,r)||u.push(l)}return u}Sn.templateSettings={escape:V,evaluate:F,interpolate:q,variable:"",imports:{_:Sn}},Sn.prototype=xn.prototype,Sn.prototype.constructor=Sn,En.prototype=Pn(xn.prototype),En.prototype.constructor=En,An.prototype=Pn(xn.prototype),An.prototype.constructor=An,Ln.prototype.clear=function(){this.__data__=gn?gn(null):{},this.size=0},Ln.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Ln.prototype.get=function(e){var t=this.__data__;if(gn){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return _e.call(t,e)?t[e]:void 0},Ln.prototype.has=function(e){var t=this.__data__;return gn?void 0!==t[e]:_e.call(t,e)},Ln.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=gn&&void 0===t?"__lodash_hash_undefined__":t,this},Tn.prototype.clear=function(){this.__data__=[],this.size=0},Tn.prototype.delete=function(e){var t=this.__data__,n=Hn(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ze.call(t,n,1),--this.size,!0)},Tn.prototype.get=function(e){var t=this.__data__,n=Hn(t,e);return n<0?void 0:t[n][1]},Tn.prototype.has=function(e){return Hn(this.__data__,e)>-1},Tn.prototype.set=function(e,t){var n=this.__data__,r=Hn(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Bn.prototype.clear=function(){this.size=0,this.__data__={hash:new Ln,map:new(pn||Tn),string:new Ln}},Bn.prototype.delete=function(e){var t=Qo(this,e).delete(e);return this.size-=t?1:0,t},Bn.prototype.get=function(e){return Qo(this,e).get(e)},Bn.prototype.has=function(e){return Qo(this,e).has(e)},Bn.prototype.set=function(e,t){var n=Qo(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},zn.prototype.add=zn.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},zn.prototype.has=function(e){return this.__data__.has(e)},Dn.prototype.clear=function(){this.__data__=new Tn,this.size=0},Dn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Dn.prototype.get=function(e){return this.__data__.get(e)},Dn.prototype.has=function(e){return this.__data__.has(e)},Dn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Tn){var r=n.__data__;if(!pn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Bn(r)}return n.set(e,t),this.size=n.size,this};var tr=_o(sr),nr=_o(lr,!0);function rr(e,t){var n=!0;return tr(e,(function(e,r,o){return n=!!t(e,r,o)})),n}function or(e,t,n){for(var r=-1,o=e.length;++r<o;){var i=e[r],a=t(i);if(null!=a&&(void 0===c?a==a&&!Xa(a):n(a,c)))var c=a,u=i}return u}function ir(e,t){var n=[];return tr(e,(function(e,r,o){t(e,r,o)&&n.push(e)})),n}function ar(e,t,n,r,o){var i=-1,a=e.length;for(n||(n=ci),o||(o=[]);++i<a;){var c=e[i];t>0&&n(c)?t>1?ar(c,t-1,n,r,o):pt(o,c):r||(o[o.length]=c)}return o}var cr=wo(),ur=wo(!0);function sr(e,t){return e&&cr(e,t,Oc)}function lr(e,t){return e&&ur(e,t,Oc)}function fr(e,t){return lt(t,(function(t){return Fa(e[t])}))}function mr(e,t){for(var n=0,r=(t=uo(t,e)).length;null!=e&&n<r;)e=e[Ii(t[n++])];return n&&n==r?e:void 0}function dr(e,t,n){var r=t(e);return La(e)?r:pt(r,n(e))}function pr(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Xe&&Xe in pe(e)?function(e){var t=_e.call(e,Xe),n=e[Xe];try{e[Xe]=void 0;var r=!0}catch(e){}var o=ke.call(e);r&&(t?e[Xe]=n:delete e[Xe]);return o}(e):function(e){return ke.call(e)}(e)}function hr(e,t){return e>t}function vr(e,t){return null!=e&&_e.call(e,t)}function br(e,t){return null!=e&&t in pe(e)}function gr(e,t,n){for(var o=n?mt:ft,i=e[0].length,a=e.length,c=a,u=r(a),s=1/0,l=[];c--;){var f=e[c];c&&t&&(f=dt(f,xt(t))),s=un(f.length,s),u[c]=!n&&(t||i>=120&&f.length>=120)?new zn(c&&f):void 0}f=e[0];var m=-1,d=u[0];e:for(;++m<i&&l.length<s;){var p=f[m],h=t?t(p):p;if(p=n||0!==p?p:0,!(d?At(d,h):o(l,h,n))){for(c=a;--c;){var v=u[c];if(!(v?At(v,h):o(e[c],h,n)))continue e}d&&d.push(h),l.push(p)}}return l}function Cr(e,t,n){var r=null==(e=bi(e,t=uo(t,e)))?e:e[Ii(Vi(t))];return null==r?void 0:it(r,e,n)}function yr(e){return Ha(e)&&pr(e)==u}function Or(e,t,n,r,o){return e===t||(null==e||null==t||!Ha(e)&&!Ha(t)?e!=e&&t!=t:function(e,t,n,r,o,i){var a=La(e),c=La(t),d=a?s:oi(e),p=c?s:oi(t),j=(d=d==u?b:d)==b,R=(p=p==u?b:p)==b,k=d==p;if(k&&Da(e)){if(!Da(t))return!1;a=!0,j=!1}if(k&&!j)return i||(i=new Dn),a||Qa(e)?Ho(e,t,n,r,o,i):function(e,t,n,r,o,i,a){switch(n){case w:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case _:return!(e.byteLength!=t.byteLength||!i(new Le(e),new Le(t)));case l:case f:case v:return Pa(+e,+t);case m:return e.name==t.name&&e.message==t.message;case g:case y:return e==t+"";case h:var c=Ft;case C:var u=1&r;if(c||(c=Wt),e.size!=t.size&&!u)return!1;var s=a.get(e);if(s)return s==t;r|=2,a.set(e,t);var d=Ho(c(e),c(t),r,o,i,a);return a.delete(e),d;case O:if(In)return In.call(e)==In.call(t)}return!1}(e,t,d,n,r,o,i);if(!(1&n)){var I=j&&_e.call(e,"__wrapped__"),N=R&&_e.call(t,"__wrapped__");if(I||N){var S=I?e.value():e,P=N?t.value():t;return i||(i=new Dn),o(S,P,n,r,i)}}if(!k)return!1;return i||(i=new Dn),function(e,t,n,r,o,i){var a=1&n,c=$o(e),u=c.length,s=$o(t).length;if(u!=s&&!a)return!1;var l=u;for(;l--;){var f=c[l];if(!(a?f in t:_e.call(t,f)))return!1}var m=i.get(e),d=i.get(t);if(m&&d)return m==t&&d==e;var p=!0;i.set(e,t),i.set(t,e);var h=a;for(;++l<u;){f=c[l];var v=e[f],b=t[f];if(r)var g=a?r(b,v,f,t,e,i):r(v,b,f,e,t,i);if(!(void 0===g?v===b||o(v,b,n,r,i):g)){p=!1;break}h||(h="constructor"==f)}if(p&&!h){var C=e.constructor,y=t.constructor;C==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof C&&C instanceof C&&"function"==typeof y&&y instanceof y||(p=!1)}return i.delete(e),i.delete(t),p}(e,t,n,r,o,i)}(e,t,n,r,Or,o))}function jr(e,t,n,r){var o=n.length,i=o,a=!r;if(null==e)return!i;for(e=pe(e);o--;){var c=n[o];if(a&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++o<i;){var u=(c=n[o])[0],s=e[u],l=c[1];if(a&&c[2]){if(void 0===s&&!(u in e))return!1}else{var f=new Dn;if(r)var m=r(s,l,u,e,t,f);if(!(void 0===m?Or(l,s,3,r,f):m))return!1}}return!0}function _r(e){return!(!Wa(e)||(t=e,Re&&Re in t))&&(Fa(e)?Se:ae).test(Ni(e));var t}function wr(e){return"function"==typeof e?e:null==e?$c:"object"==typeof e?La(e)?Pr(e[0],e[1]):Sr(e):nu(e)}function Rr(e){if(!di(e))return an(e);var t=[];for(var n in pe(e))_e.call(e,n)&&"constructor"!=n&&t.push(n);return t}function kr(e){if(!Wa(e))return function(e){var t=[];if(null!=e)for(var n in pe(e))t.push(n);return t}(e);var t=di(e),n=[];for(var r in e)("constructor"!=r||!t&&_e.call(e,r))&&n.push(r);return n}function Ir(e,t){return e<t}function Nr(e,t){var n=-1,o=Ba(e)?r(e.length):[];return tr(e,(function(e,r,i){o[++n]=t(e,r,i)})),o}function Sr(e){var t=ei(e);return 1==t.length&&t[0][2]?hi(t[0][0],t[0][1]):function(n){return n===e||jr(n,e,t)}}function Pr(e,t){return li(e)&&pi(t)?hi(Ii(e),t):function(n){var r=vc(n,e);return void 0===r&&r===t?bc(n,e):Or(t,r,3)}}function xr(e,t,n,r,o){e!==t&&cr(t,(function(i,a){if(o||(o=new Dn),Wa(i))!function(e,t,n,r,o,i,a){var c=Ci(e,n),u=Ci(t,n),s=a.get(u);if(s)return void Un(e,n,s);var l=i?i(c,u,n+"",e,t,a):void 0,f=void 0===l;if(f){var m=La(u),d=!m&&Da(u),p=!m&&!d&&Qa(u);l=u,m||d||p?La(c)?l=c:za(c)?l=Co(c):d?(f=!1,l=mo(u,!0)):p?(f=!1,l=ho(u,!0)):l=[]:Za(u)||Aa(u)?(l=c,Aa(c)?l=cc(c):Wa(c)&&!Fa(c)||(l=ai(u))):f=!1}f&&(a.set(u,l),o(l,u,r,i,a),a.delete(u));Un(e,n,l)}(e,t,a,n,xr,r,o);else{var c=r?r(Ci(e,a),i,a+"",e,t,o):void 0;void 0===c&&(c=i),Un(e,a,c)}}),jc)}function Er(e,t){var n=e.length;if(n)return ui(t+=t<0?n:0,n)?e[t]:void 0}function Ar(e,t,n){t=t.length?dt(t,(function(e){return La(e)?function(t){return mr(t,1===e.length?e[0]:e)}:e})):[$c];var r=-1;return t=dt(t,xt(Xo())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(Nr(e,(function(e,n,o){return{criteria:dt(t,(function(t){return t(e)})),index:++r,value:e}})),(function(e,t){return function(e,t,n){var r=-1,o=e.criteria,i=t.criteria,a=o.length,c=n.length;for(;++r<a;){var u=vo(o[r],i[r]);if(u){if(r>=c)return u;var s=n[r];return u*("desc"==s?-1:1)}}return e.index-t.index}(e,t,n)}))}function Lr(e,t,n){for(var r=-1,o=t.length,i={};++r<o;){var a=t[r],c=mr(e,a);n(c,a)&&qr(i,uo(a,e),c)}return i}function Tr(e,t,n,r){var o=r?jt:Ot,i=-1,a=t.length,c=e;for(e===t&&(t=Co(t)),n&&(c=dt(e,xt(n)));++i<a;)for(var u=0,s=t[i],l=n?n(s):s;(u=o(c,l,u,r))>-1;)c!==e&&Ze.call(c,u,1),Ze.call(e,u,1);return e}function Br(e,t){for(var n=e?t.length:0,r=n-1;n--;){var o=t[n];if(n==r||o!==i){var i=o;ui(o)?Ze.call(e,o,1):eo(e,o)}}return e}function zr(e,t){return e+en(fn()*(t-e+1))}function Dr(e,t){var n="";if(!e||t<1||t>9007199254740991)return n;do{t%2&&(n+=e),(t=en(t/2))&&(e+=e)}while(t);return n}function Mr(e,t){return ji(vi(e,t,$c),e+"")}function Vr(e){return Vn(Pc(e))}function Fr(e,t){var n=Pc(e);return Ri(n,Yn(t,0,n.length))}function qr(e,t,n,r){if(!Wa(e))return e;for(var o=-1,i=(t=uo(t,e)).length,a=i-1,c=e;null!=c&&++o<i;){var u=Ii(t[o]),s=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(o!=a){var l=c[u];void 0===(s=r?r(l,u,c):void 0)&&(s=Wa(l)?l:ui(t[o+1])?[]:{})}Wn(c,u,s),c=c[u]}return e}var Ur=Cn?function(e,t){return Cn.set(e,t),e}:$c,Wr=gt?function(e,t){return gt(e,"toString",{configurable:!0,enumerable:!1,value:Wc(t),writable:!0})}:$c;function Hr(e){return Ri(Pc(e))}function Gr(e,t,n){var o=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var a=r(i);++o<i;)a[o]=e[o+t];return a}function $r(e,t){var n;return tr(e,(function(e,r,o){return!(n=t(e,r,o))})),!!n}function Zr(e,t,n){var r=0,o=null==e?r:e.length;if("number"==typeof t&&t==t&&o<=2147483647){for(;r<o;){var i=r+o>>>1,a=e[i];null!==a&&!Xa(a)&&(n?a<=t:a<t)?r=i+1:o=i}return o}return Kr(e,t,$c,n)}function Kr(e,t,n,r){var o=0,i=null==e?0:e.length;if(0===i)return 0;for(var a=(t=n(t))!=t,c=null===t,u=Xa(t),s=void 0===t;o<i;){var l=en((o+i)/2),f=n(e[l]),m=void 0!==f,d=null===f,p=f==f,h=Xa(f);if(a)var v=r||p;else v=s?p&&(r||m):c?p&&m&&(r||!d):u?p&&m&&!d&&(r||!h):!d&&!h&&(r?f<=t:f<t);v?o=l+1:i=l}return un(i,4294967294)}function Yr(e,t){for(var n=-1,r=e.length,o=0,i=[];++n<r;){var a=e[n],c=t?t(a):a;if(!n||!Pa(c,u)){var u=c;i[o++]=0===a?0:a}}return i}function Jr(e){return"number"==typeof e?e:Xa(e)?NaN:+e}function Xr(e){if("string"==typeof e)return e;if(La(e))return dt(e,Xr)+"";if(Xa(e))return Nn?Nn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Qr(e,t,n){var r=-1,o=ft,i=e.length,a=!0,c=[],u=c;if(n)a=!1,o=mt;else if(i>=200){var s=t?null:Mo(e);if(s)return Wt(s);a=!1,o=At,u=new zn}else u=t?[]:c;e:for(;++r<i;){var l=e[r],f=t?t(l):l;if(l=n||0!==l?l:0,a&&f==f){for(var m=u.length;m--;)if(u[m]===f)continue e;t&&u.push(f),c.push(l)}else o(u,f,n)||(u!==c&&u.push(f),c.push(l))}return c}function eo(e,t){return null==(e=bi(e,t=uo(t,e)))||delete e[Ii(Vi(t))]}function to(e,t,n,r){return qr(e,t,n(mr(e,t)),r)}function no(e,t,n,r){for(var o=e.length,i=r?o:-1;(r?i--:++i<o)&&t(e[i],i,e););return n?Gr(e,r?0:i,r?i+1:o):Gr(e,r?i+1:0,r?o:i)}function ro(e,t){var n=e;return n instanceof An&&(n=n.value()),ht(t,(function(e,t){return t.func.apply(t.thisArg,pt([e],t.args))}),n)}function oo(e,t,n){var o=e.length;if(o<2)return o?Qr(e[0]):[];for(var i=-1,a=r(o);++i<o;)for(var c=e[i],u=-1;++u<o;)u!=i&&(a[i]=er(a[i]||c,e[u],t,n));return Qr(ar(a,1),t,n)}function io(e,t,n){for(var r=-1,o=e.length,i=t.length,a={};++r<o;){var c=r<i?t[r]:void 0;n(a,e[r],c)}return a}function ao(e){return za(e)?e:[]}function co(e){return"function"==typeof e?e:$c}function uo(e,t){return La(e)?e:li(e,t)?[e]:ki(uc(e))}var so=Mr;function lo(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:Gr(e,t,n)}var fo=kt||function(e){return $e.clearTimeout(e)};function mo(e,t){if(t)return e.slice();var n=e.length,r=Be?Be(n):new e.constructor(n);return e.copy(r),r}function po(e){var t=new e.constructor(e.byteLength);return new Le(t).set(new Le(e)),t}function ho(e,t){var n=t?po(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function vo(e,t){if(e!==t){var n=void 0!==e,r=null===e,o=e==e,i=Xa(e),a=void 0!==t,c=null===t,u=t==t,s=Xa(t);if(!c&&!s&&!i&&e>t||i&&a&&u&&!c&&!s||r&&a&&u||!n&&u||!o)return 1;if(!r&&!i&&!s&&e<t||s&&n&&o&&!r&&!i||c&&n&&o||!a&&o||!u)return-1}return 0}function bo(e,t,n,o){for(var i=-1,a=e.length,c=n.length,u=-1,s=t.length,l=cn(a-c,0),f=r(s+l),m=!o;++u<s;)f[u]=t[u];for(;++i<c;)(m||i<a)&&(f[n[i]]=e[i]);for(;l--;)f[u++]=e[i++];return f}function go(e,t,n,o){for(var i=-1,a=e.length,c=-1,u=n.length,s=-1,l=t.length,f=cn(a-u,0),m=r(f+l),d=!o;++i<f;)m[i]=e[i];for(var p=i;++s<l;)m[p+s]=t[s];for(;++c<u;)(d||i<a)&&(m[p+n[c]]=e[i++]);return m}function Co(e,t){var n=-1,o=e.length;for(t||(t=r(o));++n<o;)t[n]=e[n];return t}function yo(e,t,n,r){var o=!n;n||(n={});for(var i=-1,a=t.length;++i<a;){var c=t[i],u=r?r(n[c],e[c],c,n,e):void 0;void 0===u&&(u=e[c]),o?Zn(n,c,u):Wn(n,c,u)}return n}function Oo(e,t){return function(n,r){var o=La(n)?at:Gn,i=t?t():{};return o(n,e,Xo(r,2),i)}}function jo(e){return Mr((function(t,n){var r=-1,o=n.length,i=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,a&&si(n[0],n[1],a)&&(i=o<3?void 0:i,o=1),t=pe(t);++r<o;){var c=n[r];c&&e(t,c,r,i)}return t}))}function _o(e,t){return function(n,r){if(null==n)return n;if(!Ba(n))return e(n,r);for(var o=n.length,i=t?o:-1,a=pe(n);(t?i--:++i<o)&&!1!==r(a[i],i,a););return n}}function wo(e){return function(t,n,r){for(var o=-1,i=pe(t),a=r(t),c=a.length;c--;){var u=a[e?c:++o];if(!1===n(i[u],u,i))break}return t}}function Ro(e){return function(t){var n=Vt(t=uc(t))?$t(t):void 0,r=n?n[0]:t.charAt(0),o=n?lo(n,1).join(""):t.slice(1);return r[e]()+o}}function ko(e){return function(t){return ht(Fc(Ac(t).replace(Ee,"")),e,"")}}function Io(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Pn(e.prototype),r=e.apply(n,t);return Wa(r)?r:n}}function No(e){return function(t,n,r){var o=pe(t);if(!Ba(t)){var i=Xo(n,3);t=Oc(t),n=function(e){return i(o[e],e,o)}}var a=e(t,n,r);return a>-1?o[i?t[a]:a]:void 0}}function So(e){return Go((function(t){var n=t.length,r=n,o=En.prototype.thru;for(e&&t.reverse();r--;){var a=t[r];if("function"!=typeof a)throw new be(i);if(o&&!c&&"wrapper"==Yo(a))var c=new En([],!0)}for(r=c?r:n;++r<n;){var u=Yo(a=t[r]),s="wrapper"==u?Ko(a):void 0;c=s&&fi(s[0])&&424==s[1]&&!s[4].length&&1==s[9]?c[Yo(s[0])].apply(c,s[3]):1==a.length&&fi(a)?c[u]():c.thru(a)}return function(){var e=arguments,r=e[0];if(c&&1==e.length&&La(r))return c.plant(r).value();for(var o=0,i=n?t[o].apply(this,e):r;++o<n;)i=t[o].call(this,i);return i}}))}function Po(e,t,n,o,i,a,c,u,s,l){var f=128&t,m=1&t,d=2&t,p=24&t,h=512&t,v=d?void 0:Io(e);return function b(){for(var g=arguments.length,C=r(g),y=g;y--;)C[y]=arguments[y];if(p)var O=Jo(b),j=Bt(C,O);if(o&&(C=bo(C,o,i,p)),a&&(C=go(C,a,c,p)),g-=j,p&&g<l){var _=Ut(C,O);return zo(e,t,Po,b.placeholder,n,C,_,u,s,l-g)}var w=m?n:this,R=d?w[e]:e;return g=C.length,u?C=gi(C,u):h&&g>1&&C.reverse(),f&&s<g&&(C.length=s),this&&this!==$e&&this instanceof b&&(R=v||Io(R)),R.apply(w,C)}}function xo(e,t){return function(n,r){return function(e,t,n,r){return sr(e,(function(e,o,i){t(r,n(e),o,i)})),r}(n,e,t(r),{})}}function Eo(e,t){return function(n,r){var o;if(void 0===n&&void 0===r)return t;if(void 0!==n&&(o=n),void 0!==r){if(void 0===o)return r;"string"==typeof n||"string"==typeof r?(n=Xr(n),r=Xr(r)):(n=Jr(n),r=Jr(r)),o=e(n,r)}return o}}function Ao(e){return Go((function(t){return t=dt(t,xt(Xo())),Mr((function(n){var r=this;return e(t,(function(e){return it(e,r,n)}))}))}))}function Lo(e,t){var n=(t=void 0===t?" ":Xr(t)).length;if(n<2)return n?Dr(t,e):t;var r=Dr(t,Qt(e/Gt(t)));return Vt(t)?lo($t(r),0,e).join(""):r.slice(0,e)}function To(e){return function(t,n,o){return o&&"number"!=typeof o&&si(t,n,o)&&(n=o=void 0),t=rc(t),void 0===n?(n=t,t=0):n=rc(n),function(e,t,n,o){for(var i=-1,a=cn(Qt((t-e)/(n||1)),0),c=r(a);a--;)c[o?a:++i]=e,e+=n;return c}(t,n,o=void 0===o?t<n?1:-1:rc(o),e)}}function Bo(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=ac(t),n=ac(n)),e(t,n)}}function zo(e,t,n,r,o,i,a,c,u,s){var l=8&t;t|=l?32:64,4&(t&=~(l?64:32))||(t&=-4);var f=[e,t,o,l?i:void 0,l?a:void 0,l?void 0:i,l?void 0:a,c,u,s],m=n.apply(void 0,f);return fi(e)&&yi(m,f),m.placeholder=r,_i(m,e,t)}function Do(e){var t=de[e];return function(e,n){if(e=ac(e),(n=null==n?0:un(oc(n),292))&&rn(e)){var r=(uc(e)+"e").split("e");return+((r=(uc(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Mo=vn&&1/Wt(new vn([,-0]))[1]==1/0?function(e){return new vn(e)}:Xc;function Vo(e){return function(t){var n=oi(t);return n==h?Ft(t):n==C?Ht(t):function(e,t){return dt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Fo(e,t,n,o,c,u,s,l){var f=2&t;if(!f&&"function"!=typeof e)throw new be(i);var m=o?o.length:0;if(m||(t&=-97,o=c=void 0),s=void 0===s?s:cn(oc(s),0),l=void 0===l?l:oc(l),m-=c?c.length:0,64&t){var d=o,p=c;o=c=void 0}var h=f?void 0:Ko(e),v=[e,t,n,o,c,d,p,u,s,l];if(h&&function(e,t){var n=e[1],r=t[1],o=n|r,i=o<131,c=128==r&&8==n||128==r&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!i&&!c)return e;1&r&&(e[2]=t[2],o|=1&n?0:4);var u=t[3];if(u){var s=e[3];e[3]=s?bo(s,u,t[4]):u,e[4]=s?Ut(e[3],a):t[4]}(u=t[5])&&(s=e[5],e[5]=s?go(s,u,t[6]):u,e[6]=s?Ut(e[5],a):t[6]);(u=t[7])&&(e[7]=u);128&r&&(e[8]=null==e[8]?t[8]:un(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=o}(v,h),e=v[0],t=v[1],n=v[2],o=v[3],c=v[4],!(l=v[9]=void 0===v[9]?f?0:e.length:cn(v[9]-m,0))&&24&t&&(t&=-25),t&&1!=t)b=8==t||16==t?function(e,t,n){var o=Io(e);return function i(){for(var a=arguments.length,c=r(a),u=a,s=Jo(i);u--;)c[u]=arguments[u];var l=a<3&&c[0]!==s&&c[a-1]!==s?[]:Ut(c,s);if((a-=l.length)<n)return zo(e,t,Po,i.placeholder,void 0,c,l,void 0,void 0,n-a);var f=this&&this!==$e&&this instanceof i?o:e;return it(f,this,c)}}(e,t,l):32!=t&&33!=t||c.length?Po.apply(void 0,v):function(e,t,n,o){var i=1&t,a=Io(e);return function t(){for(var c=-1,u=arguments.length,s=-1,l=o.length,f=r(l+u),m=this&&this!==$e&&this instanceof t?a:e;++s<l;)f[s]=o[s];for(;u--;)f[s++]=arguments[++c];return it(m,i?n:this,f)}}(e,t,n,o);else var b=function(e,t,n){var r=1&t,o=Io(e);return function t(){var i=this&&this!==$e&&this instanceof t?o:e;return i.apply(r?n:this,arguments)}}(e,t,n);return _i((h?Ur:yi)(b,v),e,t)}function qo(e,t,n,r){return void 0===e||Pa(e,ye[n])&&!_e.call(r,n)?t:e}function Uo(e,t,n,r,o,i){return Wa(e)&&Wa(t)&&(i.set(t,e),xr(e,t,void 0,Uo,i),i.delete(t)),e}function Wo(e){return Za(e)?void 0:e}function Ho(e,t,n,r,o,i){var a=1&n,c=e.length,u=t.length;if(c!=u&&!(a&&u>c))return!1;var s=i.get(e),l=i.get(t);if(s&&l)return s==t&&l==e;var f=-1,m=!0,d=2&n?new zn:void 0;for(i.set(e,t),i.set(t,e);++f<c;){var p=e[f],h=t[f];if(r)var v=a?r(h,p,f,t,e,i):r(p,h,f,e,t,i);if(void 0!==v){if(v)continue;m=!1;break}if(d){if(!bt(t,(function(e,t){if(!At(d,t)&&(p===e||o(p,e,n,r,i)))return d.push(t)}))){m=!1;break}}else if(p!==h&&!o(p,h,n,r,i)){m=!1;break}}return i.delete(e),i.delete(t),m}function Go(e){return ji(vi(e,void 0,Ti),e+"")}function $o(e){return dr(e,Oc,ni)}function Zo(e){return dr(e,jc,ri)}var Ko=Cn?function(e){return Cn.get(e)}:Xc;function Yo(e){for(var t=e.name+"",n=yn[t],r=_e.call(yn,t)?n.length:0;r--;){var o=n[r],i=o.func;if(null==i||i==e)return o.name}return t}function Jo(e){return(_e.call(Sn,"placeholder")?Sn:e).placeholder}function Xo(){var e=Sn.iteratee||Zc;return e=e===Zc?wr:e,arguments.length?e(arguments[0],arguments[1]):e}function Qo(e,t){var n,r,o=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function ei(e){for(var t=Oc(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,pi(o)]}return t}function ti(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return _r(n)?n:void 0}var ni=tn?function(e){return null==e?[]:(e=pe(e),lt(tn(e),(function(t){return Ge.call(e,t)})))}:iu,ri=tn?function(e){for(var t=[];e;)pt(t,ni(e)),e=qe(e);return t}:iu,oi=pr;function ii(e,t,n){for(var r=-1,o=(t=uo(t,e)).length,i=!1;++r<o;){var a=Ii(t[r]);if(!(i=null!=e&&n(e,a)))break;e=e[a]}return i||++r!=o?i:!!(o=null==e?0:e.length)&&Ua(o)&&ui(a,o)&&(La(e)||Aa(e))}function ai(e){return"function"!=typeof e.constructor||di(e)?{}:Pn(qe(e))}function ci(e){return La(e)||Aa(e)||!!(Ke&&e&&e[Ke])}function ui(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&ue.test(e))&&e>-1&&e%1==0&&e<t}function si(e,t,n){if(!Wa(n))return!1;var r=typeof t;return!!("number"==r?Ba(n)&&ui(t,n.length):"string"==r&&t in n)&&Pa(n[t],e)}function li(e,t){if(La(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Xa(e))||(W.test(e)||!U.test(e)||null!=t&&e in pe(t))}function fi(e){var t=Yo(e),n=Sn[t];if("function"!=typeof n||!(t in An.prototype))return!1;if(e===n)return!0;var r=Ko(n);return!!r&&e===r[0]}(dn&&oi(new dn(new ArrayBuffer(1)))!=w||pn&&oi(new pn)!=h||hn&&"[object Promise]"!=oi(hn.resolve())||vn&&oi(new vn)!=C||bn&&oi(new bn)!=j)&&(oi=function(e){var t=pr(e),n=t==b?e.constructor:void 0,r=n?Ni(n):"";if(r)switch(r){case On:return w;case jn:return h;case _n:return"[object Promise]";case wn:return C;case Rn:return j}return t});var mi=Oe?Fa:au;function di(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ye)}function pi(e){return e==e&&!Wa(e)}function hi(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in pe(n)))}}function vi(e,t,n){return t=cn(void 0===t?e.length-1:t,0),function(){for(var o=arguments,i=-1,a=cn(o.length-t,0),c=r(a);++i<a;)c[i]=o[t+i];i=-1;for(var u=r(t+1);++i<t;)u[i]=o[i];return u[t]=n(c),it(e,this,u)}}function bi(e,t){return t.length<2?e:mr(e,Gr(t,0,-1))}function gi(e,t){for(var n=e.length,r=un(t.length,n),o=Co(e);r--;){var i=t[r];e[r]=ui(i,n)?o[i]:void 0}return e}function Ci(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var yi=wi(Ur),Oi=Xt||function(e,t){return $e.setTimeout(e,t)},ji=wi(Wr);function _i(e,t,n){var r=t+"";return ji(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Y,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return ct(c,(function(n){var r="_."+n[0];t&n[1]&&!ft(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(J);return t?t[1].split(X):[]}(r),n)))}function wi(e){var t=0,n=0;return function(){var r=sn(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function Ri(e,t){var n=-1,r=e.length,o=r-1;for(t=void 0===t?r:t;++n<t;){var i=zr(n,o),a=e[i];e[i]=e[n],e[n]=a}return e.length=t,e}var ki=function(e){var t=wa(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(H,(function(e,n,r,o){t.push(r?o.replace(te,"$1"):n||e)})),t}));function Ii(e){if("string"==typeof e||Xa(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Ni(e){if(null!=e){try{return je.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Si(e){if(e instanceof An)return e.clone();var t=new En(e.__wrapped__,e.__chain__);return t.__actions__=Co(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Pi=Mr((function(e,t){return za(e)?er(e,ar(t,1,za,!0)):[]})),xi=Mr((function(e,t){var n=Vi(t);return za(n)&&(n=void 0),za(e)?er(e,ar(t,1,za,!0),Xo(n,2)):[]})),Ei=Mr((function(e,t){var n=Vi(t);return za(n)&&(n=void 0),za(e)?er(e,ar(t,1,za,!0),void 0,n):[]}));function Ai(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=null==n?0:oc(n);return o<0&&(o=cn(r+o,0)),yt(e,Xo(t,3),o)}function Li(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r-1;return void 0!==n&&(o=oc(n),o=n<0?cn(r+o,0):un(o,r-1)),yt(e,Xo(t,3),o,!0)}function Ti(e){return(null==e?0:e.length)?ar(e,1):[]}function Bi(e){return e&&e.length?e[0]:void 0}var zi=Mr((function(e){var t=dt(e,ao);return t.length&&t[0]===e[0]?gr(t):[]})),Di=Mr((function(e){var t=Vi(e),n=dt(e,ao);return t===Vi(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?gr(n,Xo(t,2)):[]})),Mi=Mr((function(e){var t=Vi(e),n=dt(e,ao);return(t="function"==typeof t?t:void 0)&&n.pop(),n.length&&n[0]===e[0]?gr(n,void 0,t):[]}));function Vi(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var Fi=Mr(qi);function qi(e,t){return e&&e.length&&t&&t.length?Tr(e,t):e}var Ui=Go((function(e,t){var n=null==e?0:e.length,r=Kn(e,t);return Br(e,dt(t,(function(e){return ui(e,n)?+e:e})).sort(vo)),r}));function Wi(e){return null==e?e:mn.call(e)}var Hi=Mr((function(e){return Qr(ar(e,1,za,!0))})),Gi=Mr((function(e){var t=Vi(e);return za(t)&&(t=void 0),Qr(ar(e,1,za,!0),Xo(t,2))})),$i=Mr((function(e){var t=Vi(e);return t="function"==typeof t?t:void 0,Qr(ar(e,1,za,!0),void 0,t)}));function Zi(e){if(!e||!e.length)return[];var t=0;return e=lt(e,(function(e){if(za(e))return t=cn(e.length,t),!0})),St(t,(function(t){return dt(e,Rt(t))}))}function Ki(e,t){if(!e||!e.length)return[];var n=Zi(e);return null==t?n:dt(n,(function(e){return it(t,void 0,e)}))}var Yi=Mr((function(e,t){return za(e)?er(e,t):[]})),Ji=Mr((function(e){return oo(lt(e,za))})),Xi=Mr((function(e){var t=Vi(e);return za(t)&&(t=void 0),oo(lt(e,za),Xo(t,2))})),Qi=Mr((function(e){var t=Vi(e);return t="function"==typeof t?t:void 0,oo(lt(e,za),void 0,t)})),ea=Mr(Zi);var ta=Mr((function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n="function"==typeof n?(e.pop(),n):void 0,Ki(e,n)}));function na(e){var t=Sn(e);return t.__chain__=!0,t}function ra(e,t){return t(e)}var oa=Go((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,o=function(t){return Kn(t,e)};return!(t>1||this.__actions__.length)&&r instanceof An&&ui(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:ra,args:[o],thisArg:void 0}),new En(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(void 0),e}))):this.thru(o)}));var ia=Oo((function(e,t,n){_e.call(e,n)?++e[n]:Zn(e,n,1)}));var aa=No(Ai),ca=No(Li);function ua(e,t){return(La(e)?ct:tr)(e,Xo(t,3))}function sa(e,t){return(La(e)?ut:nr)(e,Xo(t,3))}var la=Oo((function(e,t,n){_e.call(e,n)?e[n].push(t):Zn(e,n,[t])}));var fa=Mr((function(e,t,n){var o=-1,i="function"==typeof t,a=Ba(e)?r(e.length):[];return tr(e,(function(e){a[++o]=i?it(t,e,n):Cr(e,t,n)})),a})),ma=Oo((function(e,t,n){Zn(e,n,t)}));function da(e,t){return(La(e)?dt:Nr)(e,Xo(t,3))}var pa=Oo((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var ha=Mr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&si(e,t[0],t[1])?t=[]:n>2&&si(t[0],t[1],t[2])&&(t=[t[0]]),Ar(e,ar(t,1),[])})),va=Jt||function(){return $e.Date.now()};function ba(e,t,n){return t=n?void 0:t,Fo(e,128,void 0,void 0,void 0,void 0,t=e&&null==t?e.length:t)}function ga(e,t){var n;if("function"!=typeof t)throw new be(i);return e=oc(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}var Ca=Mr((function(e,t,n){var r=1;if(n.length){var o=Ut(n,Jo(Ca));r|=32}return Fo(e,r,t,n,o)})),ya=Mr((function(e,t,n){var r=3;if(n.length){var o=Ut(n,Jo(ya));r|=32}return Fo(t,r,e,n,o)}));function Oa(e,t,n){var r,o,a,c,u,s,l=0,f=!1,m=!1,d=!0;if("function"!=typeof e)throw new be(i);function p(t){var n=r,i=o;return r=o=void 0,l=t,c=e.apply(i,n)}function h(e){return l=e,u=Oi(b,t),f?p(e):c}function v(e){var n=e-s;return void 0===s||n>=t||n<0||m&&e-l>=a}function b(){var e=va();if(v(e))return g(e);u=Oi(b,function(e){var n=t-(e-s);return m?un(n,a-(e-l)):n}(e))}function g(e){return u=void 0,d&&r?p(e):(r=o=void 0,c)}function C(){var e=va(),n=v(e);if(r=arguments,o=this,s=e,n){if(void 0===u)return h(s);if(m)return fo(u),u=Oi(b,t),p(s)}return void 0===u&&(u=Oi(b,t)),c}return t=ac(t)||0,Wa(n)&&(f=!!n.leading,a=(m="maxWait"in n)?cn(ac(n.maxWait)||0,t):a,d="trailing"in n?!!n.trailing:d),C.cancel=function(){void 0!==u&&fo(u),l=0,r=s=o=u=void 0},C.flush=function(){return void 0===u?c:g(va())},C}var ja=Mr((function(e,t){return Qn(e,1,t)})),_a=Mr((function(e,t,n){return Qn(e,ac(t)||0,n)}));function wa(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new be(i);var n=function n(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(wa.Cache||Bn),n}function Ra(e){if("function"!=typeof e)throw new be(i);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}wa.Cache=Bn;var ka=so((function(e,t){var n=(t=1==t.length&&La(t[0])?dt(t[0],xt(Xo())):dt(ar(t,1),xt(Xo()))).length;return Mr((function(r){for(var o=-1,i=un(r.length,n);++o<i;)r[o]=t[o].call(this,r[o]);return it(e,this,r)}))})),Ia=Mr((function(e,t){return Fo(e,32,void 0,t,Ut(t,Jo(Ia)))})),Na=Mr((function(e,t){return Fo(e,64,void 0,t,Ut(t,Jo(Na)))})),Sa=Go((function(e,t){return Fo(e,256,void 0,void 0,void 0,t)}));function Pa(e,t){return e===t||e!=e&&t!=t}var xa=Bo(hr),Ea=Bo((function(e,t){return e>=t})),Aa=yr(function(){return arguments}())?yr:function(e){return Ha(e)&&_e.call(e,"callee")&&!Ge.call(e,"callee")},La=r.isArray,Ta=Qe?xt(Qe):function(e){return Ha(e)&&pr(e)==_};function Ba(e){return null!=e&&Ua(e.length)&&!Fa(e)}function za(e){return Ha(e)&&Ba(e)}var Da=nn||au,Ma=et?xt(et):function(e){return Ha(e)&&pr(e)==f};function Va(e){if(!Ha(e))return!1;var t=pr(e);return t==m||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!Za(e)}function Fa(e){if(!Wa(e))return!1;var t=pr(e);return t==d||t==p||"[object AsyncFunction]"==t||"[object Proxy]"==t}function qa(e){return"number"==typeof e&&e==oc(e)}function Ua(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Wa(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ha(e){return null!=e&&"object"==typeof e}var Ga=tt?xt(tt):function(e){return Ha(e)&&oi(e)==h};function $a(e){return"number"==typeof e||Ha(e)&&pr(e)==v}function Za(e){if(!Ha(e)||pr(e)!=b)return!1;var t=qe(e);if(null===t)return!0;var n=_e.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&je.call(n)==Ie}var Ka=nt?xt(nt):function(e){return Ha(e)&&pr(e)==g};var Ya=rt?xt(rt):function(e){return Ha(e)&&oi(e)==C};function Ja(e){return"string"==typeof e||!La(e)&&Ha(e)&&pr(e)==y}function Xa(e){return"symbol"==typeof e||Ha(e)&&pr(e)==O}var Qa=ot?xt(ot):function(e){return Ha(e)&&Ua(e.length)&&!!Ve[pr(e)]};var ec=Bo(Ir),tc=Bo((function(e,t){return e<=t}));function nc(e){if(!e)return[];if(Ba(e))return Ja(e)?$t(e):Co(e);if(Je&&e[Je])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Je]());var t=oi(e);return(t==h?Ft:t==C?Wt:Pc)(e)}function rc(e){return e?(e=ac(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function oc(e){var t=rc(e),n=t%1;return t==t?n?t-n:t:0}function ic(e){return e?Yn(oc(e),0,4294967295):0}function ac(e){if("number"==typeof e)return e;if(Xa(e))return NaN;if(Wa(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Wa(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Pt(e);var n=ie.test(e);return n||ce.test(e)?We(e.slice(2),n?2:8):oe.test(e)?NaN:+e}function cc(e){return yo(e,jc(e))}function uc(e){return null==e?"":Xr(e)}var sc=jo((function(e,t){if(di(t)||Ba(t))yo(t,Oc(t),e);else for(var n in t)_e.call(t,n)&&Wn(e,n,t[n])})),lc=jo((function(e,t){yo(t,jc(t),e)})),fc=jo((function(e,t,n,r){yo(t,jc(t),e,r)})),mc=jo((function(e,t,n,r){yo(t,Oc(t),e,r)})),dc=Go(Kn);var pc=Mr((function(e,t){e=pe(e);var n=-1,r=t.length,o=r>2?t[2]:void 0;for(o&&si(t[0],t[1],o)&&(r=1);++n<r;)for(var i=t[n],a=jc(i),c=-1,u=a.length;++c<u;){var s=a[c],l=e[s];(void 0===l||Pa(l,ye[s])&&!_e.call(e,s))&&(e[s]=i[s])}return e})),hc=Mr((function(e){return e.push(void 0,Uo),it(wc,void 0,e)}));function vc(e,t,n){var r=null==e?void 0:mr(e,t);return void 0===r?n:r}function bc(e,t){return null!=e&&ii(e,t,br)}var gc=xo((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=ke.call(t)),e[t]=n}),Wc($c)),Cc=xo((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=ke.call(t)),_e.call(e,t)?e[t].push(n):e[t]=[n]}),Xo),yc=Mr(Cr);function Oc(e){return Ba(e)?Mn(e):Rr(e)}function jc(e){return Ba(e)?Mn(e,!0):kr(e)}var _c=jo((function(e,t,n){xr(e,t,n)})),wc=jo((function(e,t,n,r){xr(e,t,n,r)})),Rc=Go((function(e,t){var n={};if(null==e)return n;var r=!1;t=dt(t,(function(t){return t=uo(t,e),r||(r=t.length>1),t})),yo(e,Zo(e),n),r&&(n=Jn(n,7,Wo));for(var o=t.length;o--;)eo(n,t[o]);return n}));var kc=Go((function(e,t){return null==e?{}:function(e,t){return Lr(e,t,(function(t,n){return bc(e,n)}))}(e,t)}));function Ic(e,t){if(null==e)return{};var n=dt(Zo(e),(function(e){return[e]}));return t=Xo(t),Lr(e,n,(function(e,n){return t(e,n[0])}))}var Nc=Vo(Oc),Sc=Vo(jc);function Pc(e){return null==e?[]:Et(e,Oc(e))}var xc=ko((function(e,t,n){return t=t.toLowerCase(),e+(n?Ec(t):t)}));function Ec(e){return Vc(uc(e).toLowerCase())}function Ac(e){return(e=uc(e))&&e.replace(se,zt).replace(Ae,"")}var Lc=ko((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Tc=ko((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Bc=Ro("toLowerCase");var zc=ko((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Dc=ko((function(e,t,n){return e+(n?" ":"")+Vc(t)}));var Mc=ko((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Vc=Ro("toUpperCase");function Fc(e,t,n){return e=uc(e),void 0===(t=n?void 0:t)?function(e){return ze.test(e)}(e)?function(e){return e.match(Te)||[]}(e):function(e){return e.match(Q)||[]}(e):e.match(t)||[]}var qc=Mr((function(e,t){try{return it(e,void 0,t)}catch(e){return Va(e)?e:new K(e)}})),Uc=Go((function(e,t){return ct(t,(function(t){t=Ii(t),Zn(e,t,Ca(e[t],e))})),e}));function Wc(e){return function(){return e}}var Hc=So(),Gc=So(!0);function $c(e){return e}function Zc(e){return wr("function"==typeof e?e:Jn(e,1))}var Kc=Mr((function(e,t){return function(n){return Cr(n,e,t)}})),Yc=Mr((function(e,t){return function(n){return Cr(e,n,t)}}));function Jc(e,t,n){var r=Oc(t),o=fr(t,r);null!=n||Wa(t)&&(o.length||!r.length)||(n=t,t=e,e=this,o=fr(t,Oc(t)));var i=!(Wa(n)&&"chain"in n&&!n.chain),a=Fa(e);return ct(o,(function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(i||t){var n=e(this.__wrapped__),o=n.__actions__=Co(this.__actions__);return o.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,pt([this.value()],arguments))})})),e}function Xc(){}var Qc=Ao(dt),eu=Ao(st),tu=Ao(bt);function nu(e){return li(e)?Rt(Ii(e)):function(e){return function(t){return mr(t,e)}}(e)}var ru=To(),ou=To(!0);function iu(){return[]}function au(){return!1}var cu=Eo((function(e,t){return e+t}),0),uu=Do("ceil"),su=Eo((function(e,t){return e/t}),1),lu=Do("floor");var fu,mu=Eo((function(e,t){return e*t}),1),du=Do("round"),pu=Eo((function(e,t){return e-t}),0);return Sn.after=function(e,t){if("function"!=typeof t)throw new be(i);return e=oc(e),function(){if(--e<1)return t.apply(this,arguments)}},Sn.ary=ba,Sn.assign=sc,Sn.assignIn=lc,Sn.assignInWith=fc,Sn.assignWith=mc,Sn.at=dc,Sn.before=ga,Sn.bind=Ca,Sn.bindAll=Uc,Sn.bindKey=ya,Sn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return La(e)?e:[e]},Sn.chain=na,Sn.chunk=function(e,t,n){t=(n?si(e,t,n):void 0===t)?1:cn(oc(t),0);var o=null==e?0:e.length;if(!o||t<1)return[];for(var i=0,a=0,c=r(Qt(o/t));i<o;)c[a++]=Gr(e,i,i+=t);return c},Sn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,o=[];++t<n;){var i=e[t];i&&(o[r++]=i)}return o},Sn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],o=e;o--;)t[o-1]=arguments[o];return pt(La(n)?Co(n):[n],ar(t,1))},Sn.cond=function(e){var t=null==e?0:e.length,n=Xo();return e=t?dt(e,(function(e){if("function"!=typeof e[1])throw new be(i);return[n(e[0]),e[1]]})):[],Mr((function(n){for(var r=-1;++r<t;){var o=e[r];if(it(o[0],this,n))return it(o[1],this,n)}}))},Sn.conforms=function(e){return function(e){var t=Oc(e);return function(n){return Xn(n,e,t)}}(Jn(e,1))},Sn.constant=Wc,Sn.countBy=ia,Sn.create=function(e,t){var n=Pn(e);return null==t?n:$n(n,t)},Sn.curry=function e(t,n,r){var o=Fo(t,8,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return o.placeholder=e.placeholder,o},Sn.curryRight=function e(t,n,r){var o=Fo(t,16,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return o.placeholder=e.placeholder,o},Sn.debounce=Oa,Sn.defaults=pc,Sn.defaultsDeep=hc,Sn.defer=ja,Sn.delay=_a,Sn.difference=Pi,Sn.differenceBy=xi,Sn.differenceWith=Ei,Sn.drop=function(e,t,n){var r=null==e?0:e.length;return r?Gr(e,(t=n||void 0===t?1:oc(t))<0?0:t,r):[]},Sn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?Gr(e,0,(t=r-(t=n||void 0===t?1:oc(t)))<0?0:t):[]},Sn.dropRightWhile=function(e,t){return e&&e.length?no(e,Xo(t,3),!0,!0):[]},Sn.dropWhile=function(e,t){return e&&e.length?no(e,Xo(t,3),!0):[]},Sn.fill=function(e,t,n,r){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&si(e,t,n)&&(n=0,r=o),function(e,t,n,r){var o=e.length;for((n=oc(n))<0&&(n=-n>o?0:o+n),(r=void 0===r||r>o?o:oc(r))<0&&(r+=o),r=n>r?0:ic(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Sn.filter=function(e,t){return(La(e)?lt:ir)(e,Xo(t,3))},Sn.flatMap=function(e,t){return ar(da(e,t),1)},Sn.flatMapDeep=function(e,t){return ar(da(e,t),1/0)},Sn.flatMapDepth=function(e,t,n){return n=void 0===n?1:oc(n),ar(da(e,t),n)},Sn.flatten=Ti,Sn.flattenDeep=function(e){return(null==e?0:e.length)?ar(e,1/0):[]},Sn.flattenDepth=function(e,t){return(null==e?0:e.length)?ar(e,t=void 0===t?1:oc(t)):[]},Sn.flip=function(e){return Fo(e,512)},Sn.flow=Hc,Sn.flowRight=Gc,Sn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var o=e[t];r[o[0]]=o[1]}return r},Sn.functions=function(e){return null==e?[]:fr(e,Oc(e))},Sn.functionsIn=function(e){return null==e?[]:fr(e,jc(e))},Sn.groupBy=la,Sn.initial=function(e){return(null==e?0:e.length)?Gr(e,0,-1):[]},Sn.intersection=zi,Sn.intersectionBy=Di,Sn.intersectionWith=Mi,Sn.invert=gc,Sn.invertBy=Cc,Sn.invokeMap=fa,Sn.iteratee=Zc,Sn.keyBy=ma,Sn.keys=Oc,Sn.keysIn=jc,Sn.map=da,Sn.mapKeys=function(e,t){var n={};return t=Xo(t,3),sr(e,(function(e,r,o){Zn(n,t(e,r,o),e)})),n},Sn.mapValues=function(e,t){var n={};return t=Xo(t,3),sr(e,(function(e,r,o){Zn(n,r,t(e,r,o))})),n},Sn.matches=function(e){return Sr(Jn(e,1))},Sn.matchesProperty=function(e,t){return Pr(e,Jn(t,1))},Sn.memoize=wa,Sn.merge=_c,Sn.mergeWith=wc,Sn.method=Kc,Sn.methodOf=Yc,Sn.mixin=Jc,Sn.negate=Ra,Sn.nthArg=function(e){return e=oc(e),Mr((function(t){return Er(t,e)}))},Sn.omit=Rc,Sn.omitBy=function(e,t){return Ic(e,Ra(Xo(t)))},Sn.once=function(e){return ga(2,e)},Sn.orderBy=function(e,t,n,r){return null==e?[]:(La(t)||(t=null==t?[]:[t]),La(n=r?void 0:n)||(n=null==n?[]:[n]),Ar(e,t,n))},Sn.over=Qc,Sn.overArgs=ka,Sn.overEvery=eu,Sn.overSome=tu,Sn.partial=Ia,Sn.partialRight=Na,Sn.partition=pa,Sn.pick=kc,Sn.pickBy=Ic,Sn.property=nu,Sn.propertyOf=function(e){return function(t){return null==e?void 0:mr(e,t)}},Sn.pull=Fi,Sn.pullAll=qi,Sn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Tr(e,t,Xo(n,2)):e},Sn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Tr(e,t,void 0,n):e},Sn.pullAt=Ui,Sn.range=ru,Sn.rangeRight=ou,Sn.rearg=Sa,Sn.reject=function(e,t){return(La(e)?lt:ir)(e,Ra(Xo(t,3)))},Sn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,o=[],i=e.length;for(t=Xo(t,3);++r<i;){var a=e[r];t(a,r,e)&&(n.push(a),o.push(r))}return Br(e,o),n},Sn.rest=function(e,t){if("function"!=typeof e)throw new be(i);return Mr(e,t=void 0===t?t:oc(t))},Sn.reverse=Wi,Sn.sampleSize=function(e,t,n){return t=(n?si(e,t,n):void 0===t)?1:oc(t),(La(e)?Fn:Fr)(e,t)},Sn.set=function(e,t,n){return null==e?e:qr(e,t,n)},Sn.setWith=function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:qr(e,t,n,r)},Sn.shuffle=function(e){return(La(e)?qn:Hr)(e)},Sn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&si(e,t,n)?(t=0,n=r):(t=null==t?0:oc(t),n=void 0===n?r:oc(n)),Gr(e,t,n)):[]},Sn.sortBy=ha,Sn.sortedUniq=function(e){return e&&e.length?Yr(e):[]},Sn.sortedUniqBy=function(e,t){return e&&e.length?Yr(e,Xo(t,2)):[]},Sn.split=function(e,t,n){return n&&"number"!=typeof n&&si(e,t,n)&&(t=n=void 0),(n=void 0===n?4294967295:n>>>0)?(e=uc(e))&&("string"==typeof t||null!=t&&!Ka(t))&&!(t=Xr(t))&&Vt(e)?lo($t(e),0,n):e.split(t,n):[]},Sn.spread=function(e,t){if("function"!=typeof e)throw new be(i);return t=null==t?0:cn(oc(t),0),Mr((function(n){var r=n[t],o=lo(n,0,t);return r&&pt(o,r),it(e,this,o)}))},Sn.tail=function(e){var t=null==e?0:e.length;return t?Gr(e,1,t):[]},Sn.take=function(e,t,n){return e&&e.length?Gr(e,0,(t=n||void 0===t?1:oc(t))<0?0:t):[]},Sn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?Gr(e,(t=r-(t=n||void 0===t?1:oc(t)))<0?0:t,r):[]},Sn.takeRightWhile=function(e,t){return e&&e.length?no(e,Xo(t,3),!1,!0):[]},Sn.takeWhile=function(e,t){return e&&e.length?no(e,Xo(t,3)):[]},Sn.tap=function(e,t){return t(e),e},Sn.throttle=function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new be(i);return Wa(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),Oa(e,t,{leading:r,maxWait:t,trailing:o})},Sn.thru=ra,Sn.toArray=nc,Sn.toPairs=Nc,Sn.toPairsIn=Sc,Sn.toPath=function(e){return La(e)?dt(e,Ii):Xa(e)?[e]:Co(ki(uc(e)))},Sn.toPlainObject=cc,Sn.transform=function(e,t,n){var r=La(e),o=r||Da(e)||Qa(e);if(t=Xo(t,4),null==n){var i=e&&e.constructor;n=o?r?new i:[]:Wa(e)&&Fa(i)?Pn(qe(e)):{}}return(o?ct:sr)(e,(function(e,r,o){return t(n,e,r,o)})),n},Sn.unary=function(e){return ba(e,1)},Sn.union=Hi,Sn.unionBy=Gi,Sn.unionWith=$i,Sn.uniq=function(e){return e&&e.length?Qr(e):[]},Sn.uniqBy=function(e,t){return e&&e.length?Qr(e,Xo(t,2)):[]},Sn.uniqWith=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?Qr(e,void 0,t):[]},Sn.unset=function(e,t){return null==e||eo(e,t)},Sn.unzip=Zi,Sn.unzipWith=Ki,Sn.update=function(e,t,n){return null==e?e:to(e,t,co(n))},Sn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:to(e,t,co(n),r)},Sn.values=Pc,Sn.valuesIn=function(e){return null==e?[]:Et(e,jc(e))},Sn.without=Yi,Sn.words=Fc,Sn.wrap=function(e,t){return Ia(co(t),e)},Sn.xor=Ji,Sn.xorBy=Xi,Sn.xorWith=Qi,Sn.zip=ea,Sn.zipObject=function(e,t){return io(e||[],t||[],Wn)},Sn.zipObjectDeep=function(e,t){return io(e||[],t||[],qr)},Sn.zipWith=ta,Sn.entries=Nc,Sn.entriesIn=Sc,Sn.extend=lc,Sn.extendWith=fc,Jc(Sn,Sn),Sn.add=cu,Sn.attempt=qc,Sn.camelCase=xc,Sn.capitalize=Ec,Sn.ceil=uu,Sn.clamp=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=ac(n))==n?n:0),void 0!==t&&(t=(t=ac(t))==t?t:0),Yn(ac(e),t,n)},Sn.clone=function(e){return Jn(e,4)},Sn.cloneDeep=function(e){return Jn(e,5)},Sn.cloneDeepWith=function(e,t){return Jn(e,5,t="function"==typeof t?t:void 0)},Sn.cloneWith=function(e,t){return Jn(e,4,t="function"==typeof t?t:void 0)},Sn.conformsTo=function(e,t){return null==t||Xn(e,t,Oc(t))},Sn.deburr=Ac,Sn.defaultTo=function(e,t){return null==e||e!=e?t:e},Sn.divide=su,Sn.endsWith=function(e,t,n){e=uc(e),t=Xr(t);var r=e.length,o=n=void 0===n?r:Yn(oc(n),0,r);return(n-=t.length)>=0&&e.slice(n,o)==t},Sn.eq=Pa,Sn.escape=function(e){return(e=uc(e))&&M.test(e)?e.replace(z,Dt):e},Sn.escapeRegExp=function(e){return(e=uc(e))&&$.test(e)?e.replace(G,"\\$&"):e},Sn.every=function(e,t,n){var r=La(e)?st:rr;return n&&si(e,t,n)&&(t=void 0),r(e,Xo(t,3))},Sn.find=aa,Sn.findIndex=Ai,Sn.findKey=function(e,t){return Ct(e,Xo(t,3),sr)},Sn.findLast=ca,Sn.findLastIndex=Li,Sn.findLastKey=function(e,t){return Ct(e,Xo(t,3),lr)},Sn.floor=lu,Sn.forEach=ua,Sn.forEachRight=sa,Sn.forIn=function(e,t){return null==e?e:cr(e,Xo(t,3),jc)},Sn.forInRight=function(e,t){return null==e?e:ur(e,Xo(t,3),jc)},Sn.forOwn=function(e,t){return e&&sr(e,Xo(t,3))},Sn.forOwnRight=function(e,t){return e&&lr(e,Xo(t,3))},Sn.get=vc,Sn.gt=xa,Sn.gte=Ea,Sn.has=function(e,t){return null!=e&&ii(e,t,vr)},Sn.hasIn=bc,Sn.head=Bi,Sn.identity=$c,Sn.includes=function(e,t,n,r){e=Ba(e)?e:Pc(e),n=n&&!r?oc(n):0;var o=e.length;return n<0&&(n=cn(o+n,0)),Ja(e)?n<=o&&e.indexOf(t,n)>-1:!!o&&Ot(e,t,n)>-1},Sn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=null==n?0:oc(n);return o<0&&(o=cn(r+o,0)),Ot(e,t,o)},Sn.inRange=function(e,t,n){return t=rc(t),void 0===n?(n=t,t=0):n=rc(n),function(e,t,n){return e>=un(t,n)&&e<cn(t,n)}(e=ac(e),t,n)},Sn.invoke=yc,Sn.isArguments=Aa,Sn.isArray=La,Sn.isArrayBuffer=Ta,Sn.isArrayLike=Ba,Sn.isArrayLikeObject=za,Sn.isBoolean=function(e){return!0===e||!1===e||Ha(e)&&pr(e)==l},Sn.isBuffer=Da,Sn.isDate=Ma,Sn.isElement=function(e){return Ha(e)&&1===e.nodeType&&!Za(e)},Sn.isEmpty=function(e){if(null==e)return!0;if(Ba(e)&&(La(e)||"string"==typeof e||"function"==typeof e.splice||Da(e)||Qa(e)||Aa(e)))return!e.length;var t=oi(e);if(t==h||t==C)return!e.size;if(di(e))return!Rr(e).length;for(var n in e)if(_e.call(e,n))return!1;return!0},Sn.isEqual=function(e,t){return Or(e,t)},Sn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:void 0)?n(e,t):void 0;return void 0===r?Or(e,t,void 0,n):!!r},Sn.isError=Va,Sn.isFinite=function(e){return"number"==typeof e&&rn(e)},Sn.isFunction=Fa,Sn.isInteger=qa,Sn.isLength=Ua,Sn.isMap=Ga,Sn.isMatch=function(e,t){return e===t||jr(e,t,ei(t))},Sn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:void 0,jr(e,t,ei(t),n)},Sn.isNaN=function(e){return $a(e)&&e!=+e},Sn.isNative=function(e){if(mi(e))throw new K("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return _r(e)},Sn.isNil=function(e){return null==e},Sn.isNull=function(e){return null===e},Sn.isNumber=$a,Sn.isObject=Wa,Sn.isObjectLike=Ha,Sn.isPlainObject=Za,Sn.isRegExp=Ka,Sn.isSafeInteger=function(e){return qa(e)&&e>=-9007199254740991&&e<=9007199254740991},Sn.isSet=Ya,Sn.isString=Ja,Sn.isSymbol=Xa,Sn.isTypedArray=Qa,Sn.isUndefined=function(e){return void 0===e},Sn.isWeakMap=function(e){return Ha(e)&&oi(e)==j},Sn.isWeakSet=function(e){return Ha(e)&&"[object WeakSet]"==pr(e)},Sn.join=function(e,t){return null==e?"":on.call(e,t)},Sn.kebabCase=Lc,Sn.last=Vi,Sn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r;return void 0!==n&&(o=(o=oc(n))<0?cn(r+o,0):un(o,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,o):yt(e,_t,o,!0)},Sn.lowerCase=Tc,Sn.lowerFirst=Bc,Sn.lt=ec,Sn.lte=tc,Sn.max=function(e){return e&&e.length?or(e,$c,hr):void 0},Sn.maxBy=function(e,t){return e&&e.length?or(e,Xo(t,2),hr):void 0},Sn.mean=function(e){return wt(e,$c)},Sn.meanBy=function(e,t){return wt(e,Xo(t,2))},Sn.min=function(e){return e&&e.length?or(e,$c,Ir):void 0},Sn.minBy=function(e,t){return e&&e.length?or(e,Xo(t,2),Ir):void 0},Sn.stubArray=iu,Sn.stubFalse=au,Sn.stubObject=function(){return{}},Sn.stubString=function(){return""},Sn.stubTrue=function(){return!0},Sn.multiply=mu,Sn.nth=function(e,t){return e&&e.length?Er(e,oc(t)):void 0},Sn.noConflict=function(){return $e._===this&&($e._=Ne),this},Sn.noop=Xc,Sn.now=va,Sn.pad=function(e,t,n){e=uc(e);var r=(t=oc(t))?Gt(e):0;if(!t||r>=t)return e;var o=(t-r)/2;return Lo(en(o),n)+e+Lo(Qt(o),n)},Sn.padEnd=function(e,t,n){e=uc(e);var r=(t=oc(t))?Gt(e):0;return t&&r<t?e+Lo(t-r,n):e},Sn.padStart=function(e,t,n){e=uc(e);var r=(t=oc(t))?Gt(e):0;return t&&r<t?Lo(t-r,n)+e:e},Sn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),ln(uc(e).replace(Z,""),t||0)},Sn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&si(e,t,n)&&(t=n=void 0),void 0===n&&("boolean"==typeof t?(n=t,t=void 0):"boolean"==typeof e&&(n=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=rc(e),void 0===t?(t=e,e=0):t=rc(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var o=fn();return un(e+o*(t-e+Ue("1e-"+((o+"").length-1))),t)}return zr(e,t)},Sn.reduce=function(e,t,n){var r=La(e)?ht:It,o=arguments.length<3;return r(e,Xo(t,4),n,o,tr)},Sn.reduceRight=function(e,t,n){var r=La(e)?vt:It,o=arguments.length<3;return r(e,Xo(t,4),n,o,nr)},Sn.repeat=function(e,t,n){return t=(n?si(e,t,n):void 0===t)?1:oc(t),Dr(uc(e),t)},Sn.replace=function(){var e=arguments,t=uc(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Sn.result=function(e,t,n){var r=-1,o=(t=uo(t,e)).length;for(o||(o=1,e=void 0);++r<o;){var i=null==e?void 0:e[Ii(t[r])];void 0===i&&(r=o,i=n),e=Fa(i)?i.call(e):i}return e},Sn.round=du,Sn.runInContext=e,Sn.sample=function(e){return(La(e)?Vn:Vr)(e)},Sn.size=function(e){if(null==e)return 0;if(Ba(e))return Ja(e)?Gt(e):e.length;var t=oi(e);return t==h||t==C?e.size:Rr(e).length},Sn.snakeCase=zc,Sn.some=function(e,t,n){var r=La(e)?bt:$r;return n&&si(e,t,n)&&(t=void 0),r(e,Xo(t,3))},Sn.sortedIndex=function(e,t){return Zr(e,t)},Sn.sortedIndexBy=function(e,t,n){return Kr(e,t,Xo(n,2))},Sn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=Zr(e,t);if(r<n&&Pa(e[r],t))return r}return-1},Sn.sortedLastIndex=function(e,t){return Zr(e,t,!0)},Sn.sortedLastIndexBy=function(e,t,n){return Kr(e,t,Xo(n,2),!0)},Sn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=Zr(e,t,!0)-1;if(Pa(e[n],t))return n}return-1},Sn.startCase=Dc,Sn.startsWith=function(e,t,n){return e=uc(e),n=null==n?0:Yn(oc(n),0,e.length),t=Xr(t),e.slice(n,n+t.length)==t},Sn.subtract=pu,Sn.sum=function(e){return e&&e.length?Nt(e,$c):0},Sn.sumBy=function(e,t){return e&&e.length?Nt(e,Xo(t,2)):0},Sn.template=function(e,t,n){var r=Sn.templateSettings;n&&si(e,t,n)&&(t=void 0),e=uc(e),t=fc({},t,r,qo);var o,i,a=fc({},t.imports,r.imports,qo),c=Oc(a),u=Et(a,c),s=0,l=t.interpolate||le,f="__p += '",m=he((t.escape||le).source+"|"+l.source+"|"+(l===q?ne:le).source+"|"+(t.evaluate||le).source+"|$","g"),d="//# sourceURL="+(_e.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Me+"]")+"\n";e.replace(m,(function(t,n,r,a,c,u){return r||(r=a),f+=e.slice(s,u).replace(fe,Mt),n&&(o=!0,f+="' +\n__e("+n+") +\n'"),c&&(i=!0,f+="';\n"+c+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),s=u+t.length,t})),f+="';\n";var p=_e.call(t,"variable")&&t.variable;if(p){if(ee.test(p))throw new K("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(i?f.replace(A,""):f).replace(L,"$1").replace(T,"$1;"),f="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var h=qc((function(){return me(c,d+"return "+f).apply(void 0,u)}));if(h.source=f,Va(h))throw h;return h},Sn.times=function(e,t){if((e=oc(e))<1||e>9007199254740991)return[];var n=4294967295,r=un(e,4294967295);e-=4294967295;for(var o=St(r,t=Xo(t));++n<e;)t(n);return o},Sn.toFinite=rc,Sn.toInteger=oc,Sn.toLength=ic,Sn.toLower=function(e){return uc(e).toLowerCase()},Sn.toNumber=ac,Sn.toSafeInteger=function(e){return e?Yn(oc(e),-9007199254740991,9007199254740991):0===e?e:0},Sn.toString=uc,Sn.toUpper=function(e){return uc(e).toUpperCase()},Sn.trim=function(e,t,n){if((e=uc(e))&&(n||void 0===t))return Pt(e);if(!e||!(t=Xr(t)))return e;var r=$t(e),o=$t(t);return lo(r,Lt(r,o),Tt(r,o)+1).join("")},Sn.trimEnd=function(e,t,n){if((e=uc(e))&&(n||void 0===t))return e.slice(0,Zt(e)+1);if(!e||!(t=Xr(t)))return e;var r=$t(e);return lo(r,0,Tt(r,$t(t))+1).join("")},Sn.trimStart=function(e,t,n){if((e=uc(e))&&(n||void 0===t))return e.replace(Z,"");if(!e||!(t=Xr(t)))return e;var r=$t(e);return lo(r,Lt(r,$t(t))).join("")},Sn.truncate=function(e,t){var n=30,r="...";if(Wa(t)){var o="separator"in t?t.separator:o;n="length"in t?oc(t.length):n,r="omission"in t?Xr(t.omission):r}var i=(e=uc(e)).length;if(Vt(e)){var a=$t(e);i=a.length}if(n>=i)return e;var c=n-Gt(r);if(c<1)return r;var u=a?lo(a,0,c).join(""):e.slice(0,c);if(void 0===o)return u+r;if(a&&(c+=u.length-c),Ka(o)){if(e.slice(c).search(o)){var s,l=u;for(o.global||(o=he(o.source,uc(re.exec(o))+"g")),o.lastIndex=0;s=o.exec(l);)var f=s.index;u=u.slice(0,void 0===f?c:f)}}else if(e.indexOf(Xr(o),c)!=c){var m=u.lastIndexOf(o);m>-1&&(u=u.slice(0,m))}return u+r},Sn.unescape=function(e){return(e=uc(e))&&D.test(e)?e.replace(B,Kt):e},Sn.uniqueId=function(e){var t=++we;return uc(e)+t},Sn.upperCase=Mc,Sn.upperFirst=Vc,Sn.each=ua,Sn.eachRight=sa,Sn.first=Bi,Jc(Sn,(fu={},sr(Sn,(function(e,t){_e.call(Sn.prototype,t)||(fu[t]=e)})),fu),{chain:!1}),Sn.VERSION="4.17.21",ct(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Sn[e].placeholder=Sn})),ct(["drop","take"],(function(e,t){An.prototype[e]=function(n){n=void 0===n?1:cn(oc(n),0);var r=this.__filtered__&&!t?new An(this):this.clone();return r.__filtered__?r.__takeCount__=un(n,r.__takeCount__):r.__views__.push({size:un(n,4294967295),type:e+(r.__dir__<0?"Right":"")}),r},An.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),ct(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;An.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Xo(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),ct(["head","last"],(function(e,t){var n="take"+(t?"Right":"");An.prototype[e]=function(){return this[n](1).value()[0]}})),ct(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");An.prototype[e]=function(){return this.__filtered__?new An(this):this[n](1)}})),An.prototype.compact=function(){return this.filter($c)},An.prototype.find=function(e){return this.filter(e).head()},An.prototype.findLast=function(e){return this.reverse().find(e)},An.prototype.invokeMap=Mr((function(e,t){return"function"==typeof e?new An(this):this.map((function(n){return Cr(n,e,t)}))})),An.prototype.reject=function(e){return this.filter(Ra(Xo(e)))},An.prototype.slice=function(e,t){e=oc(e);var n=this;return n.__filtered__&&(e>0||t<0)?new An(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),void 0!==t&&(n=(t=oc(t))<0?n.dropRight(-t):n.take(t-e)),n)},An.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},An.prototype.toArray=function(){return this.take(4294967295)},sr(An.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),o=Sn[r?"take"+("last"==t?"Right":""):t],i=r||/^find/.test(t);o&&(Sn.prototype[t]=function(){var t=this.__wrapped__,a=r?[1]:arguments,c=t instanceof An,u=a[0],s=c||La(t),l=function(e){var t=o.apply(Sn,pt([e],a));return r&&f?t[0]:t};s&&n&&"function"==typeof u&&1!=u.length&&(c=s=!1);var f=this.__chain__,m=!!this.__actions__.length,d=i&&!f,p=c&&!m;if(!i&&s){t=p?t:new An(this);var h=e.apply(t,a);return h.__actions__.push({func:ra,args:[l],thisArg:void 0}),new En(h,f)}return d&&p?e.apply(this,a):(h=this.thru(l),d?r?h.value()[0]:h.value():h)})})),ct(["pop","push","shift","sort","splice","unshift"],(function(e){var t=ge[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Sn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var o=this.value();return t.apply(La(o)?o:[],e)}return this[n]((function(n){return t.apply(La(n)?n:[],e)}))}})),sr(An.prototype,(function(e,t){var n=Sn[t];if(n){var r=n.name+"";_e.call(yn,r)||(yn[r]=[]),yn[r].push({name:t,func:n})}})),yn[Po(void 0,2).name]=[{name:"wrapper",func:void 0}],An.prototype.clone=function(){var e=new An(this.__wrapped__);return e.__actions__=Co(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Co(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Co(this.__views__),e},An.prototype.reverse=function(){if(this.__filtered__){var e=new An(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},An.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=La(e),r=t<0,o=n?e.length:0,i=function(e,t,n){var r=-1,o=n.length;for(;++r<o;){var i=n[r],a=i.size;switch(i.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=un(t,e+a);break;case"takeRight":e=cn(e,t-a)}}return{start:e,end:t}}(0,o,this.__views__),a=i.start,c=i.end,u=c-a,s=r?c:a-1,l=this.__iteratees__,f=l.length,m=0,d=un(u,this.__takeCount__);if(!n||!r&&o==u&&d==u)return ro(e,this.__actions__);var p=[];e:for(;u--&&m<d;){for(var h=-1,v=e[s+=t];++h<f;){var b=l[h],g=b.iteratee,C=b.type,y=g(v);if(2==C)v=y;else if(!y){if(1==C)continue e;break e}}p[m++]=v}return p},Sn.prototype.at=oa,Sn.prototype.chain=function(){return na(this)},Sn.prototype.commit=function(){return new En(this.value(),this.__chain__)},Sn.prototype.next=function(){void 0===this.__values__&&(this.__values__=nc(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},Sn.prototype.plant=function(e){for(var t,n=this;n instanceof xn;){var r=Si(n);r.__index__=0,r.__values__=void 0,t?o.__wrapped__=r:t=r;var o=r;n=n.__wrapped__}return o.__wrapped__=e,t},Sn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof An){var t=e;return this.__actions__.length&&(t=new An(this)),(t=t.reverse()).__actions__.push({func:ra,args:[Wi],thisArg:void 0}),new En(t,this.__chain__)}return this.thru(Wi)},Sn.prototype.toJSON=Sn.prototype.valueOf=Sn.prototype.value=function(){return ro(this.__wrapped__,this.__actions__)},Sn.prototype.first=Sn.prototype.head,Je&&(Sn.prototype[Je]=function(){return this}),Sn}();$e._=Yt,void 0===(o=function(){return Yt}.call(t,n,t,r))||(r.exports=o)}).call(this)}).call(this,n(113),n(396)(e))},1212:function(e,t,n){"use strict";var r=n(20),o=n(0),i=n(1),a=n(84),c=n.n(a),u=n(13),s=n(393),l=Object(u.connect)((function(e){return{hasData:e.emoticons.emoticonGroupList.length>0}}));t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.alwaysShow,n=void 0!==t&&t;return function(e){return l(c()((function(t){var a=t.hasData,c=Object(i.useState)(!1),l=Object(r.a)(c,2),f=l[0],m=l[1],d=Object(u.useDispatch)();return Object(i.useEffect)((function(){a?m(!0):d(Object(s.d)()).then((function(e){var t=e.payload.data[0].id;d(Object(s.e)(t)),m(!0)})).catch((function(){m(!0)}))}),[d,a]),(!f||!n)&&Object(o.b)(e,Object.assign({},t))}),e))}}},1221:function(e,t,n){"use strict";var r=n(9),o=n(10),i=n(11),a=n(12),c=n(5),u=n(0),s=n(1),l=n(13),f=n(26),m=n(2),d=n.n(m),p=n(6),h=n.n(p),v=n(402),b=n.n(v),g=n(36),C=n(32),y=n(393),O=n(41),j=n(83),_=n(1206),w=n(20),R=n(280);function k(e){var t,n,r,o,i,a,c,l,f,m=e.className,d=e.emoticonGroupList,p=e.curEmoticonGroupId,v=e.onGroupSelected,b=e.vipEnabled,C=Object(s.useRef)(),y=Object(R.a)(b,d),O=(t=C,n=Object(s.useState)({left:null,x:null}),r=Object(w.a)(n,2),o=r[0],i=r[1],a=Object(s.useState)(!1),c=Object(w.a)(a,2),l=c[0],f=c[1],{onMouseDown:Object(g.b)((function(e){var n;f(!0);var r=null===(n=t.current)||void 0===n?void 0:n.scrollLeft,o=e.clientX;i({left:r,x:o}),e.preventDefault()})),onMouseMove:Object(g.b)((function(e){if(l){var n=e.clientX-o.x;t.current&&(t.current.scrollLeft=o.left-n)}})),onMouseUp:Object(g.b)((function(){l&&f(!1)}))});return Object(u.b)("div",{className:h()("EmoticonsFooter",m),children:Object(u.b)("ul",Object.assign({className:"EmoticonsFooter-items",ref:C},O,{children:y.map((function(e){return Object(u.b)("li",{className:h()("EmoticonsFooter-item",{"EmoticonsFooter-item--selected":p===e.id}),onClick:function(){v(e.id)},children:Object(u.b)("img",{alt:"",src:e.iconUrl,className:"EmoticonsFooter-itemIcon"})},e.id)}))}))})}var I=n(1203);function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var S=function(e){Object(i.a)(n,e);var t=N(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).handleMouseEnter=function(e,t){e.dynamicImageUrl&&(t.target.src=e.dynamicImageUrl)},e.handleMouseLeave=function(e,t){e.dynamicImageUrl&&(t.target.src=e.staticImageUrl)},e.handleSelectEmoticon=function(t,n){(0,e.props.onSelectEmoticon)(t,n)},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.type,r=t.data,o=void 0===r?[]:r;return 0===o.length?Object(u.b)(I.a,{className:"EmoticonPanel-spinner"}):Object(u.b)("ul",{className:"EmoticonPanel",children:o.map((function(t){return Object(u.c)(C.a,{zaType:"Button",zaText:t.title,zaEventType:"Click",zaBlock:"vip"===n?"VipEmoticon":"Emoticon",as:"li",className:h()("EmoticonPanel-item",{"EmoticonPanel-item--big":"emoji"!==n}),onClick:function(){e.handleSelectEmoticon(t,n)},children:[Object(u.b)("img",{src:t.staticImageUrl,title:"emoji"===n?t.title:"",className:h()({"EmoticonPanel-itemImg--small":"emoji"===n,"EmoticonPanel-itemImg--big":"emoji"!==n}),onMouseOver:function(n){e.handleMouseEnter(t,n)},onMouseOut:function(n){e.handleMouseLeave(t,n)},alt:t.title}),"emoji"!==n&&Object(u.b)("span",{className:"EmoticonPanel-itemTitle",children:t.title})]},t.id)}))})}}]),n}(s.Component);function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}S.propTypes={type:d.a.string.isRequired,data:d.a.array.isRequired,onSelectEmoticon:d.a.func.isRequired};var x=function(e){Object(i.a)(n,e);var t=P(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).getCurEmoticonGroupPanleData=function(){var t=e.props,n=t.curEmoticonGroupId;return t.emoticonPanelList.filter((function(e){return e.groupId===n}))},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.changeSelectedEmoticonPanel,n=e.curEmoticonPanelId,r=e.className,o=this.getCurEmoticonGroupPanleData();return o.length<=1?null:Object(u.b)("ul",{className:h()("EmoticonPagination",r),children:o.map((function(e){return Object(u.b)("li",{className:h()("EmoticonPagination-bullet",{"EmoticonPagination-bullet--active":e.id===n}),onClick:function(){t(e.id)}},e.id)}))})}}]),n}(s.Component);x.propsTypes={className:d.a.string};var E=Object(l.connect)((function(e){var t=e.emoticons;return{curEmoticonGroupId:t.curEmoticonGroupId,emoticonPanelList:t.emoticonPanelList,curEmoticonPanelId:t.curEmoticonPanelId}}),{changeSelectedEmoticonPanel:y.b})(x),A=n(4),L=n(1156),T=n(30);function B(e){var t=e.show,n=e.onClick,r=Object(g.b)((function(){null==n||n()}));return t&&Object(u.c)(C.a,{zaType:"Button",zaEventType:"Click",zaAction:"OpenUrl",zaBlock:"VipBrand",extra:{link:{url:T.w}},css:function(e){return Object(A.a)({backgroundColor:e.colorMod(e.colors.GYL08A).alpha(.25),color:e.colors.GYL12A,display:"flex",alignItems:"center",justifyContent:"center",height:"25px",fontSize:"12px",lineHeight:"17px",userSelect:"none"},"&:hover",{cursor:"pointer"})},onClick:r,children:["开通会员解锁全部会员表情 ",Object(u.b)(L.a,{})]})}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var D={containerClass:"Emoticons-panelContainer",ContainerEl:"ul",threshold:10},M=function(e){Object(i.a)(n,e);var t=z(n);function n(e){var o;return Object(r.a)(this,n),(o=t.call(this,e)).state={showVipStickerModal:!1},o.setShowVipStickerModal=function(e){o.setState({showVipStickerModal:e})},o.handleGetSwiperInstance=function(e){o.mousetrap=new b.a,o.swiperInstance=e,o.mousetrap.bind("left",(function(){e.slidePrev()})),o.mousetrap.bind("right",(function(){e.slideNext()}))},o.handleEmoticonGroupSelected=function(e){var t=o.props,n=t.getEmoticonsDetail,r=t.emoticonGroupDetail,i=t.changeSelectedEmoticonGroup,a=t.changeSelectedEmoticonPanel;r[e]||n(e),i(e),a("".concat(e,"-0"))},o.handleSlideChange=function(){var e=o.props,t=e.emoticonPanelList,n=e.getEmoticonsDetail,r=e.changeSelectedEmoticonPanel,i=e.changeSelectedEmoticonGroup;if(o.swiperInstance){var a=t[o.swiperInstance.activeIndex];r(a.id),i(a.groupId),0===a.data.length&&n(a.groupId)}},o.handleRequestVip=function(){o.setShowVipStickerModal(!0)},o.handleSelectEmoticon=function(e,t){var n=o.props,r=n.onSelectEmoticon,i=n.isVip;"vip"!==t||i?r(e,t):o.handleRequestVip()},o.swiperInstance=Object(s.createRef)(),o}return Object(o.a)(n,[{key:"componentWillUnmount",value:function(){var e=this.props,t=e.changeSelectedEmoticonGroup,n=e.changeSelectedEmoticonPanel,r=e.emoticonPanelList;t(r[0].groupId),n(r[0].id),this.mousetrap.reset()}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.emoticonGroupList,o=void 0===r?[]:r,i=t.curEmoticonGroupId,a=t.emoticonPanelList,c=t.curEmoticonPanelId,s=t.isVip,l=t.vipEnabled,f=void 0!==l&&l,m=t.Swiper,d=this.state.showVipStickerModal,p=this.setShowVipStickerModal,v=Object(R.a)(f,a);return Object(u.b)(C.b,{block:"EmoticonsCard",children:Object(u.c)("div",{className:h()("Emoticons",n),children:[m?Object(u.b)(m,Object.assign({},D,{activeSlideKey:c,getSwiper:this.handleGetSwiperInstance,on:{slideChange:this.handleSlideChange},children:v.map((function(t){return Object(u.b)("li",{className:"Emoticons-panels-item",children:Object(u.b)(S,{type:t.type,data:t.data,onSelectEmoticon:e.handleSelectEmoticon})},t.id)}))})):Object(u.b)("div",{css:{height:183}}),Object(u.b)(E,{className:"Emoticons-Pagination"}),Object(u.b)(B,{show:f&&!s,onClick:this.handleRequestVip}),Object(u.b)(k,{emoticonGroupList:o,curEmoticonGroupId:i,onGroupSelected:this.handleEmoticonGroupSelected,vipEnabled:f}),Object(u.b)(_.b,{show:d,setShow:p,type:_.a.comment_sticker})]})})}}]),n}(s.Component);M.propTypes={className:d.a.string,onSelectEmoticon:d.a.func};t.a=Object(f.compose)(Object(l.connect)((function(e){var t=e.emoticons,n=t.emoticonGroupList,r=t.curEmoticonGroupId,o=t.emoticonGroupDetail,i=t.emoticonPanelList;return{emoticonGroupList:n,curEmoticonGroupId:r,emoticonGroupDetail:o,emoticonPanelList:void 0===i?[]:i,curEmoticonPanelId:t.curEmoticonPanelId,isVip:Object(O.h)(e)}}),{getEmoticonsDetail:y.e,changeSelectedEmoticonGroup:y.a,changeSelectedEmoticonPanel:y.b}),Object(j.a)(null),(function(e){return function(t){var r=Object(g.c)((function(){return n.e(15).then(n.t.bind(null,1440,7))}));return Object(u.b)(e,Object.assign({},t,{Swiper:r}))}}))(M)},1223:function(e,t,n){"use strict";var r=n(20),o=n(0),i=n(84),a=n.n(i),c=n(17),u=n(280),s=n(14),l=n(176);function f(e){return e.reduce((function(e,t){var n;return[].concat(Object(s.a)(e),Object(s.a)(null!==(n=t.stickers)&&void 0!==n?n:[]))}),[])}var m=function(){return window.zh_emoticon?Promise.resolve(f(window.zh_emoticon)):Object(l.loadScript)("https://unpkg.zhimg.com/@cfe/emoticon@1.2.2/lib/emoticon.js").then((function(){return window.zh_emoticon?f(window.zh_emoticon):[]}))},d=n(1);t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.alwaysShow,n=void 0!==t&&t;return function(e){return a()((function(t){var i=Object(d.useState)(!1),a=Object(r.a)(i,2),s=a[0],l=a[1];return Object(d.useEffect)((function(){Object(u.c)()?l(!0):m().then((function(e){Object(u.e)(Object(c.camelizeKeys)(e)),l(!0)})).catch((function(){l(!0)}))}),[]),(s||n)&&Object(o.b)(e,Object.assign({},t))}),e)}}},1233:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var r=n(9),o=n(10),i=n(11),a=n(12),c=n(5),u=n(0),s=n(1),l=n.n(s),f=n(2),m=n.n(f),d=n(6),p=n.n(d),h=n(144),v=n(15),b=n(55),g=n(713),C=n(21),y=function(e){return l.a.createElement(C.a,e,l.a.createElement("path",{d:"M13.004 7V4.232c0-.405.35-.733.781-.733.183 0 .36.06.501.17l6.437 5.033c.331.26.376.722.1 1.033a.803.803 0 0 1-.601.264H2.75a.75.75 0 0 1-.75-.75V7.75A.75.75 0 0 1 2.75 7h10.254zm-1.997 9.999v2.768c0 .405-.35.733-.782.733a.814.814 0 0 1-.5-.17l-6.437-5.034a.702.702 0 0 1-.1-1.032.803.803 0 0 1 .6-.264H21.25a.75.75 0 0 1 .75.75v1.499a.75.75 0 0 1-.75.75H11.007z",fillRule:"evenodd"}))};y.defaultProps={name:"Switch"};var O=y;function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var _={normal:{text:"默认排序",value:"reverse"},reverse:{text:"时间排序",value:"normal"}},w=function(e){Object(i.a)(n,e);var t=j(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={text:"时间排序",value:"normal"},e.switchType=function(t){var n=e.state.value,r=e.props.onOrderChange,o=_[n],i=o.text,a=o.value;e.setState({text:i,value:a}),r&&r(a,t)},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.state.text,t=this.props,n=t.isConversation,r=t.commentClosed;return t.shouldReverse?!n&&!r&&Object(u.b)(v.c,{preset:"plain",onClick:this.switchType,icon:O,label:"切换为".concat(e)}):null}}]),n}(s.Component);w.propTypes={isConversation:m.a.bool,commentClosed:m.a.bool,onOrderChange:m.a.func,shouldReverse:m.a.bool};var R=n(1169);function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var I=function(e){Object(i.a)(n,e);var t=k(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.commentPattern,n=e.onNavBack;return Object(u.b)("h2",{className:"CommentTopbar-title",children:"bottom"!==t?Object(u.c)(v.c,{className:"CommentTopbar-back",preset:"plain",onClick:n,children:[Object(u.b)(R.a,{text:!0,center:!0})," 返回评论"]}):Object(u.b)("div",{children:"查看对话"})})}}]),n}(s.Component);function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}I.propTypes={commentPattern:m.a.string,onNavBack:m.a.func};var S=function(e){Object(i.a)(n,e);var t=N(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).renderTopBarSwitch=function(){var t=e.props,n=t.isMobile,r=t.status,o=t.isConversation,i=t.commentCount,a=t.onOrderChange,c=t.commentClosed,s=t.shouldReverse;return!n&&Boolean(i&&!c)&&"reviewing"!==r&&Object(u.b)(w,{isConversation:o,onOrderChange:a,commentClosed:c,shouldReverse:s})},e}return Object(o.a)(n,[{key:"renderTitle",value:function(){var e=this.props,t=e.commentCount,n=e.commentClosed,r=e.isConversation,o=e.onNavBack,i=e.targetLink,a=e.isCommentReviewer,c=e.reviewingCounts,l=e.onStatusChange,f=e.status,m=e.commentPattern,d=e.isOrg,g=e.isMobile;return r?Object(u.b)(I,{commentPattern:m,onNavBack:o}):a&&!n?Object(u.c)("div",{className:"CommentTopbar-tabsWrapper",children:[Object(u.c)(h.b,{className:"CommentTopbar-tabs",children:[Object(u.b)(h.a,{className:"CommentTopbar-tab","aria-controls":"CommentTopbar-open",meta:Object(b.formatNumber)(t),children:Object(u.b)(v.c,{className:p()("CommentTopbar-tabButton",{"is-active":"open"===f}),onClick:function(){return l("open")},children:"公开评论"})}),!g&&Object(u.b)(h.a,{className:"CommentTopbar-tab","aria-controls":"CommentTopbar-reviewing",meta:void 0===c?null:Object(b.formatNumber)(c),children:Object(u.b)(v.c,{className:p()("CommentTopbar-tabButton",{"is-active":"reviewing"===f}),onClick:function(){return l("reviewing")},children:"待".concat(d?"审核":"筛选","评论")})})]}),i]}):Object(u.b)(s.Fragment,{children:Object(u.c)("h2",{className:"CommentTopbar-title",children:[t&&!n?"".concat(Object(b.formatNumber)(t)," 条评论"):"还没有评论",i]})})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.onRef,r=e.isMobile;return Object(u.b)(g.a,{className:p()("CommentTopbar",t),onRef:n,header:this.renderTitle(),options:this.renderTopBarSwitch(),showOptions:!r})}}]),n}(s.Component);S.propTypes={commentCount:m.a.oneOfType([m.a.number,m.a.string]),isConversation:m.a.bool,onNavBack:m.a.func,isCommentReviewer:m.a.bool,onStatusChange:m.a.func,onOrderChange:m.a.func,status:m.a.string,reviewingCounts:m.a.oneOfType([m.a.number,m.a.string]),targetLink:m.a.node,commentClosed:m.a.bool,commentPattern:m.a.string,isOrg:m.a.bool,isMobile:m.a.bool,options:m.a.element,shouldReverse:m.a.bool},S.defaultProps={shouldReverse:!0}},1300:function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(21),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M13.25 5.5H6.868c-.755 0-1.368.613-1.368 1.368v10.264c0 .755.613 1.368 1.368 1.368h10.264c.755 0 1.368-.613 1.368-1.368V10.75H20v6.467A2.783 2.783 0 0 1 17.217 20H6.783A2.783 2.783 0 0 1 4 17.217V6.783A2.783 2.783 0 0 1 6.783 4h6.467v1.5zM8.158 13.4a1.033 1.033 0 0 1 1.744-.078l.258.37a.782.782 0 0 0 1.303-.031l1.332-2.113a1.173 1.173 0 0 1 2.01.043l2.03 3.537A1.25 1.25 0 0 1 15.748 17H8.25a1.252 1.252 0 0 1-1.085-1.873l.992-1.728zM9.5 11a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm3.75-5.5a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5zM18.5 4V2.25a.75.75 0 1 1 1.5 0V4h1.75a.75.75 0 1 1 0 1.5H20v1.75a.75.75 0 1 1-1.5 0V5.5h-1.75a.75.75 0 1 1 0-1.5h1.75zm.75 7.5a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5z"}))};a.defaultProps={name:"AddImage"},t.a=a},1301:function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(21),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M7.523 13.5h8.954c-.228 2.47-2.145 4-4.477 4-2.332 0-4.25-1.53-4.477-4zM12 21a9 9 0 1 1 0-18 9 9 0 0 1 0 18zm0-1.5a7.5 7.5 0 1 0 0-15 7.5 7.5 0 0 0 0 15zm-3-8a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm6 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"}))};a.defaultProps={name:"Emotion"},t.a=a},1305:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var r=n(22),o=n.n(r),i=n(23),a=n.n(i),c=n(24),u=n.n(c),s=n(27),l=n.n(s),f=n(16),m=n.n(f),d=n(73),p=n.n(d),h=n(1),v=n(6),b=n.n(v),g=n(15),C=n(3);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l()(this,n)}}var O=function(e){u()(n,e);var t=y(n);function n(){var e;o()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).handleClick=function(){var t=e.props;(0,t.onSelect)(t.page)},e}return a()(n,[{key:"render",value:function(){var e=this.props,t=e.text,n=e.isCurrent,r=e.className;return Object(C.d)(g.c,{preset:g.b.Plain,className:b()("PaginationButton",{"PaginationButton--current":n},r),onClick:this.handleClick,disabled:n},t)}}]),n}(h.Component);function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l()(this,n)}}var _=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Array.from({length:t},(function(t,n){return n+e}))},w=function(e){u()(n,e);var t=j(n);function n(){return o()(this,n),t.apply(this,arguments)}return a()(n,[{key:"render",value:function(){var e,t=this.props,n=t.onSelect,r=t.className,o=t.clickCallback,i=this.props.current,a=this.props.total,c=o&&(e=o,function(){e.apply(void 0,arguments)})||n,u=function(e,t){var n="...";return t<=5?_(1,t):e>t-3?[1,n].concat(p()(_(t-3,3)),[t]):e<=3?[1].concat(p()(_(2,3)),[n,t]):[1,n].concat(p()(_(e-Math.floor(1.5),3)),[n,t])}(i,a);return Object(C.d)("div",{className:b()("Pagination",r)},i>1&&i<=a&&Object(C.d)(O,{className:"PaginationButton-prev",onSelect:c,text:"上一页",page:i-1}),u.map((function(e,t){return"number"==typeof e?Object(C.d)(O,{onSelect:c,text:e,page:e,key:t,isCurrent:i===e}):Object(C.d)("button",{disabled:!0,key:t,className:"PaginationButton PaginationButton--ellipsis"},e)})),i>0&&i<a&&Object(C.d)(O,{className:"PaginationButton-next",onSelect:c,text:"下一页",page:i+1}))}}]),n}(h.Component);w.defaultProps={current:1,total:1,onSelect:function(){}}},1307:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(9),o=n(10),i=n(11),a=n(12),c=n(5),u=n(0),s=n(1),l=n(136);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var m=function(e){Object(i.a)(n,e);var t=f(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props.onRef;return Object(u.b)("div",{className:"Comments-pattern-loading",ref:e,children:Object(u.b)(l.a,{})})}}]),n}(s.PureComponent)},1308:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(20),o=n(0),i=n(1),a=n(340),c=n(1095),u=n(127),s=n.n(u);function l(e){var t=e.onClick,n=e.commentsElRef,u=Object(i.useState)(!1),l=Object(r.a)(u,2),f=l[0],m=l[1],d=Object(i.useState)(0),p=Object(r.a)(d,2),h=p[0],v=p[1];return Object(i.useEffect)((function(){var e=n.current;if(e){var t=e.getBoundingClientRect().right;v(t-16)}}),[n]),Object(i.useEffect)((function(){var e=s()((function(){var e=n.current;if(e){var t=window.innerHeight,r=e.getBoundingClientRect(),o=r.top,i=r.bottom,a=r.height;m(a>500&&i>t&&o<0)}}),100);return window.addEventListener("scroll",e),function(){e.cancel(),window.removeEventListener("scroll",e)}}),[n]),Object(a.c)(f,null,{from:{opacity:0,left:h},enter:{opacity:1,left:h},leave:{opacity:0,left:h}}).map((function(e){var n=e.item,r=e.key,i=e.props;return n&&Object(o.c)(a.a.button,{style:i,onClick:t,className:"CommentCollapseButton",children:["收起评论",Object(o.b)(c.a,{center:!0})]},r)}))}},1425:function(e,t,n){var r=n(775),o=n(355),i=n(400),a=Math.max,c=Math.min;e.exports=function(e,t,n){var u=null==e?0:e.length;if(!u)return-1;var s=u-1;return void 0!==n&&(s=i(n),s=n<0?a(u+s,0):c(s,u-1)),r(e,o(t,3),s,!0)}},1438:function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(21),a=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M22.959 17.22c-1.686-3.552-5.128-8.062-11.636-8.65-.539-.053-1.376-.436-1.376-1.561V4.678c0-.521-.635-.915-1.116-.521L1.469 10.67a1.506 1.506 0 0 0-.1 2.08s6.99 6.818 7.443 7.114c.453.295 1.136.124 1.135-.501V17a1.525 1.525 0 0 1 1.532-1.466c1.186-.139 7.597-.077 10.33 2.396 0 0 .396.257.536.257.892 0 .614-.967.614-.967z",fillRule:"evenodd"}))};a.defaultProps={name:"Reply"},t.a=a},1446:function(e,t,n){"use strict";n.r(t);var r=n(37),o=n(9),i=n(10),a=n(11),c=n(12),u=n(5),s=n(0),l=n(1),f=n.n(l),m=n(2),d=n.n(m),p=n(50),h=n(13),v=n(26),b=n(6),g=n.n(b),C=n(397),y=n(1425),O=n.n(y),j=n(97),_=n(1305),w=n(55),R=n(38),k=n(59),I=n(138),N=n(41),S=n(90),P=n(573),x=n(1223),E=n(280),A=function(e){return Object.assign({},e,{richText:Object(E.d)(e.content)})},L=n(130),T=n(14),B=n(57),z=n(47),D=n(8),M=n(32),V=n(103),F=n.n(V),q=n(45),U=n.n(q),W=n(15),H=n(429),G=n(116),$=n(1212),Z=n(324),K=n(20),Y=n(1208),J=n(129),X=n(190),Q=n(582),ee=n(1089),te=n(1300),ne=n(36),re=n(1206),oe=n(254),ie=n(1200),ae=n(30),ce="zhihu::comment_local_key",ue=(ae.H,function(){return""}),se="上传失败",le="上传中",fe="",me="emoticon",de="selected",pe="image",he=Object(l.forwardRef)((function(e,t){var n=e.children,r=Object(l.useRef)(!1),o=Object(l.useRef)(null),i=Object(l.useRef)(null),a=Object(l.useRef)(null),c=Object(ne.b)((function(){var e,t,n;null===(e=o.current)||void 0===e||e.position(),null===(t=i.current)||void 0===t||t.position(),null===(n=a.current)||void 0===n||n.position()})),u=Object(ne.b)((function(){var e;null===(e=o.current)||void 0===e||e.open()})),s=Object(ne.b)((function(){var e,t,n;null===(e=a.current)||void 0===e||e.open(),null===(t=i.current)||void 0===t||t.close(),null===(n=o.current)||void 0===n||n.close()})),f=Object(ne.b)((function(){var e;null===(e=a.current)||void 0===e||e.close()})),m=Object(ne.b)((function(){var e,t,n;null===(e=i.current)||void 0===e||e.open(),null===(t=a.current)||void 0===t||t.close(),null===(n=o.current)||void 0===n||n.close()})),d=Object(ne.b)((function(){var e;null===(e=i.current)||void 0===e||e.close()})),p=Object(ne.b)((function(){var e,t,n;null===(e=a.current)||void 0===e||e.close(),null===(t=i.current)||void 0===t||t.close(),null===(n=o.current)||void 0===n||n.close()})),h=Object(ne.b)((function(){var e,t;r.current||(r.current=!0,null===(e=i.current)||void 0===e||e.open(),null===(t=a.current)||void 0===t||t.open(),Promise.resolve().then((function(){var e,t;null===(e=i.current)||void 0===e||e.close(),null===(t=a.current)||void 0===t||t.close()})))})),v=Object(l.useState)({register:function(e,t){e===me&&(o.current=t),e===de&&(i.current=t),e===pe&&(a.current=t)},position:c,openEmoticon:u,openImage:s,openSelected:m,closeImage:f,closeSelected:d,closeAll:p,prepare:h}),b=Object(K.a)(v,1)[0];return Object(l.useImperativeHandle)(t,(function(){return b})),n&&n.map((function(e){return Object(l.cloneElement)(e,{popoversController:b})}))})),ve=n(71),be=Object.assign;var ge=function(e){return f.a.createElement(ve.a,be({width:"21",height:"14",fill:"none"},e),f.a.createElement("path",{fill:"url(#A)",stroke:"#f6f6f6",d:"M7.486.504a6 6 0 100 12h7a6 6 0 100-12h-7z"}),f.a.createElement("g",{fill:"#935d14"},f.a.createElement("path",{d:"M8.459 9.431l2.465-5.366h-.916L8.401 7.751l-1.6-3.687h-.923L8.35 9.431h.109zm3.825 0V4.065h-.814v5.366h.814zm2.05 0V7.445h.284c.659 0 1.156-.153 1.491-.46s.502-.747.502-1.321c0-.496-.154-.887-.462-1.172s-.794-.427-1.458-.427h-1.178v5.366h.822zm.305-2.708h-.305V4.78h.378c.388 0 .664.09.829.27s.247.414.247.701c0 .268-.085.496-.254.686s-.468.285-.894.285z",fillRule:"evenodd"}),f.a.createElement("path",{d:"M8.459 9.431v.146h.094l.039-.085-.133-.061zm2.465-5.366l.133.061.095-.207h-.228v.146zm-.916 0v-.146h-.096l-.038.088.134.058zM8.401 7.751l-.134.058.134.309.134-.309-.134-.058zm-1.6-3.687l.134-.058-.038-.088h-.096v.146zm-.923 0v-.146h-.229l.096.208.133-.061zM8.35 9.431l-.133.061.039.085h.094v-.146zm3.934 0v.146h.146v-.146h-.146zm0-5.366h.146v-.146h-.146v.146zm-.814 0v-.146h-.146v.146h.146zm0 5.366h-.146v.146h.146v-.146zm2.865 0v.146h.146v-.146h-.146zm0-1.986v-.146h-.146v.146h.146zm-.822-3.38v-.146h-.146v.146h.146zm0 5.366h-.146v.146h.146v-.146zm.822-2.708h-.146v.146h.146v-.146zm0-1.942v-.146h-.146v.146h.146zM8.592 9.492l2.465-5.366-.266-.122L8.326 9.37l.266.122zm2.332-5.573h-.916v.293h.916v-.293zm-1.05.088L8.267 7.693l.268.117 1.607-3.687-.268-.117zM8.535 7.693l-1.6-3.687-.269.116 1.6 3.687.268-.116zM6.801 3.918h-.923v.293h.923v-.293zm-1.056.208l2.472 5.366.266-.122-2.472-5.366-.266.122zM8.35 9.577h.109v-.293H8.35v.293zm4.08-.146V4.065h-.293v5.366h.293zm-.146-5.512h-.814v.293h.814v-.293zm-.961.146v5.366h.293V4.065h-.293zm.146 5.512h.814v-.293h-.814v.293zm3.011-.146V7.445h-.293v1.986h.293zm-.146-1.839h.284v-.293h-.284v.293zm.284 0c.68 0 1.218-.158 1.589-.498l-.198-.216c-.297.273-.753.421-1.392.421v.293zm1.589-.498c.372-.341.549-.826.549-1.429h-.293c0 .545-.158.942-.454 1.214l.198.216zm.549-1.429c0-.529-.166-.962-.509-1.279l-.199.215c.272.252.415.6.415 1.064h.293zm-.509-1.279c-.347-.321-.877-.466-1.557-.466v.293c.648 0 1.09.14 1.358.388l.199-.215zM14.69 3.92h-1.178v.293h1.178V3.92zm-1.324.146v5.366h.293V4.065h-.293zm.146 5.512h.822v-.293h-.822v.293zm1.127-3.001h-.305v.293h.305v-.293zm-.159.146V4.78h-.293v1.942h.293zm-.146-1.796h.378v-.293h-.378v.293zm.378 0c.37 0 .597.087.721.223l.216-.198c-.205-.224-.532-.318-.937-.318v.293zm.721.223c.136.148.209.345.209.602h.293c0-.317-.092-.588-.286-.8l-.216.198zm.209.602a.85.85 0 01-.217.589l.218.195a1.14 1.14 0 00.292-.784h-.293zm-.217.589c-.128.143-.373.236-.785.236v.293c.441 0 .792-.097 1.003-.334l-.218-.195z"})),f.a.createElement("defs",null,f.a.createElement("linearGradient",{id:"A",x1:"1.986",x2:"19.986",y1:"12.004",y2:"12.004",gradientUnits:"userSpaceOnUse"},f.a.createElement("stop",{stopColor:"#f8e2c4"}),f.a.createElement("stop",{offset:"1",stopColor:"#f3bb6c"}))))};function Ce(e){var t=e.images,n=e.onClick,r=e.onReset,o=Object(l.useState)(!1),i=Object(K.a)(o,2),a=i[0],c=i[1],u=Object(ne.b)((function(){return c(!0)})),f=Object(ne.b)((function(){return c(!1)}));return Object(s.c)(l.Fragment,{children:[Object(s.c)("div",{onMouseEnter:u,onMouseLeave:f,css:{width:"110px",height:"110px",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:[Object(s.b)("img",{src:t[0].src,alt:""}),a&&Object(s.b)(ye,{onClick:n})]}),Object(s.b)("div",{className:"closeButton",onClick:r,css:function(e){return{color:e.colors.GBK06A}},children:Object(s.b)(ee.a,{})})]})}function ye(e){var t=e.onClick;return Object(s.b)("div",{css:{position:"absolute",width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.3)",display:"flex",alignItems:"center",justifyContent:"center",userSelect:"none",borderRadius:"4px","&:hover":{cursor:"pointer"}},onClick:t,children:Object(s.b)("div",{css:function(e){return{color:e.colors.GBK99B,lineHeight:"27px",width:"74px",borderRadius:"20px",borderColor:"#fefefe",borderWidth:"1px",borderStyle:"solid",fontSize:"12px",textAlign:"center"}},children:"更换图片"})})}var Oe=Object(l.forwardRef)((function(e,t){var n=e.showVipBadge,o=Object(r.a)(e,["showVipBadge"]);return Object(s.b)(M.a,Object.assign({as:X.a,zaType:"Button",zaEventType:"Click",zaBlock:"AppendImage",label:"插入图片",ref:t,icon:Object(s.c)(l.Fragment,{children:[Object(s.b)(te.a,{}),n&&Object(s.b)(ge,{css:{position:"absolute",transform:"translate(10px, -6.5px)",width:"20px",height:"13px"}})]})},o))})),je=Object(v.compose)(Object(h.connect)((function(e){return{isVip:Object(N.h)(e)}}),{showNotification:R.g,uploadImage:oe.b}),ie.a)((function(e){var t=e.popoversController,n=Object(l.useState)(fe),r=Object(K.a)(n,2),o=r[0],i=r[1],a=Object(l.useState)(!1),c=Object(K.a)(a,2),u=c[0],f=c[1],m=Object(l.useRef)();Object(l.useEffect)((function(){t.register(pe,m.current)}),[t]);var d=Object(l.useRef)(),p=Object(ne.b)((function(t){t.preventDefault(),(0,e.authRequired)((function(){var t,n=e.handleInputActive;e.hasPermission?(null===(t=d.current)||void 0===t||t.click(),n(!0)):f(!0)}))()})),h=function(){d.current&&(d.current.value=null)},v=function(){var t=e.handleImages,n=e.showNotification,r=e.resetUploadImg;t([]),n("图片上传失败","red"),r(),i(se)},b=function(t){var n=e.handleImages,r=e.updatePublishStatus;n([Object.assign({},t.payload,{url:t.payload.src})]),r(!1),h(),i(fe)},g=Object(ne.b)((function(n){var r=e.showNotification;return n?n.size>1024*ae.H*1024?(r("请上传小于 ".concat(ae.H,"M 的图片。"),"red"),h(),!1):(t.openImage(),void i(le)):(h(),!1)})),C=Object(ne.b)((function(t){var n=t.file;return(0,e.uploadImage)(n).then(b).catch(v)})),y=Object(ne.b)((function(){var n=e.resetUploadImg,r=void 0===n?Y.noop:n;t.closeImage(),r()})),O=e.images,j=e.disableButton,_=e.hasPermission,w=e.onPopoverOpen,R=e.isVip,k=Boolean(O.length)&&o===fe,I=R||!_;return Object(s.c)(l.Fragment,{children:[Object(s.b)(J.a,{className:"ImagePopover",arrowed:!0,ref:m,placement:"bottom",globalClose:!O.length,onOpen:w,onClick:p,toggler:Object(s.b)(Oe,{disabled:j,showVipBadge:I}),children:Object(s.c)("div",{className:"ImagePopover-thumbnail",children:[k&&Object(s.b)(Ce,{images:O,onClick:p,onReset:y}),o&&!k&&Object(s.b)("p",{className:"ImagePopover-uplodaStatus",children:o})]})}),Object(s.b)(Q.a,{accept:"image/png,image/jpeg",onRef:d,beforeUpload:g,customUpload:C}),Object(s.b)(re.b,{show:u,setShow:f,type:re.a.comment_img})]})})),_e=n(63);function we(e){var t=e.onClose,n=e.onSubmit;return Object(s.c)(_e.b,{className:"CommentCheckModal-wrapper",onClose:t,children:[Object(s.b)("div",{className:"CommentCheckModal-image"}),Object(s.b)("div",{className:"CommentCheckModal-title",children:"评论可能包含不友善内容"}),Object(s.b)("div",{className:"CommentCheckModal-content",children:"友善的交流是沟通的起点，请遵守知乎社区规范，认真友善发言"}),Object(s.c)("div",{className:"CommentCheckModal-button",children:[Object(s.b)(W.c,{className:"CommentCheckModal-submit",onClick:n,preset:"primary",children:"继续发布"}),Object(s.b)(W.c,{className:"CommentCheckModal-modify",onClick:t,preset:"primary",color:"blue",children:"返回修改"})]})]})}var Re=function(e){var t=e.url,n=e.title,r=e.onReset,o=void 0===r?Y.noop:r,i=e.popoversController,a=Object(l.useRef)();Object(l.useEffect)((function(){i.register(de,a.current)}),[i]);var c=Object(ne.b)((function(){i.closeSelected(),o()}));return Object(s.b)(J.a,{arrowed:!0,globalClose:!1,ref:a,preventCloseOnTarget:!0,placement:"bottom",toggler:Object(s.b)("div",{css:{height:"28px",transform:"translateX(18px)"}}),children:Object(s.c)("div",{css:{width:"140px",height:"143px",position:"relative"},children:[Object(s.b)("img",{src:t,alt:n,css:{width:"100px",height:"100px",padding:"20px"}}),Object(s.b)("div",{onClick:c,css:{position:"absolute",width:"16px",height:"16px",right:"8px",top:"8px",".Zi--Close":{width:"16px",height:"16px"}},children:Object(s.b)(ee.a,{})})]})})},ke=n(1301),Ie=n(1221),Ne=Object(l.forwardRef)((function(e,t){var n=e.onInsertEmoji,o=void 0===n?Y.noop:n,i=e.onAddSticker,a=void 0===i?Y.noop:i,c=e.vipEnabled,u=void 0!==c&&c,l=Object(r.a)(e,["onInsertEmoji","onAddSticker","vipEnabled"]),f=Object(ne.b)((function(e,t){"emoji"===t?o(e.placeholder):a(e)}));return Object(s.b)(J.a,Object.assign({arrowed:!0,preventCloseOnTarget:!0},l,{ref:t,children:Object(s.b)(Ie.a,{onSelectEmoticon:f,css:{border:"none"},vipEnabled:u})}))}));var Se=Object(ie.a)((function(e){var t=e.disabled,n=e.onInsertEmoji,r=void 0===n?Y.noop:n,o=e.onAddSticker,i=void 0===o?Y.noop:o,a=e.popoversController,c=Object(l.useRef)();Object(l.useEffect)((function(){a.register(me,c.current)}),[a]);var u=Object(ne.b)((function(){r.apply(void 0,arguments),setTimeout(a.position,400)})),f=Object(ne.b)((function(){a.openSelected(),i.apply(void 0,arguments),setTimeout(a.position,400)})),m=Object(ne.b)((function(t){(0,e.authRequired)([Y.noop,function(){t.preventDefault()}])()}));return Object(s.b)(Ne,{ref:c,onInsertEmoji:u,onAddSticker:f,vipEnabled:!0,onClick:m,toggler:Object(s.b)(X.a,{label:"插入表情",icon:ke.a,disabled:t,onMouseEnter:a.prepare})})}));function Pe(){var e=Object(L.a)(["回复","",""]);return Pe=function(){return e},e}function xe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}function Ee(e){var t=e.dynamicImageUrl||e.staticImageUrl,n=e.id,r=e.title||"[sticker]";return'<a class="comment_sticker" href="'.concat(t,'" data-sticker-id="').concat(n,'">').concat(r,"</a>")}function Ae(e){var t=e.url,n=e.dataRawwidth,r=e.dataRawheight,o=e.title,i=t.includes(".gif")?"comment_gif":"comment_img";return'<a class="'.concat(i,"\" href='").concat(t,"' data-width='").concat(n||"","' data-height='").concat(r||"","'>[").concat(o||"图片","]</a>")}var Le=function(e){Object(a.a)(n,e);var t=xe(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).zaRef=Object(l.createRef)(),e.state={active:!1,hasNoContent:!0,shown:!1,submitting:!1,value:{toHTML:ue},images:[],uploadIsFetchingNum:0,stickers:[],toggleInputStyle:!1,commentTextLength:0,showCommentCheckModal:!1},e.isClubPostPage=function(){var t=e.props,n=t.type,r=(t.replyTo||{}).resourceType;return"club_post"===n||"club_post"===r},e.handleCheckClosed=function(){e.setState({showCommentCheckModal:!1}),e.trackCommentCheckClick("返回修改"),e.input.focus()},e.handleCommentCheck=function(){e.setState({showCommentCheckModal:!1}),e.handleSubmit(!1),e.trackCommentCheckClick("继续发布")},e.handleButtonSubmit=function(){e.handleSubmit(!0,"0"!==e.props.autoCheckAb)},e.handleSubmit=e.context.authRequired((function(t,n){return e.context.realNameRequired((function(){var r=e.props,o=r.replyTo,i=r.onSubmit,a=r.onCancel,c=r.rootCommentId,u=r.isConversation,s=r.zaInfo.zaSubmitCommentId;if(!e.state.submitting){e.setState({submitting:!0});var l=e.state,f=l.images,m=l.stickers,d=e.input.toHTML();if(d||f.length||m.length){var p;d&&e.saveLocalComment();var h=d;f.length&&(h+=Ae(f[0])),m.length&&(h+=Ee(m[0]));var v,b=i(h,o,{rootCommentId:c,isConversation:u},t,n);if(b.then)b.then((function(){var t;(a&&a(),e.input)?(e.input.reset(),null===(t=e.popoverControllerRef.current)||void 0===t||t.closeAll(),e.resetImage(),e.setState({value:{toHTML:ue}},(function(){return e.saveLocalComment()}))):e.saveLocalComment({toHTML:ue})})).catch((function(t){40313===t.payload.code&&e.setState({showCommentCheckModal:!0})})).finally((function(){e.setState({submitting:!1})}));else e.setState({submitting:!1}),a&&a(),e.input.reset(),null===(v=e.popoverControllerRef.current)||void 0===v||v.closeAll();D.a.trackEvent(Object(B.a)(e),Object.assign({action:"Comment",element:"Button"},s&&{id:s})),null===(p=e.zaRef.current)||void 0===p||p.trackEvent({eventType:"Click",action:"Comment",elementLocation:{type:"Button"}})}}}))()}),e.isClubPostPage()?ae.L.reply_club:void 0,R.b),e.handleCommentShow=e.context.authRequired((function(){e.setState({shown:!0}),e.hiddenInput.focus()})),e.handleCommentHide=function(){e.setState({shown:!1})},e.initLocalComment=function(){var t=e.props,n=t.type,r=t.id;if(n&&r){var o=U.a.get(ce)||[],i="".concat(n,"_").concat(r),a=o.find((function(e){return e.key===i})),c=a&&a.value;c&&e.setState({value:{toHTML:function(){return c}},hasNoContent:!1})}},e.saveLocalComment=function(t){var n=e.props,r=n.type,o=n.id;if(r&&o){var i=t?t.toHTML():e.state.value.toHTML(),a="".concat(r,"_").concat(o),c=(U.a.get(ce)||[]).filter((function(e){return e.key!==a})),u=i?[].concat(Object(T.a)(c.slice(0,4)),[{key:a,value:i}]):c;U.a.set(ce,u)}},e.handleChange=function(t){var n=e.state,r=n.stickers,o=n.images;r.length||o.length?e.setState({value:t}):e.setState({value:t,hasNoContent:t.isEmpty}),e.handleInputChange()},e.handleFocus=function(){e.setState({active:!0},e.handleInputChange)},e.handleBlur=function(){var t=e.state,n=t.stickers,r=t.images;n.length||r.length||(e.setState({active:!1}),e.handleInputChange())},e.handleMobileComment=function(){e.handleSubmit(),e.handleCommentHide()},e.handleInputChange=function(){var t,n,r=Object(z.findDOMNode)(e.input);r&&(r.getBoundingClientRect().height>40?e.setState({toggleInputStyle:!0}):e.setState({toggleInputStyle:!1}),n="innerText"in document?r.innerText.length:r.textContent.length,e.setState({commentTextLength:n}),null===(t=e.popoverControllerRef.current)||void 0===t||t.position())},e.handleImages=function(t){var n;e.setState({images:t},null===(n=e.popoverControllerRef.current)||void 0===n?void 0:n.position)},e.handleInputActive=function(t){e.setState({active:t})},e.updatePublishStatus=function(t){e.setState({hasNoContent:t})},e.resetStickers=function(){var t=e.state.value,n=void 0===t.isEmpty||t.isEmpty;e.setState({stickers:[],hasNoContent:n})},e.resetImage=function(){e.resetStickers(),e.resetUploadImg()},e.resetUploadImg=function(){var t=e.state.value,n=void 0===t.isEmpty||t.isEmpty;e.setState({images:[],hasNoContent:n})},e.insertEmoji=function(t){var n;null===(n=e.input)||void 0===n||n.handleCommand("insert-text:".concat(t))},e.addSticker=function(t){e.setState({stickers:[t],images:[],hasNoContent:!1})},e.handleImagePopoverOpen=function(){e.setState({stickers:[]})},e.focusInput=function(t){t.preventDefault(),e.input.focus()},e.popoverControllerRef=Object(l.createRef)(),e.renderInput=function(t){var n,r,o,i=t.placeholder,a=t.className,c=e.props,u=c.autoFocus,l=c.commentWithPicPermission.commentWithPic,f=e.state,m=f.images,d=f.stickers,p=f.toggleInputStyle,h=f.active,v=f.hasNoContent,b=f.commentTextLength;return Object(s.c)("div",{className:g()("CommentEditorV2-inputWrap",{"CommentEditorV2-inputWrap--change":p,"CommentEditorV2-inputWrap--active":h||!v}),onClick:function(e){e.nativeEvent.stopImmediatePropagation()},children:[Object(s.b)(G.b,{keyMap:{FOCUS_COMMENT_INPUT:"shift+c"},handlers:{FOCUS_COMMENT_INPUT:e.focusInput}}),Object(s.b)(Z.a,{className:g()("CommentEditorV2-input",a),defaultValue:e.state.value.toHTML(),allowMention:!0,allowPasteRichText:!1,autoFocus:u,outputBlockType:"div",ref:function(t){e.input=t},placeholder:i,onFocus:e.handleFocus,onChange:e.handleChange,onSubmit:e.handleButtonSubmit,minRows:5}),Object(s.c)("div",{className:g()("CommentEditorV2-inputUpload",{"CommentEditorV2-inputUpload--FlexEnd":p,"CommentEditorV2-inputUpload--SpaceBetween":p&&b>980}),children:[p&&b>980&&Object(s.b)(H.a,{className:"CommentEditorV2-MaxLength",current:b,max:1e3}),Object(s.b)("div",{className:"CommentEditorV2-popoverWrap",children:Object(s.c)(he,{ref:e.popoverControllerRef,children:[Object(s.b)(je,{images:m,resetUploadImg:e.resetUploadImg,handleInputActive:e.handleInputActive,updatePublishStatus:e.updatePublishStatus,handleImages:e.handleImages,onPopoverOpen:e.handleImagePopoverOpen,hasPermission:l||e.isClubPostPage()}),Object(s.b)(Re,{url:(null===(n=d[0])||void 0===n?void 0:n.dynamicImageUrl)||(null===(r=d[0])||void 0===r?void 0:r.staticImageUrl),title:null===(o=d[0])||void 0===o?void 0:o.title,onReset:e.resetStickers}),Object(s.b)(Se,{onAddSticker:e.addSticker,onInsertEmoji:e.insertEmoji,preparePopoverIndex:e.preparePopoverIndex})]})})]})]})},e}return Object(i.a)(n,[{key:"trackCommentCheckClick",value:function(e){D.a.trackEvent(null,{id:7497,action:"Click",path:[{module_name:"图文弹窗"}]},{button:{text:e}})}},{key:"componentDidMount",value:function(){this.initLocalComment(),document.addEventListener("click",this.handleBlur)}},{key:"componentWillUnmount",value:function(){this.saveLocalComment(),document.removeEventListener("click",this.handleBlur)}},{key:"render",value:function(){var e=this.props,t=e.replyTo,n=e.commentNeedsReview,r=e.className,o=e.ownerAuthorIsOrg,i=e.ownerAuthorIsBrand,a=this.state,c=a.active,u=a.hasNoContent,l=a.submitting,f=a.showCommentCheckModal,m=o?"机构":"作者",d={preset:"primary",color:"blue",children:"发布",disabled:u||l},p="写下你的评论...";if(n&&(p=i?"已开启预审评论，评论由品牌筛选后公开":o?"已开启预审评论，评论由机构筛选后公开":"评论由作者筛选后显示"),t&&t.author){var h=t.author,v=h.member,b=h.mask,C=(null==v?void 0:v.name)||(null==b?void 0:b.name)||t.author.name;p=F()(Pe(),C,n?"，评论由".concat(m,"筛选后公开"):"")}return Object(s.c)("div",{children:[Object(s.b)(M.d,{ref:this.zaRef}),Object(s.c)("div",{className:g()(r,"CommentEditorV2--normal",{"CommentEditorV2--active":c||!u}),children:[this.renderInput({placeholder:p}),Object(s.b)(W.c,Object.assign({},d,{className:"CommentEditorV2-singleButton",onClick:this.handleButtonSubmit}))]}),f&&Object(s.b)(we,{onClose:this.handleCheckClosed,onSubmit:this.handleCommentCheck})]})}}]),n}(l.Component);Le.propTypes={className:d.a.string,defaultActive:d.a.bool,replyTo:d.a.object,inCommentItem:d.a.bool,commentNeedsReview:d.a.bool,canComment:d.a.object,onCancel:d.a.func,onSubmit:d.a.func.isRequired,zaInfo:d.a.object},Le.defaultProps={defaultActive:!1,replyTo:null,inCommentItem:!1,autoFocus:!0,ownerAuthorIsOrg:!1,ownerAuthorIsBrand:!1,zaInfo:{}},Le.contextTypes={authRequired:d.a.func,realNameRequired:d.a.func};var Te=Object(v.compose)(p.withRouter,Object($.a)(),Object(h.connect)((function(e){return{stickers:e.commentsV2.stickers||[],commentWithPicPermission:e.commentsV2.commentWithPicPermission||{}}}),{showNotification:R.g}))(Le),Be=n(1307),ze=n(1233),De=n(1308),Me=n(77),Ve=n(1166),Fe=n(1186),qe=n(1132),Ue=n(1438),We=n(1126),He=n(1189),Ge=n(1175),$e=n(1159),Ze=n(21),Ke=function(e){return f.a.createElement(Ze.a,e,f.a.createElement("path",{d:"M11.31.813c2.475.403 3.584 2.211 2.827 5.746l-.062.275-.043.173h3.689c2.17 0 3.694 1.704 3.487 3.798l-.024.197-.034.194-.145.732-.025.102-1.823 6.32c-.4 1.384-1.741 2.601-3.085 2.841l-.184.027-.126.007-.166-.001-8.152-.638-.15-.018-.149-.03-.014-.004H3.385a2.612 2.612 0 0 1-2.591-2.277l-.016-.169-.005-.165V9.615A2.612 2.612 0 0 1 3.219 7.01l.166-.006h2.904l.103-.123.476-.59c1.413-1.77 1.883-2.496 2.082-3.3l.025-.11.04-.207c.025-.153.034-.269.037-.365a1.638 1.638 0 0 1 1.52-1.524c.215-.021.463-.016.738.029zm-.324 1.936l-.012.097-.049.3c-.221 1.193-.677 2.016-2.09 3.824l-.2.253-.613.767-.21.255-.187.21V18.63l8.078.632h.032c.463-.052 1.126-.584 1.425-1.178l.062-.138.048-.14 1.809-6.259.145-.732c.2-1.007-.38-1.77-1.36-1.838l-.143-.005h-4.988a.97.97 0 0 1-.935-1.304l.022-.067.015-.046.217-.718c.817-2.888.38-3.802-.943-4.065l-.123-.022zM5.75 18.57V8.966l-2.365.001a.648.648 0 0 0-.642.553l-.007.095v8.308c0 .325.24.595.553.641l.096.007H5.75z"}))};Ke.defaultProps={name:"LikeOutline"};var Ye=Ke,Je=function(e){return f.a.createElement(Ze.a,e,f.a.createElement("path",{d:"M11.93 2C6.447 2 2 6.446 2 11.93 2 17.438 6.467 22 11.93 22c.986 0 2.163-.252 3.548-.745a2.6 2.6 0 0 1 1.556-.059l2.454.67a1.936 1.936 0 0 0 2.377-2.378l-.669-2.453a2.6 2.6 0 0 1 .06-1.557c.492-1.385.744-2.562.744-3.547C22 6.467 17.437 2 11.93 2zm0 2C16.343 4 20 7.581 20 11.93c0 .725-.206 1.69-.63 2.878l-.085.268a4.6 4.6 0 0 0-.018 2.485l.638 2.344-2.344-.638a4.6 4.6 0 0 0-2.753.104c-1.188.423-2.153.629-2.877.629C7.58 20 4 16.342 4 11.93A7.93 7.93 0 0 1 11.93 4z"}))};Je.defaultProps={name:"SpeechBalloonOutline"};var Xe=Je,Qe=n(110),et=n(137),tt=n(585),nt=n(147),rt=n(263),ot=n(399),it=n(404),at=n(218),ct=n(261),ut=n(56),st=n(217);function lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var ft=function(e){Object(a.a)(n,e);var t=lt(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={previewImg:null},e.handlePreview=function(t){var n=t.target,r=e.props.onPreviewImage;"function"==typeof r?r(t).catch((function(){e.setState({previewImg:n})})):e.setState({previewImg:n})},e}return Object(i.a)(n,[{key:"mount",value:function(){var e=this;this.imagesGifNode=this.root.getElementsByClassName("comment_gif"),this.imagesNode=this.root.getElementsByClassName("comment_img"),this.imagesStickerNode=this.root.getElementsByClassName("comment_sticker"),this.imgNode=this.root.getElementsByClassName("origin_image zh-lightbox-thumb"),this.imagesNodes=Array.from([].concat(Object(T.a)(this.imagesGifNode),Object(T.a)(this.imagesNode),Object(T.a)(this.imagesStickerNode),Object(T.a)(this.imgNode))).map((function(t){var n=t.dataset||{},r=n.width,o=n.height,i=n.rawwidth,a=n.rawheight,c=Number(r||i),u=Number(o||a),s=document.createElement("div");s.className="Richtext-content_img",t.parentNode.replaceChild(s,t);var l=t.getAttribute("href")||t.getAttribute("src"),f=new Image,m=t.getAttribute("class");return"comment_sticker"!==m&&s.addEventListener("click",e.handlePreview),f.className=m,f.src=l,f.dataset.original=Object(ut.imgUrl)(l,"r"),f.dataset.rawwidth=c,f.onload=function(){c===u||"comment_sticker"===m?s.classList.add("Richtext-content_img-square"):c>u?s.classList.add("Richtext-content_img-square--wideShape"):s.classList.add("Richtext-content_img-square--highShape"),s.appendChild(f)},s}))}},{key:"unmount",value:function(){this.imagesNodes&&this.imagesNodes.forEach((function(e){Object(z.unmountComponentAtNode)(e)}))}},{key:"componentDidMount",value:function(){this.mount()}},{key:"componentWillUpdate",value:function(e){this.props.html!==e.html&&this.unmount()}},{key:"componentDidUpdate",value:function(e){e.html!==this.props.html&&this.mount()}},{key:"componentWillUnmount",value:function(){this.unmount()}},{key:"render",value:function(){var e=this,t=this.state.previewImg,n=this.props,o=n.html,i=n.className,a=n.prefix,c=Object(r.a)(n,["html","className","prefix"]);return Object(s.c)("div",{className:g()("CommentRichText",i),ref:function(t){return e.root=t},children:[a,Object(s.b)(st.a,Object.assign({html:o},c)),t&&Object(s.b)(ct.a,{className:"CommentRichText-ImageView",img:t,onClose:function(){return e.setState({previewImg:null})}})]})}}]),n}(l.Component);function mt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var dt=function(e){Object(a.a)(n,e);var t=mt(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).zaRef=Object(l.createRef)(),e.state={isReplying:!1,deleteModal:!1},e.toggleReply=e.context.authRequired((function(){e.setState({isReplying:!e.state.isReplying})}),"club_post"===e.props.type?ae.L.reply_club:void 0,R.b),e.like=e.context.authRequired((function(t){var n=e.props;(0,n.onLike)(n.comment.id,t),e.zaRef.current.trackEvent({action:"Upvote",eventType:"Click",elementLocation:{type:"Button"}})}),ae.L.like,R.b),e.dislike=e.context.authRequired((function(){var t=e.props;(0,t.onDislike)(t.comment.id),e.zaRef.current.trackEvent({action:"UnUpvote",eventType:"Click",elementLocation:{type:"Button"}})}),ae.L.like,R.b),e.delete=function(){var t=e.props;return(0,t.onDelete)(t.comment.id)},e.feature=function(t){var n=e.props,r=n.onFeature,o=n.comment.id;r(t?"".concat(o,"_featured"):o)},e.collapse=function(){var t=e.props;(0,t.onCollapse)(t.comment.id)},e.approve=function(){var t=e.props;(0,t.onApprove)(t.comment.id)},e.reject=function(){var t=e.props;(0,t.onReject)(t.comment.id)},e.showConversation=function(t){var n=e.props;(0,n.onShowConversation)({commentId:n.comment.id,isAnchorComments:t})},e.stopReply=function(){e.setState({isReplying:!1})},e.closeReportModal=function(e){if(e){var t=e.result.payload,n=t&&t.message||t&&t.code&&"举报失败";e.commentDeleteResult&&!(e.commentDeleteResult.payload||{}).code?rt.b.showModal({reportText:n}):t&&t.sarcasmRecommend||Object(nt.b)(n||"举报成功")}},e.handleCloseDelete=function(){return e.setState({deleteModal:!1})},e.handleDelete=function(){return e.setState({deleteModal:!0})},e.handleClick=function(t,n){var r=e.props.parent,o=r.type,i=r.id;Object(Qe.e)(Object(et.a)({type:o,id:i},{utm_campaign:"routine",utm_medium:"internal",utm_source:"video",utm_content:n})),t.stopPropagation(),t.preventDefault()},e}return Object(i.a)(n,[{key:"renderRoleInfo",value:function(e,t){return"normal"===e?null:Object(s.b)("span",{className:"CommentItemV2-roleInfo",children:"ancestor"===e||"author"===e&&"question"===t?" (提问者) ":" (作者) "})}},{key:"renderReplyTo",value:function(){var e=this.props.comment,t=e.replyToAuthor,n=e.resourceType;if(!t)return null;var r=t.member,o=t.role,i=t.mask;return Object(s.c)(l.Fragment,{children:[Object(s.b)("span",{className:"CommentItemV2-reply",children:"回复"}),Object(s.b)(ot.a,{noBadge:!0,noHoverCard:!0,user:r||i||{}}),this.renderRoleInfo(o,n)]})}},{key:"renderItem",value:function(){var e,t=this,n=this.props,r=n.isConversation,o=n.ownerAuthorIsOrg,i=n.parent,a=i.canComment,c=(a=void 0===a?{status:!0}:a).status,u=i.questionType,f=n.parent,m=n.commentNeedsReview,d=n.comment,p=n.onReply,h=n.status,v=n.type,b=n.canOperate,C=n.commentPattern,y=n.rootCommentId,O=n.byComment,j=n.isReverseAndStatusOpen,_=n.hasRecommend,w=n.permission.canBrandAdminEdit,R=n.showCollapsed,k=n.isMobile,I=this.state.isReplying,N=d.id,S=d.author,P=d.richText,x=d.content,E=d.voteCount,A=d.replyToAuthor,L=d.isAuthor,T=d.createdTime,B=d.featured,z=d.voting,D=d.reviewing,M=d.disliked,V=d.resourceType,F=d.childCommentCount,q=d.allowDelete,U=d.allowVote,H=d.canRecommend,G=d.canCollapse,$=d.collapsedReason,Z=void 0===$?"":$,K=d.isDelete,Y=d.collapsed,J=d.top,X=Y&&!R,Q=X?"该评论已被折叠":K?function(e){var t=e.content,n=e.deleteReason;if(n){var r=JSON.stringify({button:{text:String(n.reasonId)}}).replace(/"/g,"&quot;");return'<a href="'.concat(n.url,'" target="_blank" data-za-detail-view-id="7641" data-za-extra="').concat(r,'">').concat(n.tip,"</a>")}return t}(d):P||x,ee=K||X,te=S||{},ne=te.role,re=te.mask,oe=(null==S?void 0:S.member)||re,ie=Boolean(A),ae=B&&(F>0||ie)&&!r||O&&ie||j&&ie,ce=L||q&&("question"!==v||"commercial"===u),ue=Object(s.c)("div",{className:"CommentItemV2-footer",children:[Object(s.c)(W.c,{className:g()("CommentItemV2-likeBtn",z&&"is-liked"),preset:"plain",onClick:this.like,disabled:L||!c,children:[Object(s.b)(Ve.a,{style:{marginRight:5},center:!0,size:16}),E>0?E:"赞"]}),Y&&Z&&Object(s.c)("div",{className:"CommentItemV2-walleTag",children:["阴阳怪气自动折叠"===Z&&Object(s.b)(Fe.a,{size:16,className:"CommentItemV2-walleIcon"}),Z]}),ae&&Object(s.c)(W.c,{preset:"plain",className:"CommentItemV2-talkBtn",onClick:function(){return t.showConversation(ie)},children:[Object(s.b)(qe.a,{style:{marginRight:5},center:!0,size:16}),"查看回复"]}),!L&&c&&!Y&&Object(s.c)(W.c,{preset:"plain",className:g()({"CommentItemV2-hoverBtn":!I}),onClick:this.toggleReply,children:[Object(s.b)(Ue.a,{style:{marginRight:5},center:!0,size:16}),I?"取消回复":"回复"]}),H&&!_&&b&&Object(s.c)(W.c,{className:g()({"CommentItemV2-hoverBtn":!L&&!I}),preset:"plain",onClick:function(){return t.feature(B)},children:[Object(s.b)(We.a,{style:{marginRight:5},center:!0,size:16}),B?"取消推荐":"推荐"]}),G&&!L&&Object(s.c)(W.c,{className:g()({"CommentItemV2-hoverBtn":!L&&!I}),preset:"plain",onClick:this.collapse,children:[Object(s.b)(He.a,{style:{marginRight:5},center:!0,size:14}),Y?"取消折叠":"折叠"]}),U&&!L&&b&&Object(s.c)(W.c,{className:g()({"CommentItemV2-hoverBtn":!I}),preset:"plain",onClick:this.dislike,disabled:!c,children:[Object(s.b)(Ve.a,{style:{transform:"rotate(180deg)",marginRight:5},size:16,center:!0}),M?"取消踩":"踩"]}),L||Object(s.c)(l.Fragment,{children:[Object(s.b)(at.a,{id:N,type:"comment",className:"CommentItemV2-hoverBtn",onModalShown:function(e,n){e||t.closeReportModal(n)},modalProps:Object.assign({},ce&&{onDeleteComment:this.delete},{notification:{failure:tt.a}})}),"question"===v&&"commercial"===u&&w&&Object(s.c)(W.c,{className:"CommentItemV2-hoverBtn",preset:"plain",onClick:this.reject,children:[Object(s.b)(He.a,{style:{marginRight:5},center:!0,size:16}),"隐藏"]})]}),ce&&Object(s.c)(W.c,{className:g()({"CommentItemV2-hoverBtn":!L&&!I&&!I}),preset:"plain",onClick:this.handleDelete,children:[Object(s.b)(Ge.a,{style:{marginRight:5},center:!0,size:16}),"删除"]}),Object(s.b)(rt.a,{shown:this.state.deleteModal,id:N,onDelete:this.delete,onClose:this.handleCloseDelete})]});return e=I?Object(s.c)("div",{children:[ue,Object(s.b)(Te,{type:"comment",id:N,commentNeedsReview:m,className:"CommentItemV2-editor",defaultActive:!0,replyTo:d,onCancel:this.stopReply,onSubmit:p,rootCommentId:y,isConversation:r})]}):"reviewing"===h?Object(s.c)("div",{className:"CommentItemV2-footer",children:[Object(s.c)(W.c,{preset:"plain",onClick:this.approve,children:[Object(s.b)($e.a,{style:{marginRight:5},center:!0,size:14}),"公开"]}),Object(s.c)(W.c,{className:"CommentItemV2-hoverBtn",preset:"plain",onClick:this.handleDelete,children:[Object(s.b)(Ge.a,{style:{marginRight:5},center:!0,size:16}),"删除"]}),Object(s.b)(rt.a,{shown:this.state.deleteModal,id:N,onDelete:this.delete,onClose:this.handleCloseDelete})]}):ue,Object(s.c)("div",{children:[Object(s.c)("div",{className:"CommentItemV2-meta",children:[oe&&Object(s.b)(it.a,{className:"CommentItemV2-avatar",noHoverCard:"fixed"===C||"club_post"===v,user:oe}),oe&&Object(s.b)(ot.a,{noBadge:!0,noHoverCard:!0,user:oe}),this.renderRoleInfo(ne,V),this.renderReplyTo(),J&&Object(s.b)("span",{className:"CommentItemV2-officialTop",children:"官方置顶"}),D&&Object(s.b)(He.a,{className:"CommentItemV2-reviewing","data-tooltip":"".concat(!1===o?"评论未公开，由作者筛选后显示":"已开启预审评论，评论由机构筛选后公开"),center:!0,size:14}),Object(s.b)("span",{className:"CommentItemV2-time",children:Object(Me.toSmartString)(T)})]}),Object(s.c)("div",{className:"CommentItemV2-metaSibling",children:[Object(s.b)(ft,{className:g()("CommentItemV2-content",{"CommentItemV2-shield":ee}),html:Q}),"zvideo"===f.type&&k&&Object(s.c)("div",{className:"CommentItemV2-zvideoFooter",children:[Object(s.c)("div",{onClick:function(e){return t.handleClick(e,"agree")},children:[E>0&&E,z?Object(s.b)(Ve.a,{style:{marginRight:20,marginLeft:5},center:!0,size:14}):Object(s.b)(Ye,{style:{marginRight:20,marginLeft:5},center:!0,size:14})]}),Object(s.b)("div",{onClick:function(e){return t.handleClick(e,"reply")},children:Object(s.b)(Xe,{center:!0,size:14})})]}),!ee&&e]})]})}},{key:"render",value:function(){var e=this.props,t=e.comment,n=e.onRef;return Object(s.c)(M.b,{content:{type:"Comment",id:String(t.id)},children:[Object(s.b)(M.d,{ref:this.zaRef}),Object(s.b)("div",{className:"CommentItemV2",ref:n,children:this.renderItem()})]})}}]),n}(l.Component);dt.propTypes={comment:d.a.object.isRequired,parent:d.a.object.isRequired,commentNeedsReview:d.a.bool,type:d.a.string,isConversation:d.a.bool,onLike:d.a.func.isRequired,onShowConversation:d.a.func,onReply:d.a.func,onFeature:d.a.func,onDelete:d.a.func.isRequired,onCollapse:d.a.func,commentPattern:d.a.string,showCollapsed:d.a.bool},dt.contextTypes={currentUser:d.a.object,authRequired:d.a.func};var pt=Object(v.compose)(p.withRouter,Object(h.connect)((function(e){return{isWechat:e.env.userAgent.Wechat,permission:Object(S.l)(e),isMobile:e.env.userAgent.Mobile}})))(dt),ht=n(4);function vt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var bt=function(e){Object(a.a)(n,e);var t=vt(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={},e.handleClick=function(){var t=e.props,n=t.loadRestComments,r=t.onShowConversation,o=t.comment,i=o.id,a=o.childCommentCount,c=a<=5&&a>2;(c?n:r)({commentId:i}),c&&e.setState(Object(ht.a)({},"hide_".concat(i),!0))},e.handleRef=function(t){var n=e.props.onRef;"function"==typeof n&&n(t)},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.comment,n=t.id,r=t.childCommentCount,o=e.isFetching,i=e.className,a=this.state["hide_".concat(n)],c=r<=5&&r>2?"展开其他 ".concat(r-2," 条回复"):"查看全部 ".concat(r," 条回复");return Object(s.c)("div",{className:i,ref:this.handleRef,children:[!a&&Object(s.b)("div",{className:"CommentMoreReplyButton",children:Object(s.b)(W.c,{preset:"plain",onClick:this.handleClick,children:c})}),o&&Object(s.b)(j.a,{className:"CommentMoreReplyButton",small:!0})]})}}]),n}(l.Component);function gt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}bt.propTypes={comment:d.a.object.isRequired,isFetching:d.a.bool,onShowConversation:d.a.func,loadRestComments:d.a.func};var Ct=function(e){Object(a.a)(n,e);var t=gt(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).loadRestComments=function(t){var n=t.commentId;(0,e.props.loadConversation)({id:n,isLoadRest:!0})},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.parent,n=t.type,r=t.author,o=(r=void 0===r?{isOrg:!1}:r).isOrg,i=e.parent,a=e.commentNeedsReview,c=e.onShowConversation,u=e.status,f=e.onItemLike,m=e.onItemDelete,d=e.onItemCollapse,p=e.onItemDislike,h=e.onItemApprove,v=e.onItemReject,b=e.canOperateItem,C=e.commentPattern,y=e.conversation,O=void 0===y?{}:y,j=e.entities,_=e.byComment,w=e.isReverseAndStatusOpen,R=e.comment,k=e.onReply,I=e.onFeature,N=e.ids,S=e.showCollapsed,P=R.id,x=R.featured,E=R.childComments,L=void 0===E?[]:E,T=R.childCommentCount,B=void 0===T?0:T,z=x?"".concat(P,"_featured"):"".concat(P),D=!x&&N.includes("".concat(P,"_featured")),M=Boolean(L.length)&&!w,V=B<=5&&B>2,F=L.map((function(e){return j.comments[e]})).map(A),q=!x&&B>2&&!w,U=(V&&O[P]||{isFetching:!1}).isFetching;return Object(s.c)(l.Fragment,{children:[Object(s.b)("li",{className:g()({"NestComment--rootCommentNoChild":!M,"NestComment--rootComment":M}),children:Object(s.b)(pt,{comment:R,status:u,type:n,parent:i,canOperate:b,commentNeedsReview:a,onShowConversation:c,ownerAuthorIsOrg:o,onLike:f,onReply:k,onFeature:I,onDelete:m,onCollapse:d,onDislike:p,onApprove:h,onReject:v,commentPattern:C,rootCommentId:P,byComment:_,isReverseAndStatusOpen:w,hasRecommend:D,showCollapsed:S},z)},z),M&&F.map((function(e){var t=e.id,r=e.featured,l=r?"".concat(t,"_featured"):"".concat(t),g=!r&&N.includes("".concat(t,"_featured"));return Object(s.b)("li",{className:"NestComment--child",children:Object(s.b)(pt,{comment:e,status:u,type:n,parent:i,canOperate:b,commentNeedsReview:a,onShowConversation:c,ownerAuthorIsOrg:o,onLike:f,onReply:k,onFeature:I,onDelete:m,onCollapse:d,onDislike:p,onApprove:h,onReject:v,commentPattern:C,rootCommentId:P,hasRecommend:g,showCollapsed:S},l)},l)})),q&&Object(s.b)(bt,{comment:R,isFetching:U,onShowConversation:c,loadRestComments:this.loadRestComments})]})}}]),n}(l.Component),yt=Object(v.compose)(Object(h.connect)(null,{loadConversation:C.h}))(Ct);function Ot(e){var t=e.id,n=e.replyTo,r=e.isConversation;if(e.isNotification)return{type:"notification"};if(r)return{type:"conversation"};if(!n)return{type:"comment"};var o=n.featured,i=n.replyToAuthor,a=n.id;return t===a&&o?i?{type:"replyToSubFeatured"}:{type:"replyToFeatured"}:t!==a||i?t!==a&&i?{type:"replyToSubCommon"}:{type:"comment"}:{type:"replyToCommon"}}function jt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var _t=function(e){Object(a.a)(n,e);var t=jt(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={collapsed:!0,current:1},e.commentsWithPaginationElRef=Object(l.createRef)(),e.load=function(t,n,r){if(!e.props.isFetching&&!e.props.parent.adminClosedComment){var o=t||e.props,i=o.order,a=o.status,c=o.parent,u=c.id,s=c.type,l=o.commentPattern,f=o.needLoadCommentPermission,m=o.loadComments,d=o.notificationId,p=o.loadNotificationComments;if(d)return p(d);f&&e.loadCommentPermission(s,u),m(s,u,{order:i,isPrevious:n,commentPattern:l,status:r?"collapsed":a},r)}},e.addComment=function(t,n,r,o,i){var a=r.rootCommentId,c=r.isConversation,u=e.props,s=u.parent,l=s.id,f=s.type,m=u.commentId,d=u.addComment,p=u.notificationId;return d({parentType:f,parentId:l,content:t,replyTo:n,conversationId:m,rootCommentId:a,isConversation:c,notificationId:p,replyType:Ot({id:a,replyTo:n,isConversation:c,isNotification:Boolean(p)}).type,useStrictMode:o,enableUnfriendlyCheck:i})},e.featureItem=function(t){(0,e.props.onItemFeature)(t,e.lastFeaturedIndex)},e.handleOpenCollapsed=function(){e.setState({collapsed:!1}),e.load(e.props,!1,!0)},e.handlePageSelect=function(t){var n=e.props.onPaginationClick,r=e.state.current;n&&n(r,t),e.commentsElement.scrollIntoView(),e.setState({current:t}),e.loadByPagination(t)},e.loadByPagination=function(t,n){var r=n||e.props,o=r.order,i=r.status,a=r.parent,c=a.id,u=a.type,s=r.commentPattern,l=r.needLoadCommentPermission,f=r.loadComments;l&&e.loadCommentPermission(u,c),f(u,c,{order:o,isPrevious:!1,status:i,commentPattern:s,current:t})},e.renderComment=function(t){var n=t.id,r=t.featured?"".concat(n,"_featured"):n,o=!e.state.collapsed;return Object(s.b)("ul",{className:"NestComment",children:Object(s.b)(yt,Object.assign({comment:t,onReply:e.addComment,onFeature:e.featureItem,showCollapsed:o},e.props))},r)},e.renderNormalComments=function(t){var n=e.state.collapsed,r=e.props,o=r.byComment,i=r.lastFeaturedIndex,a=r.parent,c=a.featuredCounts,u=a.commonCounts,l=[],f=c>0;return e.lastFeaturedIndex=0,t.length>0&&t.forEach((function(r,a){if(o||!r.collapsed){var m=t[a-1];r.collapsed&&(m&&m.collapsed||l.push(e.renderCollapsedDivider()),n)||(a===i&&l.push(Object(s.b)("div",{className:"NestComment-nextSiblings--noBorder"},"NestComment-nextSiblings--noBorder")),f&&0===a&&-1!==i&&l.push(Object(s.c)("div",{className:"CommentListV2-header-divider",children:["精选评论（",c,"）"]},"divider-featured")),l.push(e.renderComment(r)),a===i&&(e.lastFeaturedIndex=a,l.push(Object(s.c)("div",{className:"CommentListV2-header-divider",children:["评论（",u,"）"]},"divider-comment"))))}})),l},e.renderCollapsedComments=function(){var t=e.props,n=t.collapsedComments,r=t.isDrained,o=t.parent,i=(o=void 0===o?{}:o).collapsedCounts;return!r||i<=0?[]:n.map((function(t){return e.renderComment(t)}))},e.renderComments=function(t){return t.map(e.renderComment)},e.renderCollapsedDivider=function(){var t=e.props,n=t.isDrained,r=t.parent.collapsedCounts;return!n||r<=0?[]:e.state.collapsed?Object(s.b)("div",{className:"CommentListV2-action",children:Object(s.c)("div",{className:"CommentListV2-expendCollapseButton",children:[Object(s.c)("span",{onClick:e.handleOpenCollapsed,children:[Object(w.formatNumber)(r)," 条评论被折叠"]}),"（",Object(s.b)("a",{href:"//www.zhihu.com/question/52029856/answer/128623557",target:"_blank",rel:"noopener noreferrer",children:"为什么？"}),"）"]})},"collapsed"):Object(s.c)("div",{className:"CommentListV2-divider",children:[Object(s.b)("div",{className:"CommentListV2-dividerLine"}),Object(s.c)("div",{className:"CommentListV2-dividerText",children:[Object(w.formatNumber)(r)," 条评论被折叠（",Object(s.b)("a",{href:"//www.zhihu.com/question/52029856/answer/128623557",target:"_blank",rel:"noopener noreferrer",children:"为什么？"}),"）"]})]},"divider-collapsed")},e.renderCollapsedInfiLoader=function(){var t=e.state.collapsed;if(t)return[];var n=e.props.collapsedInfo,r=void 0===n?{}:n,o=r.isFetching,i=void 0!==o&&o,a=r.isPrevDrained,c=void 0!==a&&a,u=r.isDrained,l=void 0!==u&&u;return Object(s.b)(j.b,{className:"CommentListV2",onRef:function(t){e.listEl=t},isLocal:!0,isLoading:i,isPrevDrained:c,isDrained:l,onLoad:function(n){return e.load(e.props,n,!t)},placeholder:Object(s.b)(j.a,{className:"CommentItem",small:!0}),children:e.renderCollapsedComments()})},e.renderPatternContent=function(t){var n=e.props,r=n.isFetching,o=n.parent.adminClosedComment,i=n.byComment,a=n.status,c=n.order,u=n.totals,l=n.showPackupButton,f=n.handlePackupButton,m=Math.ceil(u/20),d=e.state.current;return o?null:r?Object(s.b)(Be.a,{}):Object(s.c)("div",{ref:e.commentsWithPaginationElRef,children:[Object(s.b)("div",{className:"CommentListV2",children:"normal"===c&&"open"===a?e.renderNormalComments(t):e.renderComments(t)}),m>1&&Object(s.b)(_.a,{className:"CommentsV2-pagination",current:d,total:m,onSelect:e.handlePageSelect}),!i&&e.renderCollapsedDivider(),!i&&e.renderCollapsedInfiLoader(),l&&Object(s.b)(De.a,{onClick:f,commentsElRef:e.commentsWithPaginationElRef})]})},e.renderModalContent=function(t){var n=e.props,r=n.collapsedInfo,o=n.parent.adminClosedComment,i=n.status,a=n.order,c=n.byComment,u=e.state.collapsed,l=u?e.props:r,f=l.isFetching,m=void 0!==f&&f,d=l.isDrained,p=void 0!==d&&d,h=l.isPrevDrained,v=void 0!==h&&h;return p&&t.length<=0||o?Object(s.b)("div",{className:"CommentsV2-empty",children:Object(s.c)(P.d,{children:[Object(s.b)(P.a,{}),Object(s.b)("div",{children:"还没有评论"})]})}):Object(s.c)(j.b,{className:"CommentListV2",onRef:function(t){e.listEl=t},isLocal:!0,isLoading:m,isPrevDrained:v,isDrained:p,onLoad:function(t){return e.load(e.props,t,!u)},placeholder:Object(s.b)(j.a,{className:"CommentItemV2",small:!0}),getContainer:function(e){return e},children:["normal"===a&&"open"===i?e.renderNormalComments(t):e.renderComments(t),!c&&e.renderCollapsedDivider(),!c&&e.renderCollapsedComments()]})},e.renderCommentEdit=function(){var t=e.props,n=t.parent,r=n.canComment,o=(r=void 0===r?{status:!0}:r).status,i=r.reason,a=n.author,c=(a=void 0===a?{isOrg:!1}:a).isOrg,u=n.type,l=n.id,f=n.adminClosedComment,m=n.questionType,d=t.byComment,p=t.autoFocus,h=t.commentNeedsReview,v=t.zaInfo,b=f?"当前内容暂时无法评论":i,C=p&&!d;return o&&!f?Object(s.b)(Te,{className:"CommentsV2-footer",type:u,id:l,commentNeedsReview:h,onSubmit:e.addComment,autoFocus:C,ownerAuthorIsOrg:c,ownerAuthorIsBrand:"commercial"===m,zaInfo:v}):Object(s.b)("div",{className:g()("CommentsV2-disabledText"),children:Object(s.b)("div",{className:"CommentsV2-disabledReason",children:b})})},e}return Object(i.a)(n,[{key:"loadCommentPermission",value:function(e,t){var n=this.props,r=n.loadAnswerCommentPermission,o=n.loadArticleCommentPermission;switch(e){case"answer":return r(t);case"article":return o(t);default:return null}}},{key:"componentDidMount",value:function(){var e=this.props,t=e.commentPattern,n=e.parent.adminClosedComment,r=e.stickers,o=e.loadStickers,i=e.getCommentWithPicPermission,a=e.commentWithPicPermission,c=e.currentUser;n||"bottom"!==t||this.loadByPagination(this.state.current),!r.length&&o(),void 0===a.commentWithPic&&c&&i()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.order,r=t.status,o=t.targetComment,i=t.commentPattern;n===e.order&&r===e.status||("bottom"===i?(this.setState({current:1}),this.loadByPagination(1,e)):this.load(e),this.setState({collapsed:!0}));var a=e.targetComment;a!==o&&a&&this.setState({collapsed:a.collapsed})}},{key:"componentWillUnmount",value:function(){Object(R.d)(R.b)}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.comments,o=t.commentPattern,i=t.commentInputPosition,a=t.isAuthor,c=t.parent,u=c.author,l=(u=void 0===u?{isOrg:!1}:u).isOrg,f=c.commentPermission,m=c.reviewingCounts,d=c.commentCount,p=c.adminClosedComment,h=t.totals,v=t.status,b=t.order,C=t.onStatusChange,y=t.onOrderChange,O=t.targetLink,j=t.shouldReverse,_=t.permission.canBrandAdminEdit,w="censor"===f&&(a||_),R=w?{isCommentReviewer:w,onStatusChange:C,status:v,reviewingCounts:m}:{status:v};return Object(s.c)("div",{className:g()("CommentsV2 CommentsV2--withEditor",{"CommentsV2-withPagination":"bottom"===o},n),ref:function(t){e.commentsElement=t},children:[Object(s.b)(ze.a,Object.assign({commentCount:void 0!==d?d:h,shouldReverse:j,commentClosed:p,targetLink:O,order:b,onOrderChange:y,commentPattern:o,isOrg:l},R)),"top"===i&&this.renderCommentEdit(),"bottom"===o?this.renderPatternContent(r):this.renderModalContent(r),"bottom"===i&&this.renderCommentEdit()]})}}]),n}(l.Component);_t.propTypes={type:d.a.string,parent:d.a.object.isRequired,targetLink:d.a.node,commentNeedsReview:d.a.bool,byComment:d.a.oneOfType([d.a.number,d.a.string]),commentPattern:d.a.string,commentInputPosition:d.a.oneOf(["top","bottom"]),showPackupButton:d.a.bool,handlePackupButton:d.a.func,onPaginationClick:d.a.func,autoFocus:d.a.bool,shouldReverse:d.a.bool},_t.contextTypes={authRequired:d.a.func.isRequired},_t.defaultProps={commentInputPosition:"bottom",showPackupButton:!0,autoFocus:!0,shouldReverse:!0};var wt=Object(v.compose)(Object(h.connect)((function(e,t){var n=t.parent,r=t.parent,o=r.type,i=r.id,a=t.status,c=t.order,u=t.byComment,s=t.commentPattern,l=t.notificationId,f=e.entities,m=e.commentsV2,d=m.conversation,p=m.stickers,h=void 0===p?[]:p,v=m.commentWithPicPermission,b=m.notificationsComments,g=m.parent,C=f.comments[u],y=m.pagination;"reviewing"===a&&(y=m.reviewing);var j="reverse"===c&&"open"===a;j&&(y=m.reverse);var _="".concat(o,"_").concat(i),w=[],R=m.collapsed[_]||{};R.ids&&R.ids.length>0&&(w=R.ids.map((function(e){return f.comments[e]}))),l&&(y=b,_=l);var k=y[_]||{isPrevDrained:!1,isFetching:!1,isDrained:!1,ids:[]},I=k.isFetching,P=k.isPrevDrained,x=k.isDrained,E=k.ids,L=k.newIds,T=void 0===L?[]:L,B=k.totals,z="bottom"!==s?E:T,D=z.map((function(e){return f.comments[e]})).map(A),M=O()(z,(function(e){return String(e).includes("_featured")}));return{currentUser:Object(N.b)(e),isFetching:I,isPrevDrained:P,isDrained:x,totals:l?D.length:B,collapsedInfo:R,collapsedComments:w,targetComment:C,conversation:d,entities:f,stickers:h,lastFeaturedIndex:M,comments:D,isReverseAndStatusOpen:j,commentWithPicPermission:v,ids:z,parent:Object.assign({},n,g[_]),permission:Object(S.l)(e)}}),{loadComments:C.g,loadConversation:C.h,addComment:C.a,loadStickers:C.k,clearNotification:R.d,getCommentWithPicPermission:C.f,loadNotificationComments:C.j,loadAnswerCommentPermission:k.k,loadArticleCommentPermission:I.c}),Object(x.a)())(_t),Rt=n(154),kt=n.n(Rt),It=n(199),Nt=n.n(It),St=n(1094);function Pt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var xt=function(e){Object(a.a)(n,e);var t=Pt(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).load=function(){var t=e.props,n=t.isAnchorComments,r=t.conversationId;(0,t.loadConversation)({id:r,isAnchorComments:n})},e.addComment=function(t,n,r){var o=r.rootCommentId,i=r.isConversation,a=e.props,c=a.parent,u=c.type,s=c.id,l=a.conversationId,f=a.addComment,m=a.isAnchorComments;return f({parentType:u,parentId:s,content:t,replyTo:n,conversationId:l,rootCommentId:o,isConversation:i,replyType:Ot({id:o,replyTo:n,isConversation:i}).type,isAnchorComments:m})},e.loadMoreAnchorComments=function(){var t=e.props,n=t.conversationId,r=t.topCommentsPaging,o=void 0===r?{}:r;(0,t.loadMoreAnchorComments)({conversationId:n,nextUrl:o.next})},e.createOnRef=kt()((function(t){return function(n){var r=e.props.byComment;n&&r&&String(t)===String(r)&&(e.byCommentNode=n)}})),e.scrollToTarget=function(){var t=Object(B.a)(e),n=t.byCommentNode,r=t.listEl;if(r&&n){var o=n.getBoundingClientRect(),i=o.top,a=o.height,c=r.getBoundingClientRect(),u=c.top,s=c.height;e.listEl.scrollTop+=i-u-(s-a)/2,n.classList.add("CommentItemV2--highlighted"),setTimeout((function(){return n.classList.remove("CommentItemV2--highlighted")}),2e3),n.tabIndex=-1,n.focus()}},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.byComment&&this.scrollToTarget()}},{key:"componentDidUpdate",value:function(e){!e.comments.length&&this.props.comments.length&&this.props.byComment&&this.scrollToTarget()}},{key:"render",value:function(){var e=this,t=this.props,n=t.onItemLike,r=t.onItemDelete,o=t.onItemFeature,i=t.onItemApprove,a=t.onItemCollapse,c=t.onItemDislike,u=t.onNavBack,f=t.canOperateItem,m=t.isFetching,d=t.comments,p=void 0===d?[]:d,h=t.commentNeedsReview,v=t.openComment.collapsed,b=t.parent,g=t.commentPattern,C=t.totals,y=t.isDrained,O=t.isPrevDrained,_=t.isConversationMoreFetching,w=t.isConversationMoreDrained,R=t.offsetIndex,k=null;return m&&!p.length?k=Object(s.c)(s.a,{children:[Object(s.b)(j.a,{className:"CommentItemV2",small:!0}),Object(s.b)("div",{className:"CommentsV2-openComment-divider"}),Object(s.b)("div",{className:"CommentsV2-replyNum",children:"".concat(C," 条回复")})]}):p.length&&(k=p.map((function(t,u){return u?w||u!==R||_?_&&u===R?Object(s.c)(l.Fragment,{children:[Object(s.b)(pt,{onRef:e.createOnRef(t.id),isConversation:!0,commentNeedsReview:h,canOperate:f,parent:b,comment:t,onLike:n,onDelete:r,onFeature:o,onApprove:i,onCollapse:a,onDislike:c,collapsedShown:v,onReply:e.addComment},t.id),Object(s.b)(j.a,{className:"NestCoomment-moreCommentButton ",small:!0},"NestCoomment-moreCommentButton-PlaceHolder")]},t.id):Object(s.b)(pt,{onRef:e.createOnRef(t.id),isConversation:!0,commentNeedsReview:h,canOperate:f,parent:b,comment:t,onLike:n,onDelete:r,onFeature:o,onApprove:i,onCollapse:a,onDislike:c,collapsedShown:v,onReply:e.addComment},t.id):Object(s.c)(l.Fragment,{children:[Object(s.b)(pt,{onRef:e.createOnRef(t.id),isConversation:!0,commentNeedsReview:h,canOperate:f,parent:b,comment:t,onLike:n,onDelete:r,onFeature:o,onApprove:i,onCollapse:a,onDislike:c,collapsedShown:v,onReply:e.addComment},t.id),Object(s.c)("div",{preset:"plain",className:"NestCoomment-moreCommentButton",onClick:e.loadMoreAnchorComments,children:[Object(s.b)(St.a,{}),Object(s.b)("p",{children:"点击查看更多回复"})]},"NestCoomment-moreCommentButton")]},t.id):Object(s.c)(l.Fragment,{children:[Object(s.b)("div",{className:"CommentsV2-openComment",children:Object(s.b)(pt,{onRef:e.createOnRef(t.id),isConversation:!0,commentNeedsReview:h,canOperate:f,parent:b,comment:t,onLike:n,onDelete:r,onFeature:o,onApprove:i,onCollapse:a,onDislike:c,collapsedShown:v,onReply:e.addComment},t.id)}),Object(s.b)("div",{className:"CommentsV2-openComment-divider"}),Object(s.b)("div",{children:Object(s.b)("div",{className:"CommentsV2-replyNum",children:"".concat(C," 条回复")})},"".concat(t.id,"-title"))]},t.id)}))),"bottom"===g?Object(s.b)(_e.b,{size:"fullPage",onClose:u,children:Object(s.c)("div",{className:"CommentsV2",children:[Object(s.b)(ze.a,{isConversation:!0,commentPattern:g}),Object(s.b)(j.b,{className:"CommentListV2",onRef:function(t){e.listEl=t},isLocal:!0,isLoading:m,isDrained:y,isPrevDrained:O,onLoad:this.load,placeholder:Object(s.b)(j.a,{className:"CommentItemV2",small:!0}),getContainer:function(e){return e},children:k})]})}):Object(s.c)("div",{className:"CommentsV2",children:[Object(s.b)(ze.a,{isConversation:!0,onNavBack:u}),Object(s.b)(j.b,{className:"CommentListV2",onRef:function(t){e.listEl=t},isLocal:!0,isLoading:m,isDrained:y,isPrevDrained:O,onLoad:this.load,placeholder:Object(s.b)(j.a,{className:"CommentItemV2",small:!0}),getContainer:function(e){return e},children:k})]})}}]),n}(l.Component);xt.propTypes={conversationId:d.a.oneOfType([d.a.number,d.a.string]),type:d.a.string,parent:d.a.object.isRequired,commentNeedsReview:d.a.bool},xt.contextTypes={currentUser:d.a.object,authRequired:d.a.func.isRequired};var Et=Object(v.compose)(Object(h.connect)((function(e,t){var n=t.conversationId,r=t.isAnchorComments,o=e.entities.comments,i=e.commentsV2,a=i.conversation,c=i.conversationMore,u=a[n]||{isFetching:!1,isDrained:!1,isPrevDrained:!1,ids:[]},s=u.isFetching,l=u.isDrained,f=u.isPrevDrained,m=u.ids,d=u.totals,p=u.topComments,h=(p=void 0===p?{}:p).paging,v=(h||{}).isEnd,b=c[n]||{isFetching:!1,isDrained:!1,ids:[]},g=b.isFetching,C=b.isDrained,y=b.ids,O=y.map((function(e){return o[e]})),j=m.map((function(e){return o[e]})),_=o["".concat(n,"_featured")]||o[n]||{};return{isFetching:s,isDrained:l,isPrevDrained:f,totals:d,comments:r?Nt()(y.length?[].concat(Object(T.a)(j.slice(0,4)),Object(T.a)(O),Object(T.a)(j.slice(4))):j,"id"):[_].concat(Object(T.a)(j)),openComment:_,topCommentsPaging:h,isConversationMoreFetching:g,isConversationMoreDrained:v||C,offsetIndex:h?[].concat(Object(T.a)(j.slice(0,3)),Object(T.a)(O)).length:-1}}),{loadConversation:C.h,addComment:C.a,loadMoreAnchorComments:C.i}))(xt),At=n(83);function Lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var Tt=function(e){Object(a.a)(n,e);var t=Lt(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={openedCommentId:e.props.byComment,isAnchorComments:Boolean(e.props.byComment),status:"open",order:"normal"},e.commentsContainerRef=Object(l.createRef)(),e.showConversation=function(t){var n=t.commentId,r=t.isAnchorComments;e.setState({openedCommentId:n,isAnchorComments:r})},e.showComments=function(){var t=e.props,n=t.byComment,r=t.router;n&&r.replace("".concat(location.pathname).concat(location.search)),e.setState({openedCommentId:null,isAnchorComments:!1})},e.delete=function(t){var n=e.props,r=n.parent;return(0,n.deleteComment)(t,r.type,r.id)},e.feature=function(t){var n=e.props,r=n.parent,o=n.updateCommentFeatureStatus,i=n.notificationId;o({id:e.state.openedCommentId,commentId:t,parentId:r.id,parentType:r.type,notificationId:i})},e.like=function(t,n){var r=e.props,o=r.onItemLike,i=r.updateCommentLikeStatus;o&&o(t,n),i(t)},e.collapse=function(t){var n=e.props,r=n.parent;(0,n.updateCommentCollapsed)(t,r.type,r.id)},e.dislike=function(t){(0,e.props.updateCommentDisliked)(t)},e.approve=function(t){var n=e.props,r=n.parent,o=n.type;(0,n.approveComment)(t,r.type||o,r.id)},e.reject=function(t){var n=e.props,r=n.parent,o=n.type;(0,n.rejectComment)(t,r.type||o,r.id)},e.handleStatusChange=function(t){e.setState({status:t})},e.handleOrderChange=function(t,n){var r=e.props.onOrderChange;r&&r(t,n),e.setState({order:t})},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.onMount;e&&e(this.commentsContainerRef.current)}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.containerClassName,o=e.parent,i=e.commentPattern,a=e.type,c=e.parent,u=(c=void 0===c?{}:c).commentPermission,l=c.relationship,f=void 0===l?{}:l,m=c.author,d=void 0===m?{}:m,p=e.needLoadCommentPermission,h=Object(r.a)(e,["className","containerClassName","parent","commentPattern","type","parent","needLoadCommentPermission"]),v=this.context.currentUser,b=void 0===f.isAuthor?v&&d.urlToken&&v.urlToken===d.urlToken:f.isAuthor,C="censor"===u&&!b,y="answer"===a||"article"===a,O=this.state,j=O.openedCommentId,_=O.isAnchorComments,w=O.status,R=O.order,k=j,I=Boolean(j&&"bottom"!==i);return Object(s.c)("div",{className:g()("Comments-container",n),ref:this.commentsContainerRef,children:[Object(s.b)(wt,Object.assign({className:g()(t,{"CommentsV2--hidden":I})},h,{type:a,order:R,status:w,parent:o,commentPattern:i,commentNeedsReview:C,canOperateItem:y,onShowConversation:this.showConversation,onItemLike:this.like,onItemFeature:this.feature,onItemDelete:this.delete,onItemCollapse:this.collapse,onItemDislike:this.dislike,onItemApprove:this.approve,onItemReject:this.reject,byComment:k,onStatusChange:this.handleStatusChange,onOrderChange:this.handleOrderChange,needLoadCommentPermission:p,isAuthor:b})),j&&Object(s.b)(Et,Object.assign({},h,{parent:o,type:a,canOperateItem:y,onItemLike:this.like,onItemFeature:this.feature,onItemDelete:this.delete,onItemCollapse:this.collapse,onItemDislike:this.dislike,onItemApprove:this.approve,onItemReject:this.reject,commentPattern:i,conversationId:j,onNavBack:this.showComments,byComment:k,isAnchorComments:_,commentNeedsReview:C,onShowConversation:this.showConversation}))]})}}]),n}(l.Component);Tt.propTypes={type:d.a.string.isRequired,parent:d.a.object.isRequired,onOrderChange:d.a.func,onItemLike:d.a.func,isAuthor:d.a.bool,onMount:d.a.func},Tt.defaultProps={type:"answer"},Tt.contextTypes={currentUser:d.a.object,authRequired:d.a.func.isRequired};t.default=Object(v.compose)(Object(At.a)(null),p.withRouter,Object(h.connect)(null,{updateCommentLikeStatus:C.p,updateCommentFeatureStatus:C.o,deleteComment:C.e,updateCommentCollapsed:C.m,updateCommentDisliked:C.n,approveComment:C.b,rejectComment:C.l}))(Tt)},1456:function(e,t,n){"use strict";n.r(t);var r=n(37),o=n(9),i=n(10),a=n(11),c=n(12),u=n(5),s=n(0),l=n(2),f=n.n(l),m=n(26),d=n(1),p=n(13),h=n(6),v=n.n(h),b=n(158),g=n(8),C=n(154),y=n.n(C),O=n(1155),j=n(110),_=n(97),w=n(1305),R=n(15),k=n(55),I=n(137),N=n(38),S=n(59),P=n(138),x=n(573),E=n(130),A=n(14),L=n(57),T=n(50),B=n(103),z=n.n(B),D=n(45),M=n.n(D),V=n(63),F=n(116),q=n(324),U=n(39);function W(){var e=Object(E.a)(["回复","",""]);return W=function(){return e},e}function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var G=function(){return""},$=function(e){Object(a.a)(n,e);var t=H(n);function n(e,r){var i;return Object(o.a)(this,n),(i=t.call(this,e,r)).initLocalComment=function(){var e=i.props,t=e.type,n=e.id;if(t&&n){var r=M.a.get("zhihu::comment_local_key")||[],o="".concat(t,"_").concat(n),a=r.find((function(e){return e.key===o})),c=a&&a.value;c&&i.setState({value:{toHTML:function(){return c}},hasNoContent:!1})}},i.saveLocalComment=function(e){var t=i.props,n=t.type,r=t.id;if(n&&r){var o=e?e.toHTML():i.state.value.toHTML(),a="".concat(n,"_").concat(r),c=(M.a.get("zhihu::comment_local_key")||[]).filter((function(e){return e.key!==a})),u=o?[].concat(Object(A.a)(c.slice(0,4)),[{key:a,value:o}]):c;M.a.set("zhihu::comment_local_key",u)}},i.handleChange=function(e){i.setState({value:e,hasNoContent:e.isEmpty})},i.handleCommentShow=i.context.authRequired((function(){i.setState({shown:!0}),i.hiddenInput.focus()})),i.handleCommentHide=function(){i.setState({shown:!1})},i.handleMobileComment=function(){i.onSubmit(),i.handleCommentHide()},i.focusInput=function(e){e.preventDefault(),i.input.focus()},i.onChange=i.handleChange.bind(Object(L.a)(i)),i.onFocus=i.handleFocus.bind(Object(L.a)(i)),i.onBlur=i.handleBlur.bind(Object(L.a)(i)),i.onSubmit=i.context.authRequired(i.handleSubmit.bind(Object(L.a)(i)),void 0,N.b),i.state={active:e.defaultActive,hasNoContent:!0,submitting:!1,shown:!1,value:{toHTML:G}},i}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.initLocalComment()}},{key:"componentWillUnmount",value:function(){this.saveLocalComment()}},{key:"handleFocus",value:function(){this.setState({active:!0})}},{key:"handleBlur",value:function(){var e=this;setTimeout((function(){return e.setState({active:!1})}),100)}},{key:"handleSubmit",value:function(){var e=this,t=this.props,n=t.replyTo,r=t.onSubmit,o=t.onCancel,i=this.state.submitting,a=this.input.toHTML();if(a&&r&&!i){this.setState({submitting:!0}),this.saveLocalComment();var c=r(a,n);c.then?c.then((function(){o&&o(),e.input?(e.input.reset(),e.setState({value:{toHTML:G}},(function(){return e.saveLocalComment()}))):e.saveLocalComment({toHTML:G})})).finally((function(){e.setState({submitting:!1})})):(this.setState({submitting:!1}),o&&o(),this.input.reset()),g.a.trackEvent(this,{action:"Comment",element:"Button"})}}},{key:"renderInput",value:function(e){var t=this,n=e.placeholder,r=e.className,o=this.props.autoFocus;return Object(s.c)(d.Fragment,{children:[Object(s.b)(F.b,{keyMap:{FOCUS_COMMENT_INPUT:"shift+c"},handlers:{FOCUS_COMMENT_INPUT:this.focusInput}}),Object(s.b)(q.a,{className:v()("CommentEditor-input",r),defaultValue:this.state.value.toHTML(),allowMention:!0,allowPasteRichText:!1,autoFocus:Boolean(void 0)||o,outputBlockType:"div",ref:function(e){t.input=e},placeholder:n,onFocus:this.onFocus,onBlur:this.onBlur,onChange:this.onChange,onSubmit:this.onSubmit,minRows:5})]})}},{key:"render",value:function(){var e=this.props,t=e.replyTo,n=e.commentNeedsReview,r=e.className,o=(e.onClick,e.onCancel),i=e.ownerAuthorIsOrg,a=e.ownerAuthorIsBrand,c=(e.type,e.id,e.shouldOia,e.preset,this.state),u=c.active,l=c.hasNoContent,f=c.submitting,m=i?"机构":"作者",d={preset:"primary",color:"blue",children:"评论",disabled:l||f};if(t){var p=z()(W(),t.author.member.name,n?"，评论由".concat(m,"筛选后公开"):"");return Object(s.c)("div",{className:v()(r,"CommentEditor--inCommentItem",{"CommentEditor--active":u||!l}),children:[this.renderInput({placeholder:p}),Object(s.c)("div",{className:"CommentEditor-actions",children:[Object(s.b)(R.c,{preset:"plain",onClick:o,children:"取消"}),Object(s.b)(R.c,Object.assign({},d,{onClick:this.onSubmit}))]})]})}var h="写下你的评论...";n&&(h=a?"已开启预审评论，评论由品牌筛选后公开":i?"已开启预审评论，评论由机构筛选后公开":"评论由作者筛选后显示");v()(r,"CommentEditor--normal"),this.state.shown;return Object(s.c)("div",{className:v()(r,"CommentEditor--normal",{"CommentEditor--active":u||!l}),children:[this.renderInput({placeholder:h}),Object(s.b)(R.c,Object.assign({},d,{className:"CommentEditor-singleButton",onClick:this.onSubmit}))]})}}]),n}(d.Component);$.contextTypes={authRequired:f.a.func},$.defaultProps={defaultActive:!1,replyTo:null,inCommentItem:!1,autoFocus:!0,ownerAuthorIsOrg:!1,ownerAuthorIsBrand:!1},$.propTypes={className:f.a.string,defaultActive:f.a.bool,replyTo:f.a.object,inCommentItem:f.a.bool,commentNeedsReview:f.a.bool,canComment:f.a.object,onCancel:f.a.func,onSubmit:f.a.func.isRequired};var Z=Object(m.compose)(T.withRouter,Object(p.connect)((function(e){return{shouldOia:Object(U.i)(e)}})))($),K=(n(1162),n(1159)),Y=n(1175),J=n(1166),X=n(1186),Q=n(1132),ee=n(1438),te=n(1126),ne=n(1189),re=n(1133),oe=(n(48),n(328),n(77)),ie=n(263),ae=n(404),ce=n(399),ue=n(147),se=n(585),le=n(30),fe=n(216),me=n(217);function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var pe=function(e){Object(a.a)(n,e);var t=de(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={reportModalShown:!1,isReplying:!1,collapsed:!0,guideShown:!1},e.getRedirectUrl=function(){var t=e.props.parent;switch(t.type){case"answer":return"/question/".concat(t.question.id,"/answer/").concat(t.id);case"article":return"https://zhuanlan.zhihu.com/p/".concat(t.id);default:return""}},e.like=e.context.authRequired((function(t){var n=e.props;(0,n.onLike)(n.comment.id,t)}),le.L.like,N.b),e.dislike=e.context.authRequired((function(){var t=e.props;(0,t.onDislike)(t.comment.id)}),le.L.like,N.b),e.delete=function(){var t=e.props;(0,t.onDelete)(t.comment.id)},e.feature=function(){var t=e.props;(0,t.onFeature)(t.comment.id)},e.collapse=function(){var t=e.props;(0,t.onCollapse)(t.comment.id)},e.approve=function(){var t=e.props;(0,t.onApprove)(t.comment.id)},e.showConversation=function(){var t=e.props;(0,t.onShowConversation)(t.comment.id)},e.startReply=e.context.authRequired((function(){e.setState({isReplying:!0})}),void 0,N.b),e.stopReply=function(){e.setState({isReplying:!1})},e.openReportModal=e.context.authRequired((function(){e.setState({reportModalShown:!0})})),e.closeReportModal=function(t){if(t){var n=t.result.payload,r=n&&n.message||n&&n.code&&"举报失败";t.commentDeleteResult&&!(t.commentDeleteResult.payload||{}).code?ie.b.showModal({reportText:r}):Object(ue.b)(r||"举报成功")}e.setState({reportModalShown:!1})},e.handleExpand=function(){e.setState({collapsed:!1})},e.handleToggleGuide=function(){e.setState({guideShown:!e.state.guideShown})},e.handleDelete=function(){return e.setState({deleteModal:!0})},e.handleCloseDelete=function(){return e.setState({deleteModal:!1})},e}return Object(i.a)(n,[{key:"renderRoleInfo",value:function(e,t){return"normal"===e?null:Object(s.b)("span",{className:"CommentItem-roleInfo",children:"ancestor"===e||"author"===e&&"question"===t?" (提问者) ":" (作者) "})}},{key:"renderReplyTo",value:function(){var e=this.props.comment,t=e.replyToAuthor,n=e.resourceType;if(!t)return null;var r=t.member,o=void 0===r?{}:r,i=t.role;return Object(s.c)("span",{children:[Object(s.b)("span",{className:"CommentItem-reply",children:"回复"}),Object(s.b)(ce.a,{className:v()({"CommentItem-userLink":void 0}),noBadge:!0,noHoverCard:!0,user:o}),this.renderRoleInfo(i,n)]})}},{key:"renderInner",value:function(){var e=this,t=this.props,n=t.comment,r=n.isDelete,o=n.collapsed,i=t.isConversation,a=t.ownerAuthorIsOrg;if(r)return i?Object(s.b)("div",{className:"CommentItem-deletedContent",children:"这里有一条已删除的评论"}):null;if(o&&i&&this.state.collapsed)return Object(s.c)("div",{className:"CommentItem-deletedContent",children:["这里有一条已折叠的评论，",Object(s.b)(R.c,{preset:"plain",onClick:this.handleExpand,children:"查看"})]});var c,u=this.state,l=u.reportModalShown,f=u.isReplying,m=this.props,d=m.parent,p=d.canComment,h=(p=void 0===p?{status:!0}:p).status,b=d.questionType,g=m.commentNeedsReview,C=m.comment,y=m.onReply,O=m.status,j=m.type,_=m.canOperate,w=m.commentPattern,k=m.isMobile,I=C.id,N=C.author,S=C.content,P=C.voteCount,x=C.replyToAuthor,E=C.isAuthor,A=C.isParentAuthor,L=C.createdTime,T=C.featured,B=C.voting,z=C.reviewing,D=C.disliked,M=C.resourceType,V=C.collapsedReason,F=void 0===V?"":V,q=N||{},U=q.member,W=q.role;if(f)c=Object(s.b)(Z,{type:"comment",id:I,commentNeedsReview:g,className:"CommentItem-editor",defaultActive:!0,replyTo:C,onCancel:this.stopReply,onSubmit:y});else if("reviewing"===O)c=Object(s.c)("div",{className:"CommentItem-footer",children:[Object(s.c)(R.c,{preset:"plain",onClick:this.approve,children:[Object(s.b)(K.a,{style:{marginRight:5},center:!0,size:14}),"公开"]}),Object(s.c)(R.c,{className:v()({"CommentItem-hoverBtn":!0}),preset:"plain",onClick:this.handleDelete,children:[Object(s.b)(Y.a,{style:{marginRight:5},center:!0,size:16}),"删除"]})]});else{var H=E||A&&("question"!==j||"commercial"===b);c=Object(s.c)("div",{className:v()("CommentItem-footer",{"CommentItem-mobileFooter":void 0}),children:[Object(s.c)(R.c,{className:v()("CommentItem-likeBtn",B&&"is-liked"),preset:"plain",onClick:this.like,disabled:E||!h,children:[Object(s.b)(J.a,{style:{marginRight:5},center:!0,size:16}),P>0?P:"赞"]}),o&&F&&Object(s.c)("div",{className:"CommentItem-walleTag",children:["阴阳怪气自动折叠"===F&&Object(s.b)(X.a,{size:16,className:"CommentItem-walleIcon"}),F]}),!i&&x&&Object(s.c)(R.c,{preset:"plain",className:"CommentItem-talkBtn",onClick:this.showConversation,children:[Object(s.b)(Q.a,{style:{marginRight:5},center:!0,size:16}),"查看对话"]}),!i&&!E&&h&&!o&&Object(s.c)(R.c,{preset:"plain",className:v()({"CommentItem-hoverBtn":!0}),onClick:this.startReply,children:[Object(s.b)(ee.a,{style:{marginRight:5},center:!0,size:16}),"回复"]}),A&&_&&!k&&Object(s.c)(R.c,{className:v()({"CommentItem-hoverBtn":!E}),preset:"plain",onClick:this.feature,children:[Object(s.b)(te.a,{style:{marginRight:5},center:!0,size:16}),T?"取消推荐":"推荐"]}),A&&_&&!k&&Object(s.c)(R.c,{className:v()({"CommentItem-hoverBtn":!E}),preset:"plain",onClick:this.collapse,children:[Object(s.b)(ne.a,{style:{marginRight:5},center:!0,size:14}),o?"取消折叠":"折叠"]}),!A&&!E&&_&&!k&&Object(s.c)(R.c,{className:v()({"CommentItem-hoverBtn":!0}),preset:"plain",onClick:this.dislike,children:[Object(s.b)(J.a,{style:{transform:"rotate(180deg)",marginRight:5},size:16,center:!0}),D?"取消踩":"踩"]}),E||Object(s.c)(R.c,{className:v()({"CommentItem-hoverBtn":!0}),preset:"plain",onClick:this.openReportModal,children:[Object(s.b)(re.a,{style:{marginRight:5},center:!0,size:16}),"举报"]}),H&&Object(s.c)(R.c,{className:v()({"CommentItem-hoverBtn":!E}),preset:"plain",onClick:this.handleDelete,children:[Object(s.b)(Y.a,{style:{marginRight:5},center:!0,size:16}),"删除"]}),void 0,void 0,Object(s.b)(ie.a,{shown:this.state.deleteModal,id:I,onDelete:this.delete,onClose:this.handleCloseDelete}),Object(s.b)(fe.a,Object.assign({type:"comment",urlToken:I,shown:l,onClose:this.closeReportModal},H&&{onDeleteComment:function(){return e.props.onDelete(I)}},{notification:{failure:se.a},zaEnabled:!0}))]})}return Object(s.c)("div",{children:[Object(s.c)("div",{className:"CommentItem-meta",children:[U&&Object(s.b)(ae.a,{className:"CommentItem-avatar",noHoverCard:"fixed"===w,user:U}),U&&Object(s.b)(ce.a,{className:v()({"CommentItem-userLink":void 0}),noBadge:!0,noHoverCard:!0,user:U}),this.renderRoleInfo(W,M),this.renderReplyTo(),z&&Object(s.b)(ne.a,{className:"CommentItem-reviewing","data-tooltip":"".concat(!1===a?"评论未公开，由作者筛选后显示":"已开启预审评论，评论由机构筛选后公开"),center:!0,size:14}),Object(s.b)("span",{className:"CommentItem-time",children:Object(oe.toRelativeString)(L)})]}),Object(s.b)(me.a,{className:"CommentItem-content",html:S}),c]})}},{key:"render",value:function(){var e=this.renderInner(),t=this.props,n=t.parent;n.type,n.id,t.isWechat;return e&&Object(s.c)("div",{className:"CommentItem",ref:this.props.onRef,children:[e,void 0]})}}]),n}(d.PureComponent);pe.propTypes={comment:f.a.object.isRequired,parent:f.a.object.isRequired,commentNeedsReview:f.a.bool,type:f.a.string,isConversation:f.a.bool,onLike:f.a.func.isRequired,onShowConversation:f.a.func,onReply:f.a.func,onFeature:f.a.func,onDelete:f.a.func.isRequired,onCollapse:f.a.func,commentPattern:f.a.string,isMobile:f.a.bool},pe.contextTypes={currentUser:f.a.object,authRequired:f.a.func};var he=Object(m.compose)(T.withRouter,Object(p.connect)((function(e){return{isWechat:e.env.userAgent.Wechat,shouldSpecialOia:Object(U.j)(e)}})))(pe),ve=n(1307),be=n(1233),ge=n(1308);function Ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}function ye(e,t){switch(e){case"answer":return Object(S.k)(t);case"article":return Object(P.c)(t);default:return null}}var Oe=function(e){Object(a.a)(n,e);var t=Ce(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={collapsed:!0,current:1},e.commentsWithPaginationElRef=Object(d.createRef)(),e.load=function(t,n,r){if(!e.props.isFetching&&!e.props.parent.adminClosedComment){var o=t||e.props,i=o.order,a=o.byComment,c=o.status,u=o.parent,s=u.id,l=u.type,f=o.dispatch,m=o.commentPattern;if(o.needLoadCommentPermission&&ye(l,s)&&f(ye(l,s)),r){f(Object(b.e)(l,s,{order:i,isPrevious:n,byComment:a,status:"collapsed",commentPattern:m},!0))}else f(Object(b.e)(l,s,{order:i,isPrevious:n,byComment:a,status:c,commentPattern:m}))}},e.addComment=function(t,n){var r=e.props,o=r.parent,i=o.id,a=o.type,c=r.dispatch,u=[a,i,t];return n&&(u[3]=n.id),c(b.a.apply(void 0,u))},e.featureItem=function(t){e.props.onItemFeature(t,e.lastFeaturedIndex)},e.handleOpenCollapsed=function(){e.setState({collapsed:!1}),e.load(e.props,!1,!0)},e.createOnRef=y()((function(t){return function(n){var r=e.props.byComment;t===Number(r)&&(e.targetCommentEl=n)}})),e.handlePageSelect=function(t){var n=e.props.onPaginationClick,r=e.state.current;n&&n(r,t),e.commentsElement.scrollIntoView(),e.setState({current:t}),e.loadByPagination(t)},e.loadByPagination=function(t,n){var r=n||e.props,o=r.order,i=r.byComment,a=r.status,c=r.parent,u=c.id,s=c.type,l=r.dispatch,f=r.commentPattern;r.needLoadCommentPermission&&ye(s,u)&&l(ye(s,u)),l(Object(b.e)(s,u,{order:o,isPrevious:!1,byComment:i,status:a,commentPattern:f,current:t}))},e.renderComment=function(t){var n=e.props,r=n.parent,o=r.type,i=r.author,a=(i=void 0===i?{isOrg:!1}:i).isOrg,c=n.isMobile,u=n.parent,l=n.commentNeedsReview,f=n.onShowConversation,m=n.status,d=n.onItemLike,p=n.onItemDelete,h=n.onItemCollapse,v=n.onItemDislike,b=n.onItemApprove,g=n.canOperateItem,C=n.commentPattern;return Object(s.b)(he,{isMobile:c,comment:t,onRef:e.createOnRef(t.id),status:m,type:o,parent:u,canOperate:g,commentNeedsReview:l,onShowConversation:f,ownerAuthorIsOrg:a,onLike:d,onReply:e.addComment,onFeature:e.featureItem,onDelete:p,onCollapse:h,onDislike:v,onApprove:b,commentPattern:C},t.id)},e.renderNormalComments=function(t){var n=e.state.collapsed,r=e.props.byComment,o=[];if(e.lastFeaturedIndex=0,t.length>0){var i=t[0].featured,a=!1;t.forEach((function(c,u){if(r||!c.collapsed){var l=t[u-1];if(!c.collapsed||(l&&l.collapsed||o.push(e.renderCollapsedDivider()),!n)){o.push(e.renderComment(c));var f=t[u+1];i&&!a&&c.featured&&(!f||!f.featured)&&(a=!0,e.lastFeaturedIndex=u,o.push(Object(s.c)("div",{className:"CommentList-divider",children:[Object(s.b)("div",{className:"CommentList-dividerLine"}),Object(s.c)("div",{className:"CommentList-dividerText",children:["以上为精选评论",Object(s.b)(O.a,{className:"CommentList-questionMark","data-tooltip":"精选评论包含回答作者推荐的评论和部分高赞评论",center:!0,size:16})]})]},"divider-featured")))}}}))}return o},e.renderCollapsedComments=function(){var t=[],n=e.props.collapsedComments;return e.state.collapsed||!n||n.length<=0?[]:(t.push(n.map((function(t){return e.renderComment(t)}))),t)},e.renderComments=function(t){return t.map(e.renderComment)},e.renderCollapsedDivider=function(){var t=e.props,n=t.isDrained,r=t.parent.collapsedCounts;return!n||r<=0?[]:e.state.collapsed?Object(s.b)("div",{className:"CommentList-action",children:Object(s.c)("div",{className:"CommentList-expendCollapseButton",children:[Object(s.c)("span",{onClick:e.handleOpenCollapsed,children:[Object(k.formatNumber)(r)," 条评论被折叠"]}),"（",Object(s.b)("a",{href:"//www.zhihu.com/question/52029856/answer/128623557",target:"_blank",rel:"noopener noreferrer",children:"为什么？"}),"）"]})},"collapsed"):Object(s.c)("div",{className:"CommentList-divider",children:[Object(s.b)("div",{className:"CommentList-dividerLine"}),Object(s.c)("div",{className:"CommentList-dividerText",children:[Object(k.formatNumber)(r)," 条评论被折叠（",Object(s.b)("a",{href:"//www.zhihu.com/question/52029856/answer/128623557",target:"_blank",rel:"noopener noreferrer",children:"为什么？"}),"）"]})]},"divider-collapsed")},e.renderCollapsedInfiLoader=function(){var t=e.state.collapsed;if(t)return[];var n=e.props.collapsedInfo,r=(n=void 0===n?{}:n).isFetching,o=n.isPrevDrained,i=n.isDrained;return Object(s.b)(_.b,{className:"CommentList",onRef:function(t){e.listEl=t},isLocal:!0,isLoading:r,isPrevDrained:o,isDrained:i,onLoad:function(n){return e.load(e.props,n,!t)},placeholder:Object(s.b)(_.a,{className:"CommentItem",small:!0}),children:e.renderCollapsedComments()})},e.renderPatternContent=function(t){var n=e.props,r=n.isFetching,o=n.parent.adminClosedComment,i=n.byComment,a=n.status,c=n.order,u=n.totals,l=n.showPackupButton,f=n.handlePackupButton,m=Math.ceil(u/20),d=e.state.current;return o?null:r?Object(s.b)(ve.a,{}):Object(s.c)("div",{ref:e.commentsWithPaginationElRef,children:[Object(s.b)("div",{className:"CommentList",children:"normal"===c&&"open"===a?e.renderNormalComments(t):e.renderComments(t)}),m>1&&Object(s.b)(w.a,{className:"comments-pagination",current:d,total:m,onSelect:e.handlePageSelect}),!i&&e.renderCollapsedDivider(),!i&&e.renderCollapsedInfiLoader(),l&&Object(s.b)(ge.a,{onClick:f,commentsElRef:e.commentsWithPaginationElRef})]})},e.renderModalContent=function(t){var n=e.props,r=n.collapsedInfo,o=n.parent.adminClosedComment,i=n.status,a=n.order,c=n.byComment,u=e.state.collapsed,l=u?e.props:r,f=l.isFetching,m=l.isDrained,d=l.isPrevDrained;if(m&&t.length<=0||o)return Object(s.b)("div",{className:"Comments-empty",children:Object(s.c)(x.d,{children:[Object(s.b)(x.a,{}),Object(s.b)("div",{children:"还没有评论"})]})});var p={getContainer:function(e){return e}};return Object(s.c)(_.b,Object.assign({className:"CommentList",onRef:function(t){e.listEl=t},isLocal:!0,isLoading:f,isPrevDrained:d,isDrained:m,onLoad:function(t){return e.load(e.props,t,!u)},placeholder:Object(s.b)(_.a,{className:"CommentItem",small:!0})},p,{children:["normal"===a&&"open"===i?e.renderNormalComments(t):e.renderComments(t),!c&&e.renderCollapsedDivider(),!c&&e.renderCollapsedComments()]}))},e.renderCommentEdit=function(t){var n=e.props,r=n.parent,o=r.canComment,i=(o=void 0===o?{status:!0}:o).status,a=o.reason,c=r.author,u=(c=void 0===c?{isOrg:!1}:c).isOrg,l=r.type,f=r.id,m=r.adminClosedComment,d=r.questionType,p=n.byComment,h=n.autoFocus,b=n.commentNeedsReview,C=m?"当前内容暂时无法评论":a,y=h&&!p;return i&&!m?Object(s.b)(Z,Object.assign({className:"Comments-".concat("top"===t?"top":"footer"),type:l,id:f,commentNeedsReview:b,onSubmit:e.addComment,autoFocus:y,ownerAuthorIsOrg:u,ownerAuthorIsBrand:"commercial"===d},"top"===t&&{preset:"default",onClick:function(e){g.a.trackEvent(e.target,{id:3905})}})):"top"!==t&&Object(s.b)("div",{className:v()("Comments-disabledText",{"Comments-disabledText--fixed":void 0}),children:Object(s.b)("div",{className:"Comments-disabledReason",children:C})})},e.renderBottomButton=function(){var t=e.props.params,n=t.id,r=t.answerId,o=Boolean(r);return Object(s.b)("div",{className:"Comments-footer CommentEditor--normal",children:Object(s.b)(R.c,{className:"CommentEditor-startCommentButton",preset:"primary",color:"blue",onClick:function(){return Object(j.e)(Object(I.a)(o?{type:"answer",id:r}:{type:"question",id:n},{utm_content:"comment_area"}),{zaProps:{id:3906}})},children:"打开 App 参与站内讨论"})})},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.byComment,n=e.commentPattern,r=e.parent.adminClosedComment,o=this.state.current;t&&this.scrollToTarget(),"bottom"!==n||r||this.loadByPagination(o)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.order,r=t.status,o=t.targetComment,i=t.commentPattern;n===e.order&&r===e.status||("bottom"===i?(this.setState({current:1}),this.loadByPagination(1,e)):this.load(e),this.setState({collapsed:!0}));var a=e.targetComment;!o&&a&&this.setState({collapsed:!a.collapsed})}},{key:"componentDidUpdate",value:function(e){!e.comments.length&&this.props.comments.length&&this.props.byComment&&this.scrollToTarget()}},{key:"componentWillUnmount",value:function(){this.props.dispatch(Object(N.d)(N.b))}},{key:"scrollToTarget",value:function(){var e=this.targetCommentEl,t=this.listEl;if(t&&e){var n=e.getBoundingClientRect(),r=n.top,o=n.height,i=t.getBoundingClientRect(),a=i.top,c=i.height;this.listEl.scrollTop+=r-a-(c-o)/2,e.classList.add("CommentItem--highlighted"),setTimeout((function(){return e.classList.remove("CommentItem--highlighted")}),2e3),e.tabIndex=-1,e.focus()}}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.isAuthor,o=t.comments,i=t.commentPattern,a=t.commentInputPosition,c=t.parent,u=c.author,l=(u=void 0===u?{isOrg:!1}:u).isOrg,f=c.commentPermission,m=c.reviewingCounts,d=c.commentCount,p=c.adminClosedComment,h=t.totals,b=t.status,g=t.order,C=t.onStatusChange,y=t.onOrderChange,O=t.targetLink,j=o.filter((function(e){return!e.isDelete})),_="censor"===f&&r,w=_?{isCommentReviewer:_,onStatusChange:C,status:b,reviewingCounts:m}:{status:b},R=v()({Comments:!0,"Comments--withEditor":!0,"Comments-withPagination":"bottom"===i},n);return Object(s.c)("div",{className:R,ref:function(t){e.commentsElement=t},children:[Object(s.b)(be.a,Object.assign({commentCount:void 0!==d?d:h,commentClosed:p,targetLink:O,order:g,onOrderChange:y,commentPattern:i,isOrg:l,options:this.renderCommentEdit("top")},w)),"top"===a&&this.renderCommentEdit(),"bottom"===i?this.renderPatternContent(j):this.renderModalContent(j),"bottom"===a&&this.renderCommentEdit()]})}}]),n}(d.Component);Oe.propTypes={type:f.a.string,parent:f.a.object.isRequired,targetLink:f.a.node,commentNeedsReview:f.a.bool,byComment:f.a.oneOfType([f.a.number,f.a.string]),commentPattern:f.a.string,commentInputPosition:f.a.oneOf(["top","bottom"]),showPackupButton:f.a.bool,handlePackupButton:f.a.func,onPaginationClick:f.a.func,autoFocus:f.a.bool},Oe.contextTypes={authRequired:f.a.func.isRequired},Oe.defaultProps={commentInputPosition:"bottom",showPackupButton:!0,autoFocus:!0};var je=Object(p.connect)((function(e,t){var n=t.parent,r=t.parent,o=r.type,i=r.id,a=t.status,c=t.order,u=t.byComment,s=t.commentPattern,l=e.entities,f=e.comments,m="".concat(o,"_").concat(i),d=f.parent,p=f.pagination;"reviewing"===a&&(p=f.reviewing),"reverse"===c&&"open"===a&&(p=f.reverse);var h=[],v=f.collapsed[m]||{};v.ids&&v.ids.length>0&&(h=v.ids.map((function(e){return l.comments[e]})));var b=p[m]||{isPrevDrained:!1,isFetching:!1,isDrained:!1,ids:[]},g=b.isFetching,C=b.isPrevDrained,y=b.isDrained,O=b.ids,j=b.newIds,_=void 0===j?[]:j;return{isFetching:g,isPrevDrained:C,isDrained:y,totals:b.totals,comments:("bottom"!==s?O:_).map((function(e){return l.comments[e]})),collapsedInfo:v,collapsedComments:h,targetComment:l.comments[u],parent:Object.assign({},n,d[m])}}))(Oe);function _e(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var we=function(e){Object(a.a)(n,e);var t=_e(n);function n(e,r){var i;return Object(o.a)(this,n),(i=t.call(this,e,r)).load=i.load.bind(Object(L.a)(i)),i.addComment=r.authRequired(i.addComment.bind(Object(L.a)(i)),void 0,N.b),i}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.load()}},{key:"load",value:function(){this.props.dispatch(Object(b.f)(this.props.commentId))}},{key:"addComment",value:function(e,t){var n=this.props,r=n.parent,o=r.type,i=r.id,a=n.commentId,c=n.dispatch,u=[o,i,e,t.id,a];return c(b.a.apply(void 0,u))}},{key:"render",value:function(){var e,t,n,r=this.props,o=r.onItemLike,i=r.onItemDelete,a=r.onItemFeature,c=r.onItemApprove,u=r.onItemCollapse,l=r.onItemDislike,f=r.onNavBack,m=r.canOperateItem,d=r.isFetching,p=r.comments,h=r.commentNeedsReview,v=r.openComment.collapsed,b=r.parent,g=r.parent.canComment,C=(g=void 0===g?{status:!0}:g).status,y=g.reason,O=r.commentPattern,j=r.commentId,w=this.context.currentUser;return Boolean(w&&p.find((function(e){return e.author&&e.author.member.urlToken===w.urlToken})))&&(t=(e=p.filter((function(e){return e.author&&e.author.member.urlToken!==w.urlToken})))[e.length-1]),d&&!p.length?n=Object(s.b)(_.a,{className:"CommentItem",small:!0}):p.length&&(n=p.map((function(e,t){return Object(s.b)(he,{isConversation:!0,commentNeedsReview:h,canOperate:m,parent:b,comment:e,onLike:o,onDelete:i,onFeature:a,onApprove:c,onCollapse:u,onDislike:l,collapsedShown:v},t)}))),"bottom"===O?Object(s.b)(V.b,{size:"fullPage",onClose:f,children:Object(s.c)("div",{className:"Comments",children:[Object(s.b)(be.a,{isConversation:!0,commentPattern:O}),Object(s.b)("div",{className:"CommentList",children:n})]})}):Object(s.c)("div",{className:"Comments",children:[Object(s.b)(be.a,{isConversation:!0,onNavBack:f}),Object(s.b)("div",{className:"CommentList",children:n}),t&&(C?Object(s.b)(Z,{id:j,type:"conversation",className:"Comments-footer",replyTo:t,commentNeedsReview:h,onSubmit:this.addComment}):Object(s.b)("div",{className:"Comments-disabledText",children:y}))]})}}]),n}(d.Component);we.propTypes={commentId:f.a.number.isRequired,type:f.a.string,parent:f.a.object.isRequired,commentNeedsReview:f.a.bool},we.contextTypes={currentUser:f.a.object,authRequired:f.a.func.isRequired};var Re=Object(p.connect)((function(e,t){var n=t.commentId,r=e.entities.comments,o=e.comments.conversation[n]||{isFetching:!1,isDrained:!1,ids:[]};return{isFetching:o.isFetching,isDrained:o.isDrained,comments:o.ids.map((function(e){return r[e]})),openComment:r[n]}}))(we),ke=n(83);function Ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var Ne=function(e){Object(a.a)(n,e);var t=Ie(n);function n(e){var r;Object(o.a)(this,n),(r=t.call(this,e)).state={openedCommentId:null,status:"open",order:"normal"},r.like=function(e,t){var n=r.props,o=n.onItemLike,i=n.dispatch;o&&o(e,t),i(Object(b.j)(e))},r.collapse=function(e){var t=r.props,n=t.dispatch,o=t.parent;n(Object(b.g)(e,o.type,o.id))},r.dislike=function(e){return r.props.dispatch(Object(b.h)(e))},r.approve=function(e){var t=r.props,n=t.dispatch,o=t.parent,i=t.type;n(Object(b.b)(e,o.type||i,o.id))},r.handleStatusChange=function(e){r.setState({status:e})},r.handleOrderChange=function(e,t){r.props.onOrderChange&&r.props.onOrderChange(e,t),r.setState({order:e})};var i=e.parent,a=e.dispatch;return r.feature=function(e,t){return a(Object(b.i)(e,i.id,i.type,t))},r.delete=function(e){return a(Object(b.d)(e,i.type,i.id))},r.showConversation=function(e){return r.setState({openedCommentId:e})},r.showComments=function(){return r.setState({openedCommentId:null})},r}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.onMount;e&&e(this.domNode)}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,o=t.containerClassName,i=t.parent,a=t.commentPattern,c=t.type,u=t.parent,l=(u=void 0===u?{}:u).commentPermission,f=u.relationship,m=void 0===f?{}:f,d=u.author,p=void 0===d?{}:d,h=t.needLoadCommentPermission,b=Object(r.a)(t,["className","containerClassName","parent","commentPattern","type","parent","needLoadCommentPermission"]),g=this.context.currentUser,C=void 0===m.isAuthor?g&&p.urlToken&&g.urlToken===p.urlToken:m.isAuthor,y="censor"===l&&!C,O="answer"===c||"article"===c,j=this.state,_=j.openedCommentId,w=j.status,R=j.order,k={commentNeedsReview:y,parent:i,type:c,canOperateItem:O,onShowConversation:this.showConversation,onItemLike:this.like,onItemFeature:this.feature,onItemDelete:this.delete,onItemCollapse:this.collapse,onItemDislike:this.dislike,onItemApprove:this.approve};return Object(s.c)("div",{className:v()("Comments-container",o),ref:function(t){return e.domNode=t},children:[Object(s.b)(je,Object.assign({},b,k,{commentPattern:a,className:v()(n,{"Comments--hidden":_&&"bottom"!==a}),order:R,status:w,onStatusChange:this.handleStatusChange,onOrderChange:this.handleOrderChange,needLoadCommentPermission:h,isAuthor:C})),_&&Object(s.b)(Re,Object.assign({},b,k,{commentPattern:a,commentId:_,onNavBack:this.showComments}))]})}}]),n}(d.Component);Ne.propTypes={type:f.a.string.isRequired,parent:f.a.object.isRequired,onOrderChange:f.a.func,onItemLike:f.a.func,isAuthor:f.a.bool,onMount:f.a.func},Ne.defaultProps={type:"answer"},Ne.contextTypes={currentUser:f.a.object,authRequired:f.a.func.isRequired};t.default=Object(m.compose)(Object(p.connect)(),Object(ke.a)(null))(Ne)}}]);
//# sourceMappingURL=column.comments-modals.8b955b2d06bb73e13c53.js.map